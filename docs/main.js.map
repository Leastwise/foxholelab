{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app-routing.module.ts","./src/app/app-shared.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/components/columns-dialog/columns-dialog.component.ts","./src/app/components/columns-dialog/columns-dialog.component.html","./src/app/components/content/content.component.ts","./src/app/components/content/content.component.html","./src/app/components/header/header.component.ts","./src/app/components/header/header.component.html","./src/app/components/input-number/input-number.component.ts","./src/app/components/input-number/input-number.component.html","./src/app/components/picker/picker.component.ts","./src/app/components/picker/picker.component.html","./src/app/components/products/products.component.ts","./src/app/components/products/products.component.html","./src/app/components/settings/settings.component.ts","./src/app/components/settings/settings.component.html","./src/app/directives/dropdown-base.directive.ts","./src/app/directives/dropdown-translate.directive.ts","./src/app/directives/validate-number.directive.ts","./src/app/models/constants.ts","./src/app/models/data/beacon.ts","./src/app/models/data/belt.ts","./src/app/models/data/cargo-wagon.ts","./src/app/models/data/factory.ts","./src/app/models/data/fluid-wagon.ts","./src/app/models/data/fuel.ts","./src/app/models/data/index.ts","./src/app/models/data/item.ts","./src/app/models/data/module.ts","./src/app/models/data/recipe.ts","./src/app/models/data/silo.ts","./src/app/models/entities.ts","./src/app/models/enum/column.ts","./src/app/models/enum/display-rate.ts","./src/app/models/enum/energy-type.ts","./src/app/models/enum/fuel-type.ts","./src/app/models/enum/game.ts","./src/app/models/enum/index.ts","./src/app/models/enum/inserter-capacity.ts","./src/app/models/enum/inserter-target.ts","./src/app/models/enum/item-id.ts","./src/app/models/enum/language.ts","./src/app/models/enum/matrix-result-type.ts","./src/app/models/enum/power-unit.ts","./src/app/models/enum/preset.ts","./src/app/models/enum/rate-type.ts","./src/app/models/enum/recipe-field.ts","./src/app/models/enum/research-speed.ts","./src/app/models/enum/simplex-type.ts","./src/app/models/enum/step-detail-tab.ts","./src/app/models/enum/theme.ts","./src/app/models/flow.ts","./src/app/models/game-info.ts","./src/app/models/index.ts","./src/app/models/inserter-data.ts","./src/app/models/product.ts","./src/app/models/rational.ts","./src/app/models/settings/index.ts","./src/app/models/settings/recipe-settings.ts","./src/app/pipes/factory-rate.pipe.ts","./src/app/pipes/factory-show-rate.pipe.ts","./src/app/pipes/factory-show.pipe.ts","./src/app/pipes/icon-class.pipe.ts","./src/app/pipes/inserter-speed.pipe.ts","./src/app/pipes/invert-array.pipe.ts","./src/app/pipes/left-pad.pipe.ts","./src/app/pipes/options.pipe.ts","./src/app/pipes/power.pipe.ts","./src/app/pipes/precision-example.pipe.ts","./src/app/pipes/rate-type-via-dropdown.pipe.ts","./src/app/pipes/rate.pipe.ts","./src/app/pipes/step-href.pipe.ts","./src/app/pipes/tooltips/beacon-tooltip.pipe.ts","./src/app/pipes/tooltips/factory-tooltip.pipe.ts","./src/app/pipes/tooltips/item-tooltip.pipe.ts","./src/app/pipes/tooltips/module-tooltip.pipe.ts","./src/app/pipes/tooltips/recipe-tooltip.pipe.ts","./src/app/services/content.service.ts","./src/app/services/data.service.ts","./src/app/services/display.service.ts","./src/app/services/error.service.ts","./src/app/services/flow.service.ts","./src/app/services/index.ts","./src/app/services/router.service.ts","./src/app/services/state.service.ts","./src/app/services/theme.service.ts","./src/app/services/track.service.ts","./src/app/store/analytics.effects.ts","./src/app/store/app.actions.ts","./src/app/store/datasets/datasets.actions.ts","./src/app/store/datasets/datasets.effects.ts","./src/app/store/datasets/datasets.reducer.ts","./src/app/store/datasets/datasets.selectors.ts","./src/app/store/datasets/index.ts","./src/app/store/factories/factories.actions.ts","./src/app/store/factories/factories.effects.ts","./src/app/store/factories/factories.reducer.ts","./src/app/store/factories/factories.selectors.ts","./src/app/store/factories/index.ts","./src/app/store/index.ts","./src/app/store/items/index.ts","./src/app/store/items/items.actions.ts","./src/app/store/items/items.reducer.ts","./src/app/store/items/items.selectors.ts","./src/app/store/preferences/index.ts","./src/app/store/preferences/preferences.actions.ts","./src/app/store/preferences/preferences.reducer.ts","./src/app/store/preferences/preferences.selectors.ts","./src/app/store/products/index.ts","./src/app/store/products/products.actions.ts","./src/app/store/products/products.effects.ts","./src/app/store/products/products.reducer.ts","./src/app/store/products/products.selectors.ts","./src/app/store/recipes/index.ts","./src/app/store/recipes/recipes.actions.ts","./src/app/store/recipes/recipes.reducer.ts","./src/app/store/recipes/recipes.selectors.ts","./src/app/store/settings/index.ts","./src/app/store/settings/settings.actions.ts","./src/app/store/settings/settings.reducer.ts","./src/app/store/settings/settings.selectors.ts","./src/app/store/storage.reducer.ts","./src/app/utilities/browser.utility.ts","./src/app/utilities/export.utility.ts","./src/app/utilities/index.ts","./src/app/utilities/rate.utility.ts","./src/app/utilities/recipe.utility.ts","./src/app/utilities/simplex.utility.ts","./src/app/utilities/store.utility.ts","./src/app/vendor.module.ts","./src/data/index.ts","./src/environments/environment.ts","./src/environments/index.ts","./src/main.ts","ignored|C:\\Users\\erikb\\OneDrive\\Documents\\GitHub Repositories\\foxholelab\\node_modules\\glpk-wasm\\dist|crypto","ignored|C:\\Users\\erikb\\OneDrive\\Documents\\GitHub Repositories\\foxholelab\\node_modules\\glpk-wasm\\dist|fs","ignored|C:\\Users\\erikb\\OneDrive\\Documents\\GitHub Repositories\\foxholelab\\node_modules\\glpk-wasm\\dist|path"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { PreloadAllModules, RouterModule, Routes } from '@angular/router';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: 'list',\r\n    loadChildren: () =>\r\n      import('./routes/list/list.module').then((m) => m.ListModule),\r\n  },\r\n  {\r\n    path: 'flow',\r\n    loadChildren: () =>\r\n      import('./routes/flow/flow.module').then((m) => m.FlowModule),\r\n  },\r\n  {\r\n    path: 'matrix',\r\n    loadChildren: () =>\r\n      import('./routes/matrix/matrix.module').then((m) => m.MatrixModule),\r\n  },\r\n  {\r\n    path: 'factorio',\r\n    redirectTo: '/list?s=&v=4',\r\n  },\r\n  {\r\n    path: 'coi',\r\n    redirectTo: '/list?s=coi&v=4',\r\n  },\r\n  {\r\n    path: 'dsp',\r\n    redirectTo: '/list?s=dsp&v=4',\r\n  },\r\n  {\r\n    path: 'satisfactory',\r\n    redirectTo: '/list?s=sfy&v=4',\r\n  },\r\n  {\r\n    path: 'foxhole',\r\n    redirectTo: '/list?s=fox&v=4',\r\n  },\r\n  {\r\n    path: '**',\r\n    redirectTo: 'list',\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    RouterModule.forRoot(routes, { preloadingStrategy: PreloadAllModules }),\r\n  ],\r\n  exports: [RouterModule],\r\n})\r\nexport class AppRoutingModule {}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { components } from './components';\r\nimport { directives } from './directives';\r\nimport { pipes } from './pipes';\r\nimport { RatePipe } from './pipes/rate.pipe';\r\nimport { VendorModule } from './vendor.module';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, FormsModule, ReactiveFormsModule, VendorModule],\r\n  declarations: [...components, ...directives, ...pipes],\r\n  exports: [\r\n    VendorModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    ...components,\r\n    ...directives,\r\n    ...pipes,\r\n  ],\r\n  providers: [RatePipe],\r\n})\r\nexport class AppSharedModule {}\r\n","import {\r\n  AfterViewInit,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  NgZone,\r\n  OnInit,\r\n} from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Store } from '@ngrx/store';\r\nimport { MenuItem } from 'primeng/api';\r\nimport { combineLatest, first, map } from 'rxjs';\r\n\r\nimport { environment } from 'src/environments';\r\nimport {\r\n  APP,\r\n  Game,\r\n  gameInfo,\r\n  ItemId,\r\n  MatrixResultType,\r\n  SimplexType,\r\n} from './models';\r\nimport {\r\n  ContentService,\r\n  ErrorService,\r\n  RouterService,\r\n  StateService,\r\n  ThemeService,\r\n} from './services';\r\nimport { App, LabState, Preferences, Products, Settings } from './store';\r\n\r\n@Component({\r\n  selector: 'lab-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss'],\r\n})\r\nexport class AppComponent implements OnInit, AfterViewInit {\r\n  vm$ = combineLatest([\r\n    this.store.select(Settings.getGame),\r\n    this.store.select(Settings.getMod),\r\n    this.store.select(Products.getMatrixResult),\r\n    this.contentSvc.settingsActive$,\r\n    this.contentSvc.settingsXlHidden$,\r\n    this.contentSvc.scrollTop$,\r\n    this.errorSvc.message$,\r\n  ]).pipe(\r\n    map(\r\n      ([\r\n        game,\r\n        mod,\r\n        result,\r\n        settingsActive,\r\n        settingsXlHidden,\r\n        scrollTop,\r\n        errorMsg,\r\n      ]) => ({\r\n        game,\r\n        mod,\r\n        result,\r\n        settingsActive,\r\n        settingsXlHidden,\r\n        scrollTop,\r\n        errorMsg,\r\n      })\r\n    )\r\n  );\r\n\r\n  version = `${APP} ${environment.version}`;\r\n  isResetting = false;\r\n  showSimplexErr = false;\r\n  isFixingSimplex = false;\r\n  simplexErrSub = this.store\r\n    .select(Products.getMatrixResult)\r\n    .subscribe(\r\n      (result) =>\r\n        (this.showSimplexErr = result.resultType === MatrixResultType.Failed)\r\n    );\r\n  tabItems: MenuItem[] = [\r\n    {\r\n      label: 'app.list',\r\n      icon: 'fa-solid fa-list',\r\n      routerLink: 'list',\r\n      queryParamsHandling: 'preserve',\r\n    },\r\n    {\r\n      label: 'app.flow',\r\n      icon: 'fa-solid fa-diagram-project',\r\n      routerLink: 'flow',\r\n      queryParamsHandling: 'preserve',\r\n    },\r\n    {\r\n      label: 'app.matrix',\r\n      icon: 'fa-solid fa-table-cells',\r\n      routerLink: 'matrix',\r\n      queryParamsHandling: 'preserve',\r\n    },\r\n  ];\r\n\r\n  Game = Game;\r\n  ItemId = ItemId;\r\n  MatrixResultType = MatrixResultType;\r\n\r\n  constructor(\r\n    public contentSvc: ContentService,\r\n    private ngZone: NgZone,\r\n    private ref: ChangeDetectorRef,\r\n    private router: Router,\r\n    private store: Store<LabState>,\r\n    private errorSvc: ErrorService,\r\n    private routerSvc: RouterService,\r\n    private stateSvc: StateService,\r\n    private themeSvc: ThemeService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.stateSvc.initialize();\r\n    this.themeSvc.initialize();\r\n    this.routerSvc.initialize();\r\n  }\r\n\r\n  /**\r\n   * This doesn't seem like it should be necessary,\r\n   * but error message sometimes does not render without it\r\n   * */\r\n  ngAfterViewInit(): void {\r\n    this.errorSvc.message$.subscribe(() => this.ref.detectChanges());\r\n  }\r\n\r\n  tryFixSimplex(): void {\r\n    this.isFixingSimplex = true;\r\n    // Give button loading indicator a chance to start\r\n    setTimeout(() => {\r\n      this.store\r\n        .select(Settings.getDefaults)\r\n        .pipe(first())\r\n        .subscribe((def) => {\r\n          this.store.dispatch(\r\n            new Preferences.SetSimplexTypeAction(SimplexType.WasmFloat64)\r\n          );\r\n          this.store.dispatch(\r\n            new Settings.SetDisabledRecipesAction({\r\n              value: [],\r\n              def: def?.disabledRecipeIds,\r\n            })\r\n          );\r\n          this.showSimplexErr = false;\r\n          this.isFixingSimplex = false;\r\n        });\r\n    }, 10);\r\n  }\r\n\r\n  reset(game: Game): void {\r\n    this.isResetting = true;\r\n    // Give button loading indicator a chance to start\r\n    setTimeout(() => {\r\n      this.ngZone.run(() => {\r\n        this.errorSvc.message$.next(null);\r\n        this.router.navigateByUrl(gameInfo[game].route);\r\n        this.store.dispatch(new App.ResetAction());\r\n        this.isResetting = false;\r\n      });\r\n    }, 10);\r\n  }\r\n}\r\n","<ng-container *ngIf=\"vm$ | async as vm\">\r\n  <lab-header\r\n    [sticky]=\"vm.scrollTop > 16\"\r\n    [settingsXlHidden]=\"vm.settingsXlHidden\"\r\n  ></lab-header>\r\n\r\n  <ng-container *ngIf=\"vm.errorMsg == null; else errorDialog\">\r\n    <lab-settings\r\n      [active]=\"vm.settingsActive\"\r\n      [hidden]=\"vm.settingsXlHidden\"\r\n    ></lab-settings>\r\n    <div\r\n      class=\"layout-mask\"\r\n      [class.active]=\"vm.settingsActive\"\r\n      (click)=\"contentSvc.toggleSettings()\"\r\n    ></div>\r\n    <div\r\n      class=\"layout-content\"\r\n      [class.settings-xl-hidden]=\"vm.settingsXlHidden\"\r\n    >\r\n      <main class=\"px-1 px-sm-4 py-4\">\r\n        <ng-container *ngIf=\"vm.mod != null; else loading\">\r\n          <lab-products></lab-products>\r\n\r\n          <p-card styleClass=\"mt-4\" [header]=\"'app.factory' | translate\">\r\n            <p-tabMenu [model]=\"tabItems\">\r\n              <ng-template pTemplate=\"item\" let-item>\r\n                <span class=\"p-menuitem-icon\" [class]=\"item.icon\"></span>\r\n                <span class=\"p-menuitem-text\">{{\r\n                  item.label | translate\r\n                }}</span>\r\n              </ng-template>\r\n            </p-tabMenu>\r\n            <router-outlet></router-outlet>\r\n            <ng-template pTemplate=\"footer\">\r\n              <div class=\"d-flex align-items-center justify-content-between\">\r\n                <ng-container\r\n                  *ngIf=\"\r\n                    vm.result.resultType === MatrixResultType.Solved ||\r\n                      vm.result.resultType === MatrixResultType.Cached;\r\n                    else notSolved\r\n                  \"\r\n                >\r\n                  <div *ngIf=\"vm.result.A && vm.result.O\">\r\n                    <div>\r\n                      {{\r\n                        'app.simplexSolved'\r\n                          | translate\r\n                            : {\r\n                                resultType: vm.result.resultType.toLowerCase(),\r\n                                time: vm.result.time,\r\n                                pivots: vm.result.pivots,\r\n                                rows: vm.result.A.length,\r\n                                cols: vm.result.A[0].length,\r\n                                cost: vm.result.O[\r\n                                  vm.result.O.length - 1\r\n                                ].toPrecision(2)\r\n                              }\r\n                      }}\r\n                    </div>\r\n                  </div>\r\n                </ng-container>\r\n                <ng-template #notSolved>\r\n                  <span>{{\r\n                    'app.simplexUnsolved'\r\n                      | translate\r\n                        : { resultType: vm.result.resultType.toLowerCase() }\r\n                  }}</span>\r\n                </ng-template>\r\n                <span>{{ version }}</span>\r\n              </div>\r\n            </ng-template>\r\n          </p-card>\r\n        </ng-container>\r\n        <ng-template #loading>\r\n          <div class=\"d-flex flex-column align-items-center mt-5\">\r\n            <p-progressSpinner></p-progressSpinner>\r\n          </div>\r\n        </ng-template>\r\n        <p-dialog\r\n          [(visible)]=\"showSimplexErr\"\r\n          [modal]=\"true\"\r\n          [draggable]=\"false\"\r\n          [resizable]=\"false\"\r\n          [style]=\"{ width: '576px' }\"\r\n          [breakpoints]=\"{ '576px': '100%' }\"\r\n        >\r\n          <ng-template pTemplate=\"header\">\r\n            <div class=\"p-dialog-title\">\r\n              <i class=\"fa-solid fa-triangle-exclamation me-2\"></i>\r\n              <span>{{ 'app.simplexError' | translate }}</span>\r\n            </div>\r\n          </ng-template>\r\n          <div>\r\n            <div [innerText]=\"'app.simplexErrorDetail' | translate\"></div>\r\n            <div class=\"text-end mt-2\">\r\n              <button\r\n                pButton\r\n                pRipple\r\n                type=\"button\"\r\n                class=\"mt-2 p-button-outlined\"\r\n                [label]=\"'app.dontShowAgain' | translate\"\r\n                (click)=\"showSimplexErr = false; simplexErrSub.unsubscribe()\"\r\n              ></button>\r\n              <button\r\n                pButton\r\n                pRipple\r\n                type=\"button\"\r\n                class=\"mt-2 ms-2 p-button-outlined\"\r\n                [label]=\"'app.trySuggestedFix' | translate\"\r\n                [loading]=\"isFixingSimplex\"\r\n                (click)=\"tryFixSimplex()\"\r\n              ></button>\r\n              <button\r\n                pButton\r\n                pRipple\r\n                type=\"button\"\r\n                class=\"mt-2 ms-2\"\r\n                [label]=\"'ok' | translate\"\r\n                (click)=\"showSimplexErr = false\"\r\n              ></button>\r\n            </div>\r\n          </div>\r\n        </p-dialog>\r\n      </main>\r\n    </div>\r\n  </ng-container>\r\n\r\n  <ng-template #errorDialog>\r\n    <p-dialog\r\n      [visible]=\"true\"\r\n      [modal]=\"true\"\r\n      [draggable]=\"false\"\r\n      [resizable]=\"false\"\r\n      [closable]=\"false\"\r\n      [closeOnEscape]=\"false\"\r\n    >\r\n      <ng-template pTemplate=\"header\">\r\n        <div class=\"p-dialog-title p-error\">\r\n          <i class=\"fa-solid fa-circle-exclamation me-2\"></i>\r\n          <span>{{ 'app.error' | translate }}</span>\r\n        </div>\r\n      </ng-template>\r\n      <div class=\"p-error\">\r\n        <div>{{ 'app.errorDetail' | translate }}</div>\r\n        <div class=\"mt-4\">{{ vm.errorMsg }}</div>\r\n        <div class=\"text-end mt-4\">\r\n          <button\r\n            pButton\r\n            pRipple\r\n            type=\"button\"\r\n            [label]=\"'app.reset' | translate\"\r\n            [loading]=\"isResetting\"\r\n            (click)=\"reset(vm.game)\"\r\n          ></button>\r\n        </div>\r\n      </div>\r\n    </p-dialog>\r\n  </ng-template>\r\n</ng-container>\r\n\r\n<lab-content></lab-content>\r\n","import { APP_BASE_HREF } from '@angular/common';\r\nimport { HttpClient, HttpClientModule } from '@angular/common/http';\r\nimport { APP_INITIALIZER, ErrorHandler, NgModule } from '@angular/core';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { ServiceWorkerModule } from '@angular/service-worker';\r\nimport { EffectsModule } from '@ngrx/effects';\r\nimport { StoreModule } from '@ngrx/store';\r\nimport { StoreDevtoolsModule } from '@ngrx/store-devtools';\r\nimport {\r\n  TranslateLoader,\r\n  TranslateModule,\r\n  TranslateService,\r\n} from '@ngx-translate/core';\r\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\r\nimport { loadModule } from 'glpk-ts';\r\nimport {\r\n  NgxGoogleAnalyticsModule,\r\n  NgxGoogleAnalyticsRouterModule,\r\n} from 'ngx-google-analytics';\r\nimport { PrimeNGConfig } from 'primeng/api';\r\n\r\nimport { environment } from '../environments/environment';\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppSharedModule } from './app-shared.module';\r\nimport { AppComponent } from './app.component';\r\nimport { LabErrorHandler } from './services';\r\nimport { ThemeService } from './services/theme.service';\r\nimport { metaReducers, reducers } from './store';\r\nimport { AnalyticsEffects } from './store/analytics.effects';\r\nimport { DatasetsEffects } from './store/datasets/datasets.effects';\r\nimport { FactoriesEffects } from './store/factories/factories.effects';\r\nimport { ProductsEffects } from './store/products/products.effects';\r\n\r\nfunction initializeApp(\r\n  primengConfig: PrimeNGConfig,\r\n  translateSvc: TranslateService\r\n): () => Promise<any> {\r\n  return () => {\r\n    // Enable ripple\r\n    primengConfig.ripple = true;\r\n\r\n    // Set up initial theme\r\n    ThemeService.appInitTheme();\r\n\r\n    // Initialize translate service with default to English\r\n    translateSvc.setDefaultLang('en');\r\n\r\n    // Load glpk-wasm\r\n    return loadModule('assets/glpk-wasm/glpk.all.wasm');\r\n  };\r\n}\r\n\r\n@NgModule({\r\n  declarations: [AppComponent],\r\n  imports: [\r\n    /** Angular modules */\r\n    BrowserModule,\r\n    BrowserAnimationsModule,\r\n    HttpClientModule,\r\n    /** Vendor modules */\r\n    StoreModule.forRoot(reducers, { metaReducers }),\r\n    StoreDevtoolsModule.instrument({\r\n      logOnly: environment.production,\r\n    }),\r\n    EffectsModule.forRoot([\r\n      DatasetsEffects,\r\n      ProductsEffects,\r\n      FactoriesEffects,\r\n      AnalyticsEffects,\r\n    ]),\r\n    TranslateModule.forRoot({\r\n      loader: {\r\n        provide: TranslateLoader,\r\n        useFactory: (http: HttpClient) => {\r\n          return new TranslateHttpLoader(http, './assets/i18n/', '.json');\r\n        },\r\n        deps: [HttpClient],\r\n      },\r\n      defaultLanguage: 'en',\r\n    }),\r\n    NgxGoogleAnalyticsModule.forRoot('G-TFR5Z43GPH'),\r\n    NgxGoogleAnalyticsRouterModule,\r\n    /** App modules */\r\n    AppRoutingModule,\r\n    AppSharedModule,\r\n    ServiceWorkerModule.register('ngsw-worker.js', {\r\n      enabled: environment.production,\r\n      // Register the ServiceWorker as soon as the application is stable\r\n      // or after 30 seconds (whichever comes first).\r\n      registrationStrategy: 'registerWhenStable:30000',\r\n    }),\r\n  ],\r\n  providers: [\r\n    { provide: APP_BASE_HREF, useValue: environment.baseHref },\r\n    { provide: ErrorHandler, useClass: LabErrorHandler },\r\n    {\r\n      provide: APP_INITIALIZER,\r\n      deps: [PrimeNGConfig, TranslateService],\r\n      useFactory: initializeApp,\r\n      multi: true,\r\n    },\r\n  ],\r\n  bootstrap: [AppComponent],\r\n})\r\nexport class AppModule {}\r\n","import {\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  OnInit,\r\n} from '@angular/core';\r\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\r\nimport { Store } from '@ngrx/store';\r\nimport { combineLatest, map, tap } from 'rxjs';\r\n\r\nimport { Column, precisionColumns } from '~/models';\r\nimport { ContentService } from '~/services';\r\nimport { LabState, Preferences, Settings } from '~/store';\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'lab-columns-dialog',\r\n  templateUrl: './columns-dialog.component.html',\r\n  styleUrls: ['./columns-dialog.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class ColumnsDialogComponent implements OnInit {\r\n  vm$ = combineLatest([\r\n    this.store\r\n      .select(Settings.getColumnsState)\r\n      .pipe(tap((columns) => this.initEdit(columns))),\r\n    this.store.select(Settings.getColumnOptions),\r\n  ]).pipe(map(([columns, columnOptions]) => ({ columns, columnOptions })));\r\n\r\n  visible = false;\r\n  editValue: Preferences.ColumnsState = {};\r\n  precisionColumns = precisionColumns;\r\n\r\n  constructor(\r\n    private ref: ChangeDetectorRef,\r\n    private store: Store<LabState>,\r\n    private contentSvc: ContentService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.contentSvc.showColumns$.pipe(untilDestroyed(this)).subscribe(() => {\r\n      this.visible = true;\r\n      this.ref.markForCheck();\r\n    });\r\n  }\r\n\r\n  initEdit(columns: Preferences.ColumnsState): void {\r\n    this.editValue = Object.keys(columns).reduce(\r\n      (e: Preferences.ColumnsState, c) => {\r\n        e[c] = { ...columns[c] };\r\n        return e;\r\n      },\r\n      {}\r\n    );\r\n  }\r\n\r\n  changeFraction(value: boolean, column: Column): void {\r\n    this.editValue[column].precision = value ? null : 1;\r\n  }\r\n\r\n  save(): void {\r\n    this.store.dispatch(new Preferences.SetColumnsAction(this.editValue));\r\n  }\r\n}\r\n","<p-dialog\r\n  *ngIf=\"vm$ | async as vm\"\r\n  [(visible)]=\"visible\"\r\n  [modal]=\"true\"\r\n  [dismissableMask]=\"true\"\r\n  [draggable]=\"false\"\r\n  [resizable]=\"false\"\r\n  [style]=\"{ width: '400px' }\"\r\n  [breakpoints]=\"{ '400px': '100vw' }\"\r\n  [header]=\"'columns.header' | translate\"\r\n  (onHide)=\"save()\"\r\n>\r\n  <p-table\r\n    responsiveLayout=\"scroll\"\r\n    styleClass=\"p-datatable-sm\"\r\n    [value]=\"vm.columnOptions\"\r\n  >\r\n    <ng-template pTemplate=\"header\">\r\n      <tr>\r\n        <th>{{ 'columns.visibility' | translate }}</th>\r\n        <th>{{ 'columns.decimals' | translate }}</th>\r\n        <th>{{ 'columns.fractions' | translate }}</th>\r\n        <th>{{ 'columns.example' | translate }}</th>\r\n      </tr>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"body\" let-column>\r\n      <tr>\r\n        <td>\r\n          <p-checkbox\r\n            [(ngModel)]=\"editValue[column.value].show\"\r\n            [binary]=\"true\"\r\n            [label]=\"column.label\"\r\n            [disabled]=\"column.disabled\"\r\n          ></p-checkbox>\r\n        </td>\r\n        <ng-container\r\n          *ngIf=\"\r\n            precisionColumns.indexOf(column.value) !== -1;\r\n            else noPrecision\r\n          \"\r\n        >\r\n          <td>\r\n            <p-inputNumber\r\n              [min]=\"0\"\r\n              [size]=\"1\"\r\n              [showButtons]=\"true\"\r\n              class=\"w-100\"\r\n              styleClass=\"w-100\"\r\n              [disabled]=\"!editValue[column.value].show\"\r\n              [(ngModel)]=\"editValue[column.value].precision\"\r\n            ></p-inputNumber>\r\n          </td>\r\n          <td class=\"text-center\">\r\n            <p-checkbox\r\n              [ngModel]=\"editValue[column.value].precision == null\"\r\n              [binary]=\"true\"\r\n              [disabled]=\"!editValue[column.value].show\"\r\n              (onChange)=\"changeFraction($event.checked, column.value)\"\r\n            ></p-checkbox>\r\n          </td>\r\n          <td>\r\n            {{ editValue[column.value].precision | precisionExample }}\r\n          </td>\r\n        </ng-container>\r\n        <ng-template #noPrecision>\r\n          <td colspan=\"3\" class=\"text-center colspan-3\">\r\n            <div class=\"p-2\">{{ 'columns.notApplicable' | translate }}</div>\r\n          </td>\r\n        </ng-template>\r\n      </tr>\r\n    </ng-template>\r\n  </p-table>\r\n  <ng-template pTemplate=\"footer\">\r\n    <button\r\n      pButton\r\n      pRipple\r\n      type=\"button\"\r\n      class=\"p-button-text\"\r\n      icon=\"fa-solid fa-check\"\r\n      [label]=\"'ok' | translate\"\r\n      (click)=\"visible = false\"\r\n    ></button>\r\n  </ng-template>\r\n</p-dialog>\r\n","import {\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  OnInit,\r\n  TemplateRef,\r\n  ViewChild,\r\n} from '@angular/core';\r\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\r\nimport { ConfirmationService } from 'primeng/api';\r\n\r\nimport { ContentService } from '~/services';\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'lab-content',\r\n  templateUrl: './content.component.html',\r\n  styleUrls: ['./content.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  providers: [ConfirmationService],\r\n})\r\nexport class ContentComponent implements OnInit, AfterViewInit {\r\n  @ViewChild('translateSelectedItem') translateSelectedItem:\r\n    | TemplateRef<any>\r\n    | undefined;\r\n  @ViewChild('translateItem') translateItem: TemplateRef<any> | undefined;\r\n\r\n  constructor(\r\n    private confirmationSvc: ConfirmationService,\r\n    private contentSvc: ContentService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.contentSvc.showConfirm$\r\n      .pipe(untilDestroyed(this))\r\n      .subscribe((c) => this.confirmationSvc.confirm(c));\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.contentSvc.translateSelectedItem$.next(this.translateSelectedItem);\r\n    this.contentSvc.translateItem$.next(this.translateItem);\r\n  }\r\n}\r\n","<p-confirmDialog></p-confirmDialog>\r\n<lab-columns-dialog></lab-columns-dialog>\r\n<!-- Force InputNumber styles to load for lab-input-number -->\r\n<p-inputNumber styleClass=\"d-none\"></p-inputNumber>\r\n\r\n<ng-template #translateSelectedItem pTemplate=\"selectedItem\" let-item>\r\n  {{ item.label | translate }}\r\n</ng-template>\r\n<ng-template #translateItem pTemplate=\"item\" let-item>\r\n  {{ item.label | translate }}\r\n</ng-template>\r\n","import {\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  HostBinding,\r\n  Input,\r\n  OnInit,\r\n} from '@angular/core';\r\nimport { Title } from '@angular/platform-browser';\r\nimport { Router } from '@angular/router';\r\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\r\nimport { Store } from '@ngrx/store';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { MenuItem } from 'primeng/api';\r\nimport { combineLatest, map } from 'rxjs';\r\n\r\nimport { APP, Game, gameInfo, games } from '~/models';\r\nimport { ContentService } from '~/services';\r\nimport { LabState, Products, Settings } from '~/store';\r\n\r\ninterface MenuLink {\r\n  label: string;\r\n  icon: string;\r\n  href: string;\r\n}\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'lab-header',\r\n  templateUrl: './header.component.html',\r\n  styleUrls: ['./header.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class HeaderComponent implements OnInit {\r\n  @HostBinding('class.sticky') @Input() sticky = false;\r\n  @HostBinding('class.settings-xl-hidden') @Input() settingsXlHidden = false;\r\n\r\n  vm$ = combineLatest([\r\n    this.store.select(Settings.getGame),\r\n    this.contentSvc.settingsXlHidden$,\r\n  ]).pipe(\r\n    map(([game, settingsXlHidden]) => ({\r\n      gameInfo: gameInfo[game],\r\n      gameOptions: this.buildGameOptions(game),\r\n      settingsXlHidden,\r\n    }))\r\n  );\r\n\r\n  links: MenuLink[] = [\r\n    {\r\n      label: 'Wiki',\r\n      icon: 'fa-solid fa-book',\r\n      href: 'https://github.com/factoriolab/factoriolab/wiki',\r\n    },\r\n    {\r\n      label: 'Source',\r\n      icon: 'fa-brands fa-github',\r\n      href: 'https://github.com/factoriolab/factoriolab',\r\n    },\r\n    {\r\n      label: 'Discord',\r\n      icon: 'fa-brands fa-discord',\r\n      href: 'https://discord.gg/N4FKV687x2',\r\n    },\r\n    {\r\n      label: 'Support',\r\n      icon: 'fa-solid fa-mug-hot',\r\n      href: 'https://ko-fi.com/dcbroad3',\r\n    },\r\n  ];\r\n\r\n  constructor(\r\n    public contentSvc: ContentService,\r\n    private router: Router,\r\n    private title: Title,\r\n    private store: Store<LabState>,\r\n    private translateSvc: TranslateService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    combineLatest([\r\n      this.store.select(Products.getBaseProducts),\r\n      this.store.select(Settings.getDataset),\r\n      this.contentSvc.lang$,\r\n    ])\r\n      .pipe(untilDestroyed(this))\r\n      .subscribe(([products, data]) => {\r\n        const title = this.translateSvc.instant(gameInfo[data.game].title);\r\n        if (products.length && data.itemEntities[products[0].itemId]) {\r\n          this.title.setTitle(\r\n            `${data.itemEntities[products[0].itemId].name} | ${title}`\r\n          );\r\n        } else {\r\n          this.title.setTitle(`${APP} | ${title}`);\r\n        }\r\n      });\r\n  }\r\n\r\n  buildGameOptions(game: Game): MenuItem[] {\r\n    return games\r\n      .filter((g) => g !== game)\r\n      .map(\r\n        (g): MenuItem => ({\r\n          icon: 'lab-icon-sm ' + gameInfo[g].icon,\r\n          label: this.translateSvc.instant(gameInfo[g].label),\r\n          command: () => this.selectGame(gameInfo[g].route),\r\n        })\r\n      );\r\n  }\r\n\r\n  selectGame(route: string): void {\r\n    this.router.navigateByUrl(route);\r\n  }\r\n}\r\n","<ng-container *ngIf=\"vm$ | async as vm\">\r\n  <button\r\n    *ngIf=\"vm.settingsXlHidden\"\r\n    pButton\r\n    pRipple\r\n    type=\"button\"\r\n    class=\"d-inline-flex d-none d-xl-flex p-button-lg settings-button me-3\"\r\n    icon=\"fa-solid fa-bars\"\r\n    (click)=\"contentSvc.toggleSettingsXl()\"\r\n  ></button\r\n  ><button\r\n    pButton\r\n    pRipple\r\n    type=\"button\"\r\n    class=\"d-inline-flex d-xl-none p-button-lg settings-button\"\r\n    icon=\"fa-solid fa-bars\"\r\n    (click)=\"contentSvc.toggleSettings()\"\r\n  ></button>\r\n  <p-splitButton\r\n    styleClass=\"p-button-lg\"\r\n    [icon]=\"vm.gameInfo.icon | iconSmClass\"\r\n    [model]=\"vm.gameOptions\"\r\n    (onClick)=\"selectGame(vm.gameInfo.route)\"\r\n  >\r\n  </p-splitButton>\r\n  <ul class=\"header-menu mb-1 mb-xl-0 px-0 px-sm-4 px-xl-0\">\r\n    <li *ngFor=\"let link of links\">\r\n      <a class=\"w-100\" target=\"_blank\" [href]=\"link.href\">\r\n        <button\r\n          pButton\r\n          pRipple\r\n          type=\"button\"\r\n          class=\"p-button-text p-button-secondary p-button-sm d-flex justify-content-center w-100\"\r\n          [icon]=\"link.icon\"\r\n          [label]=\"link.label\"\r\n        ></button>\r\n      </a>\r\n    </li>\r\n  </ul>\r\n</ng-container>\r\n","import {\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  EventEmitter,\r\n  HostBinding,\r\n  Input,\r\n  OnChanges,\r\n  Output,\r\n  SimpleChanges,\r\n} from '@angular/core';\r\n\r\nimport { Rational } from '~/models';\r\n\r\n@Component({\r\n  selector: 'lab-input-number',\r\n  templateUrl: './input-number.component.html',\r\n  styleUrls: ['./input-number.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class InputNumberComponent implements OnChanges {\r\n  @Input() value = '';\r\n  @Input() minimum = '0';\r\n  @Input() width = '';\r\n  @Input() inputId = 'inputnumber';\r\n  @Input() hideButtons = false;\r\n\r\n  @Output() setValue = new EventEmitter<string>();\r\n\r\n  @HostBinding('class') classAttr = 'p-element p-inputwrapper';\r\n\r\n  isMinimum = false;\r\n  min = Rational.zero;\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes['minimum']) {\r\n      this.min = Rational.fromString(this.minimum);\r\n    }\r\n    if (changes['value'] || changes['minimum']) {\r\n      try {\r\n        this.isMinimum = Rational.fromString(this.value).lte(this.min);\r\n      } catch {\r\n        this.isMinimum = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  changeValue(value: string): void {\r\n    try {\r\n      const rational = Rational.fromString(value);\r\n      if (rational.gte(this.min)) {\r\n        this.setValue.emit(value);\r\n      }\r\n    } catch {}\r\n  }\r\n\r\n  increase(): void {\r\n    try {\r\n      const rational = Rational.fromString(this.value);\r\n      const newValue = rational.isInteger()\r\n        ? rational.add(Rational.one)\r\n        : rational.ceil();\r\n      this.setValue.emit(newValue.toString());\r\n    } catch {}\r\n  }\r\n\r\n  decrease(): void {\r\n    try {\r\n      const rational = Rational.fromString(this.value);\r\n      const newValue = rational.isInteger()\r\n        ? rational.sub(Rational.one)\r\n        : rational.floor();\r\n      if (newValue.gte(this.min)) {\r\n        this.setValue.emit(newValue.toString());\r\n      }\r\n    } catch {}\r\n  }\r\n}\r\n","<span class=\"p-inputnumber p-component p-inputnumber-buttons-stacked\">\r\n  <input\r\n    #input\r\n    pInputText\r\n    [id]=\"inputId\"\r\n    type=\"text\"\r\n    [class.hidden-buttons]=\"hideButtons\"\r\n    [style.width]=\"width\"\r\n    [ngModel]=\"value\"\r\n    labValidateNumber\r\n    [labValidateMinimum]=\"minimum\"\r\n    (blur)=\"changeValue(input.value)\"\r\n  />\r\n  <span *ngIf=\"!hideButtons\" class=\"p-inputnumber-button-group\">\r\n    <button\r\n      pButton\r\n      pRipple\r\n      type=\"button\"\r\n      class=\"p-inputnumber-button p-inputnumber-button-up\"\r\n      icon=\"fa-solid fa-angle-up\"\r\n      (click)=\"increase()\"\r\n    ></button>\r\n    <button\r\n      pButton\r\n      pRipple\r\n      type=\"button\"\r\n      class=\"p-inputnumber-button p-inputnumber-button-down\"\r\n      icon=\"fa-solid fa-angle-down\"\r\n      [disabled]=\"isMinimum\"\r\n      (click)=\"decrease()\"\r\n    ></button>\r\n  </span>\r\n</span>\r\n","import {\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  OnInit,\r\n  Output,\r\n  ViewChild,\r\n} from '@angular/core';\r\nimport { FormControl } from '@angular/forms';\r\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\r\nimport { Store } from '@ngrx/store';\r\nimport { FilterService, SelectItem } from 'primeng/api';\r\nimport { combineLatest, map } from 'rxjs';\r\n\r\nimport { Category, Dataset, Entities } from '~/models';\r\nimport { LabState } from '~/store';\r\nimport * as Recipes from '~/store/recipes';\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'lab-picker',\r\n  templateUrl: './picker.component.html',\r\n  styleUrls: ['./picker.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class PickerComponent implements OnInit {\r\n  @ViewChild('inputFilter') inputFilter:\r\n    | ElementRef<HTMLInputElement>\r\n    | undefined;\r\n\r\n  @Output() selectId = new EventEmitter<string>();\r\n\r\n  vm$ = this.store\r\n    .select(Recipes.getAdjustedDataset)\r\n    .pipe(map((data) => ({ data })));\r\n\r\n  searchCtrl = new FormControl('');\r\n\r\n  visible = false;\r\n  selectedId: string | undefined;\r\n  categoryEntities: Entities<Category> = {};\r\n  categoryIds: string[] = [];\r\n  categoryItemRows: Entities<string[][]> = {};\r\n  activeIndex = 0;\r\n\r\n  constructor(\r\n    private ref: ChangeDetectorRef,\r\n    private filterService: FilterService,\r\n    private store: Store<LabState>\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    combineLatest([\r\n      this.store.select(Recipes.getAdjustedDataset),\r\n      this.searchCtrl.valueChanges,\r\n    ])\r\n      .pipe(untilDestroyed(this))\r\n      .subscribe(([data, search]) => {\r\n        this.inputSearch(data, search);\r\n      });\r\n  }\r\n\r\n  clickOpen(data: Dataset, selectedId?: string): void {\r\n    this.selectedId = selectedId;\r\n    this.searchCtrl.setValue('');\r\n    // Wait for input field to appear before attempting to focus\r\n    setTimeout(() => {\r\n      this.inputFilter?.nativeElement.focus();\r\n    });\r\n    this.categoryEntities = data.categoryEntities;\r\n    this.categoryIds = data.categoryIds;\r\n    this.categoryItemRows = data.categoryItemRows;\r\n    if (this.selectedId) {\r\n      const index = data.categoryIds.indexOf(\r\n        data.itemEntities[this.selectedId].category\r\n      );\r\n      this.activeIndex = index;\r\n    }\r\n    this.visible = true;\r\n    this.ref.markForCheck();\r\n  }\r\n\r\n  clickItem(itemId: string): void {\r\n    this.selectId.emit(itemId);\r\n    this.visible = false;\r\n  }\r\n\r\n  inputSearch(data: Dataset, search: string | null): void {\r\n    if (!search) {\r\n      this.categoryIds = data.categoryIds;\r\n      this.categoryItemRows = data.categoryItemRows;\r\n      return;\r\n    }\r\n\r\n    // Filter for matching item ids\r\n    const selectItems = data.itemIds.map(\r\n      (i): SelectItem => ({ label: data.itemEntities[i].name, value: i })\r\n    );\r\n    const filteredItems = this.filterService.filter(\r\n      selectItems,\r\n      ['label'],\r\n      search,\r\n      'contains'\r\n    );\r\n    const itemIds = filteredItems.map((i) => i.value);\r\n\r\n    // Filter for matching category ids\r\n    this.categoryIds = data.categoryIds.filter((c) =>\r\n      itemIds.some((i) => data.itemEntities[i].category === c)\r\n    );\r\n\r\n    // Filter category item rows\r\n    this.categoryItemRows = {};\r\n    for (const c of this.categoryIds) {\r\n      // Filter each category item row\r\n      this.categoryItemRows[c] = [];\r\n      for (const r of data.categoryItemRows[c]) {\r\n        this.categoryItemRows[c].push(\r\n          r.filter((i) => itemIds.indexOf(i) !== -1)\r\n        );\r\n      }\r\n      // Filter out empty category item rows\r\n      this.categoryItemRows[c] = this.categoryItemRows[c].filter(\r\n        (r) => r.length > 0\r\n      );\r\n    }\r\n  }\r\n}\r\n","<p-dialog\r\n  *ngIf=\"vm$ | async as vm\"\r\n  styleClass=\"picker-dialog\"\r\n  [(visible)]=\"visible\"\r\n  [modal]=\"true\"\r\n  [dismissableMask]=\"true\"\r\n  [draggable]=\"false\"\r\n  [resizable]=\"false\"\r\n  appendTo=\"body\"\r\n  [style]=\"{ height: '500px', width: '400px' }\"\r\n  [breakpoints]=\"{ '458px': '100vw' }\"\r\n>\r\n  <ng-template pTemplate=\"header\">\r\n    <span class=\"w-100 me-3 p-input-icon-right\">\r\n      <i class=\"fa-solid fa-magnifying-glass\"></i>\r\n      <input\r\n        #inputFilter\r\n        pInputText\r\n        type=\"text\"\r\n        class=\"w-100\"\r\n        [pAutoFocus]=\"true\"\r\n        [formControl]=\"searchCtrl\"\r\n      />\r\n    </span>\r\n  </ng-template>\r\n  <p-tabView [scrollable]=\"true\" [(activeIndex)]=\"activeIndex\">\r\n    <ng-container *ngFor=\"let id of categoryIds; let i = index\">\r\n      <p-tabPanel\r\n        *ngIf=\"categoryEntities[id] as category\"\r\n        [tooltip]=\"category.name\"\r\n        [selected]=\"i === activeIndex\"\r\n      >\r\n        <ng-template pTemplate=\"header\">\r\n          <i [class]=\"id | iconSmClass: 'category'\"></i>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"content\">\r\n          <div\r\n            *ngFor=\"let itemIds of categoryItemRows[id]\"\r\n            class=\"d-flex flex-wrap\"\r\n          >\r\n            <ng-container *ngFor=\"let itemId of itemIds\">\r\n              <button\r\n                pButton\r\n                pRipple\r\n                type=\"button\"\r\n                class=\"me-1 mb-1\"\r\n                [class.p-button-text]=\"itemId !== selectedId\"\r\n                [icon]=\"itemId | iconSmClass\"\r\n                [pTooltip]=\"itemId | itemTooltip: vm.data\"\r\n                [escape]=\"false\"\r\n                (click)=\"clickItem(itemId)\"\r\n              ></button>\r\n            </ng-container>\r\n          </div>\r\n        </ng-template>\r\n      </p-tabPanel>\r\n    </ng-container>\r\n  </p-tabView>\r\n</p-dialog>\r\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\r\nimport { Store } from '@ngrx/store';\r\nimport { combineLatest, map } from 'rxjs';\r\n\r\nimport { DisplayRate, displayRateOptions, RateType } from '~/models';\r\nimport { TrackService } from '~/services';\r\nimport {\r\n  Factories,\r\n  Items,\r\n  LabState,\r\n  Products,\r\n  Recipes,\r\n  Settings,\r\n} from '~/store';\r\n\r\n@Component({\r\n  selector: 'lab-products',\r\n  templateUrl: './products.component.html',\r\n  styleUrls: ['./products.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class ProductsComponent {\r\n  vm$ = combineLatest([\r\n    this.store.select(Products.getProducts),\r\n    this.store.select(Products.getViaOptions),\r\n    this.store.select(Items.getItemSettings),\r\n    this.store.select(Factories.getFactories),\r\n    this.store.select(Recipes.getRecipeSettings),\r\n    this.store.select(Settings.getDisplayRate),\r\n    this.store.select(Settings.getRateTypeOptions),\r\n    this.store.select(Settings.getOptions),\r\n    this.store.select(Settings.getDataset),\r\n  ]).pipe(\r\n    map(\r\n      ([\r\n        products,\r\n        viaOptions,\r\n        itemSettings,\r\n        factories,\r\n        recipeSettings,\r\n        displayRate,\r\n        rateTypeOptions,\r\n        options,\r\n        data,\r\n      ]) => ({\r\n        products,\r\n        viaOptions,\r\n        itemSettings,\r\n        factories,\r\n        recipeSettings,\r\n        displayRate,\r\n        rateTypeOptions,\r\n        options,\r\n        data,\r\n      })\r\n    )\r\n  );\r\n\r\n  displayRateOptions = displayRateOptions;\r\n\r\n  RateType = RateType;\r\n\r\n  constructor(public trackSvc: TrackService, private store: Store<LabState>) {}\r\n\r\n  /** Action Dispatch Methods */\r\n  removeProduct(id: string): void {\r\n    this.store.dispatch(new Products.RemoveAction(id));\r\n  }\r\n\r\n  setItem(id: string, value: string): void {\r\n    this.store.dispatch(new Products.SetItemAction({ id, value }));\r\n  }\r\n\r\n  setRate(id: string, value: string): void {\r\n    this.store.dispatch(new Products.SetRateAction({ id, value }));\r\n  }\r\n\r\n  setRateType(id: string, value: RateType): void {\r\n    this.store.dispatch(new Products.SetRateTypeAction({ id, value }));\r\n  }\r\n\r\n  setVia(id: string, value: string): void {\r\n    this.store.dispatch(new Products.SetViaAction({ id, value }));\r\n  }\r\n\r\n  addProduct(value: string): void {\r\n    this.store.dispatch(new Products.AddAction(value));\r\n  }\r\n\r\n  setDisplayRate(value: DisplayRate, prev: DisplayRate): void {\r\n    this.store.dispatch(new Settings.SetDisplayRateAction({ value, prev }));\r\n  }\r\n}\r\n","<p-card *ngIf=\"vm$ | async as vm\" [header]=\"'products.title' | translate\">\r\n  <div\r\n    *ngFor=\"\r\n      let product of vm.products;\r\n      last as last;\r\n      trackBy: trackSvc.trackById\r\n    \"\r\n    class=\"d-flex align-items-center\"\r\n    [class.mb-3]=\"!last\"\r\n  >\r\n    <div class=\"p-inputgroup\">\r\n      <button\r\n        pButton\r\n        pRipple\r\n        type=\"button\"\r\n        class=\"p-button-outlined icon\"\r\n        icon=\"fa-solid fa-minus\"\r\n        [pTooltip]=\"'products.removeProduct' | translate\"\r\n        (click)=\"removeProduct(product.id)\"\r\n      ></button>\r\n      <!-- Mobile icon item picker -->\r\n      <button\r\n        pButton\r\n        pRipple\r\n        type=\"button\"\r\n        class=\"d-inline-flex d-sm-none text-truncate\"\r\n        [icon]=\"product.itemId | iconSmClass\"\r\n        [pTooltip]=\"'products.changeItem' | translate\"\r\n        (click)=\"editPicker.clickOpen(vm.data, product.itemId)\"\r\n      ></button>\r\n      <!-- Desktop icon-text item picker -->\r\n      <button\r\n        pButton\r\n        pRipple\r\n        type=\"button\"\r\n        class=\"d-none d-sm-inline-flex text-truncate\"\r\n        [icon]=\"product.itemId | iconSmClass\"\r\n        [label]=\"vm.data.itemEntities[product.itemId].name\"\r\n        [pTooltip]=\"'products.changeItem' | translate\"\r\n        tooltipPosition=\"top\"\r\n        (click)=\"editPicker.clickOpen(vm.data, product.itemId)\"\r\n      ></button>\r\n      <lab-picker\r\n        #editPicker\r\n        (selectId)=\"setItem(product.id, $event)\"\r\n      ></lab-picker>\r\n      <span class=\"d-none d-md-block p-inputgroup-addon\">{{\r\n        'products.limitTo' | translate\r\n      }}</span>\r\n      <!-- Mobile number rate picker -->\r\n      <lab-input-number\r\n        class=\"d-inline-flex d-sm-none\"\r\n        [pTooltip]=\"'products.changeRate' | translate\"\r\n        tooltipPosition=\"top\"\r\n        [hideButtons]=\"true\"\r\n        [value]=\"product.rate\"\r\n        (setValue)=\"setRate(product.id, $event)\"\r\n      ></lab-input-number>\r\n      <!-- Desktop number/buttons rate picker -->\r\n      <lab-input-number\r\n        class=\"d-none d-sm-inline-flex\"\r\n        [pTooltip]=\"'products.changeRate' | translate\"\r\n        tooltipPosition=\"top\"\r\n        [value]=\"product.rate\"\r\n        (setValue)=\"setRate(product.id, $event)\"\r\n      ></lab-input-number>\r\n      <p-dropdown\r\n        [tooltip]=\"'products.changeRateType' | translate\"\r\n        tooltipPosition=\"top\"\r\n        [options]=\"vm.rateTypeOptions\"\r\n        [ngModel]=\"product.rateType\"\r\n        (onChange)=\"setRateType(product.id, $event.value)\"\r\n      ></p-dropdown>\r\n      <ng-container\r\n        *ngIf=\"vm.viaOptions[product.id].length > 0; else recipeNone\"\r\n      >\r\n        <ng-container *ngIf=\"product.viaId as id\">\r\n          <ng-container\r\n            *ngIf=\"product.rateType | rateTypeViaDropdown as dropdownType\"\r\n          >\r\n            <!-- Mobile icon via dropdown -->\r\n            <p-dropdown\r\n              labDropdownBase=\"icon\"\r\n              class=\"d-inline-flex d-sm-none icon\"\r\n              [virtualScroll]=\"true\"\r\n              [virtualScrollItemSize]=\"34\"\r\n              [tooltip]=\"'products.changeVia' | translate\"\r\n              tooltipPosition=\"top\"\r\n              [options]=\"vm.viaOptions[product.id]\"\r\n              [ngModel]=\"product.viaId\"\r\n              (onChange)=\"setVia(product.id, $event.value)\"\r\n            >\r\n              <ng-template pTemplate=\"selectedItem\" let-item>\r\n                <div class=\"d-flex\">\r\n                  <i [class]=\"item.value | iconSmClass: dropdownType\"></i>\r\n                </div>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"item\" let-item>\r\n                <div\r\n                  class=\"d-flex align-items-center py-2 w-100 h-100\"\r\n                  [pTooltip]=\"\r\n                    dropdownType === 'recipe'\r\n                      ? (item.value | recipeTooltip: vm.data)\r\n                      : (item.value | itemTooltip: vm.data)\r\n                  \"\r\n                  [escape]=\"false\"\r\n                >\r\n                  <i [class]=\"item.value | iconSmClass: dropdownType\"></i>\r\n                  <div class=\"ms-3 text-truncate\">\r\n                    {{ item.label }}\r\n                  </div>\r\n                </div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n            <!-- Desktop icon-text via dropdown -->\r\n            <p-dropdown\r\n              labDropdownBase\r\n              class=\"d-none d-sm-inline-flex\"\r\n              [virtualScroll]=\"true\"\r\n              [virtualScrollItemSize]=\"34\"\r\n              [tooltip]=\"'products.changeVia' | translate\"\r\n              tooltipPosition=\"top\"\r\n              [options]=\"vm.viaOptions[product.id]\"\r\n              [ngModel]=\"product.viaId\"\r\n              (onChange)=\"setVia(product.id, $event.value)\"\r\n            >\r\n              <ng-template pTemplate=\"selectedItem\" let-item>\r\n                <span *ngIf=\"item.value === product.itemId; else viaSelected\">\r\n                  {{ 'products.changeVia' | translate }}\r\n                </span>\r\n                <ng-template #viaSelected>\r\n                  <div class=\"d-flex align-items-center h-100\">\r\n                    <i [class]=\"item.value | iconSmClass: dropdownType\"></i>\r\n                    <div class=\"ms-3 text-truncate\">\r\n                      {{ item.label }}\r\n                    </div>\r\n                  </div>\r\n                </ng-template>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"item\" let-item>\r\n                <div\r\n                  class=\"d-flex align-items-center py-2 w-100 h-100\"\r\n                  [pTooltip]=\"\r\n                    dropdownType === 'recipe'\r\n                      ? (item.value | recipeTooltip: vm.data)\r\n                      : (item.value | itemTooltip: vm.data)\r\n                  \"\r\n                  tooltipPosition=\"left\"\r\n                  [escape]=\"false\"\r\n                >\r\n                  <i [class]=\"item.value | iconSmClass: dropdownType\"></i>\r\n                  <div class=\"ms-3 text-truncate\">\r\n                    {{ item.label }}\r\n                  </div>\r\n                </div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n          </ng-container>\r\n        </ng-container>\r\n      </ng-container>\r\n      <ng-template #recipeNone>\r\n        <span class=\"p-inputgroup-addon p-error\">{{\r\n          'products.noEnabledRecipes' | translate\r\n        }}</span>\r\n      </ng-template>\r\n    </div>\r\n  </div>\r\n  <div class=\"row mt-3\">\r\n    <div class=\"col-auto mt-2\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        pRipple\r\n        icon=\"fa-solid fa-plus\"\r\n        [label]=\"'products.addAProduct' | translate\"\r\n        (click)=\"addPicker.clickOpen(vm.data)\"\r\n      >\r\n        <lab-picker #addPicker (selectId)=\"addProduct($event)\"></lab-picker>\r\n      </button>\r\n    </div>\r\n    <div class=\"col-auto mt-2\">\r\n      <p-dropdown\r\n        labDropdownTranslate\r\n        styleClass=\"h-100\"\r\n        [tooltip]=\"'products.selectDisplayRate' | translate\"\r\n        [ngModel]=\"vm.displayRate\"\r\n        [options]=\"displayRateOptions\"\r\n        (onChange)=\"setDisplayRate($event.value, vm.displayRate)\"\r\n      >\r\n      </p-dropdown>\r\n    </div>\r\n  </div>\r\n</p-card>\r\n","import {\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  HostBinding,\r\n  Input,\r\n  OnInit,\r\n} from '@angular/core';\r\nimport { FormControl, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { Store } from '@ngrx/store';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { MenuItem } from 'primeng/api';\r\nimport { combineLatest, first, map } from 'rxjs';\r\n\r\nimport {\r\n  Column,\r\n  Dataset,\r\n  DisplayRate,\r\n  displayRateOptions,\r\n  FuelType,\r\n  Game,\r\n  gameInfo,\r\n  gameOptions,\r\n  InserterCapacity,\r\n  inserterCapacityOptions,\r\n  InserterTarget,\r\n  inserterTargetOptions,\r\n  ItemId,\r\n  Language,\r\n  languageOptions,\r\n  PowerUnit,\r\n  powerUnitOptions,\r\n  Preset,\r\n  ResearchSpeed,\r\n  researchSpeedOptions,\r\n  SimplexType,\r\n  simplexTypeOptions,\r\n  Theme,\r\n  themeOptions,\r\n} from '~/models';\r\nimport { ContentService, DisplayService, RouterService } from '~/services';\r\nimport { App, Factories, LabState, Preferences, Settings } from '~/store';\r\nimport { BrowserUtility } from '~/utilities';\r\n\r\n@Component({\r\n  selector: 'lab-settings',\r\n  templateUrl: './settings.component.html',\r\n  styleUrls: ['./settings.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class SettingsComponent implements OnInit {\r\n  @HostBinding('class.active') @Input() active = false;\r\n  @HostBinding('class.hidden') @Input() hidden = false;\r\n\r\n  vm$ = combineLatest([\r\n    this.store.select(Factories.getFactories),\r\n    this.store.select(Factories.getFactoryRows),\r\n    this.store.select(Factories.getFactoryOptions),\r\n    this.store.select(Settings.getSettings),\r\n    this.store.select(Settings.getColumnsState),\r\n    this.store.select(Settings.getDataset),\r\n    this.store.select(Settings.getOptions),\r\n    this.store.select(Settings.getModOptions),\r\n    this.store.select(Settings.getPresetOptions),\r\n    this.store.select(Settings.getBeltSpeedTxt),\r\n    this.store.select(Preferences.preferencesState),\r\n    this.store.select(Preferences.getSavedStates),\r\n    this.contentSvc.lang$,\r\n  ]).pipe(\r\n    map(\r\n      ([\r\n        factories,\r\n        factoryRows,\r\n        factoryOptions,\r\n        settings,\r\n        columns,\r\n        data,\r\n        options,\r\n        modOptions,\r\n        presetOptions,\r\n        beltSpeedTxt,\r\n        preferences,\r\n        savedStates,\r\n      ]) => ({\r\n        factories,\r\n        factoryRows,\r\n        factoryOptions,\r\n        settings,\r\n        columns,\r\n        data,\r\n        options,\r\n        modOptions,\r\n        presetOptions,\r\n        beltSpeedTxt,\r\n        preferences,\r\n        savedStates,\r\n        factoryMenuItems: this.buildFactoryMenus(factoryRows, data),\r\n      })\r\n    )\r\n  );\r\n\r\n  state = '';\r\n  stateCtrl = new FormControl('', Validators.required);\r\n  editState = false;\r\n  versionsVisible = false;\r\n\r\n  displayRateOptions = displayRateOptions;\r\n  gameOptions = gameOptions;\r\n  inserterCapacityOptions = inserterCapacityOptions;\r\n  inserterTargetOptions = inserterTargetOptions;\r\n  languageOptions = languageOptions;\r\n  powerUnitOptions = powerUnitOptions;\r\n  researchSpeedOptions = researchSpeedOptions;\r\n  simplexTypeOptions = simplexTypeOptions;\r\n  themeOptions = themeOptions;\r\n\r\n  Column = Column;\r\n  FuelType = FuelType;\r\n  Game = Game;\r\n  ItemId = ItemId;\r\n  SimplexType = SimplexType;\r\n\r\n  constructor(\r\n    public contentSvc: ContentService,\r\n    public displaySvc: DisplayService,\r\n    private router: Router,\r\n    private store: Store<LabState>,\r\n    private translateSvc: TranslateService,\r\n    private routerSvc: RouterService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.store\r\n      .select(Preferences.getStates)\r\n      .pipe(first())\r\n      .subscribe((states) => {\r\n        this.state =\r\n          Object.keys(states).find(\r\n            (s) => states[s] === BrowserUtility.search\r\n          ) ?? '';\r\n      });\r\n  }\r\n\r\n  buildFactoryMenus(factoryRows: string[], data: Dataset): MenuItem[][] {\r\n    return factoryRows.map((factoryId, index): MenuItem[] => {\r\n      if (!factoryId) return [];\r\n      const items: MenuItem[] = [];\r\n      if (index > 1)\r\n        items.push({\r\n          label: this.translateSvc.instant('settings.moveUp'),\r\n          icon: 'fa-solid fa-arrow-up',\r\n          command: () =>\r\n            this.raiseFactory(factoryId, data.defaults?.factoryRankIds),\r\n        });\r\n      if (index < factoryRows.length - 1)\r\n        items.push({\r\n          label: this.translateSvc.instant('settings.moveDown'),\r\n          icon: 'fa-solid fa-arrow-down',\r\n          command: () =>\r\n            this.lowerFactory(factoryId, data.defaults?.factoryRankIds),\r\n        });\r\n      return items;\r\n    });\r\n  }\r\n\r\n  clickResetSettings(): void {\r\n    this.contentSvc.confirm({\r\n      icon: 'fa-solid fa-exclamation-triangle',\r\n      header: this.translateSvc.instant('settings.reset'),\r\n      message: this.translateSvc.instant('settings.resetWarning'),\r\n      acceptLabel: this.translateSvc.instant('yes'),\r\n      rejectLabel: this.translateSvc.instant('cancel'),\r\n      accept: () => {\r\n        localStorage.clear();\r\n        this.resetSettings();\r\n      },\r\n    });\r\n  }\r\n\r\n  setState(id: string, preferences: Preferences.PreferencesState): void {\r\n    const query = preferences.states[id];\r\n    if (query) {\r\n      const queryParams = this.routerSvc.getParams(query);\r\n      this.state = id;\r\n      this.router.navigate([], { queryParams });\r\n    }\r\n  }\r\n\r\n  clickSaveState(): void {\r\n    if (this.stateCtrl.value) {\r\n      this.saveState(this.stateCtrl.value, BrowserUtility.search);\r\n      this.editState = false;\r\n      this.state = this.stateCtrl.value;\r\n    }\r\n  }\r\n\r\n  clickDeleteState(): void {\r\n    this.removeState(this.state);\r\n    this.state = '';\r\n  }\r\n\r\n  openEditState(): void {\r\n    this.stateCtrl.setValue(this.state);\r\n    this.stateCtrl.markAsPristine();\r\n    this.editState = true;\r\n  }\r\n\r\n  setGame(game: Game): void {\r\n    this.setMod(gameInfo[game].modId);\r\n  }\r\n\r\n  toggleBeaconReceivers(value: boolean): void {\r\n    this.setBeaconReceivers(value ? '1' : null);\r\n  }\r\n\r\n  /** Action Dispatch Methods */\r\n  resetSettings(): void {\r\n    this.store.dispatch(new App.ResetAction());\r\n  }\r\n\r\n  saveState(id: string, value: string): void {\r\n    this.store.dispatch(new Preferences.SaveStateAction({ id, value }));\r\n  }\r\n\r\n  removeState(value: string): void {\r\n    this.store.dispatch(new Preferences.RemoveStateAction(value));\r\n  }\r\n\r\n  setMod(value: string): void {\r\n    this.store.dispatch(new Settings.SetModAction(value));\r\n  }\r\n\r\n  setDisabledRecipes(value: string[], def: string[] | undefined): void {\r\n    this.store.dispatch(new Settings.SetDisabledRecipesAction({ value, def }));\r\n  }\r\n\r\n  setPreset(value: Preset): void {\r\n    this.store.dispatch(new Settings.SetPresetAction(value));\r\n  }\r\n\r\n  addFactory(value: string, def: string[] | undefined): void {\r\n    this.store.dispatch(new Factories.AddAction({ value, def }));\r\n  }\r\n\r\n  removeFactory(value: string, def: string[] | undefined): void {\r\n    this.store.dispatch(new Factories.RemoveAction({ value, def }));\r\n  }\r\n\r\n  raiseFactory(value: string, def: string[] | undefined): void {\r\n    this.store.dispatch(new Factories.RaiseAction({ value, def }));\r\n  }\r\n\r\n  lowerFactory(value: string, def: string[] | undefined): void {\r\n    this.store.dispatch(new Factories.LowerAction({ value, def }));\r\n  }\r\n\r\n  setFactory(id: string, value: string, def: string[] | undefined): void {\r\n    this.store.dispatch(new Factories.SetFactoryAction({ id, value, def }));\r\n  }\r\n\r\n  setModuleRank(id: string, value: string[], def: string[] | undefined): void {\r\n    this.store.dispatch(new Factories.SetModuleRankAction({ id, value, def }));\r\n  }\r\n\r\n  setOverclock(id: string, value: number, def: number | undefined): void {\r\n    this.store.dispatch(new Factories.SetOverclockAction({ id, value, def }));\r\n  }\r\n\r\n  setBeaconCount(id: string, value: string, def: string | undefined): void {\r\n    this.store.dispatch(new Factories.SetBeaconCountAction({ id, value, def }));\r\n  }\r\n\r\n  setBeacon(id: string, value: string, def: string | undefined): void {\r\n    this.store.dispatch(new Factories.SetBeaconAction({ id, value, def }));\r\n  }\r\n\r\n  setBeaconModule(id: string, value: string, def: string | undefined): void {\r\n    this.store.dispatch(\r\n      new Factories.SetBeaconModuleAction({ id, value, def })\r\n    );\r\n  }\r\n\r\n  setBeaconReceivers(value: string | null): void {\r\n    this.store.dispatch(new Settings.SetBeaconReceiversAction(value));\r\n  }\r\n\r\n  setProliferatorSpray(value: string): void {\r\n    this.store.dispatch(new Settings.SetProliferatorSprayAction(value));\r\n  }\r\n\r\n  setBelt(value: string, def: string | undefined): void {\r\n    this.store.dispatch(new Settings.SetBeltAction({ value, def }));\r\n  }\r\n\r\n  setPipe(value: string, def: string | undefined): void {\r\n    this.store.dispatch(new Settings.SetPipeAction({ value, def }));\r\n  }\r\n\r\n  setCargoWagon(value: string, def: string | undefined): void {\r\n    this.store.dispatch(new Settings.SetCargoWagonAction({ value, def }));\r\n  }\r\n\r\n  setFluidWagon(value: string, def: string | undefined): void {\r\n    this.store.dispatch(new Settings.SetFluidWagonAction({ value, def }));\r\n  }\r\n\r\n  setFuel(value: string, def: string | undefined): void {\r\n    this.store.dispatch(new Settings.SetFuelAction({ value, def }));\r\n  }\r\n\r\n  setFlowRate(value: number): void {\r\n    this.store.dispatch(new Settings.SetFlowRateAction(value));\r\n  }\r\n\r\n  setInserterTarget(value: InserterTarget): void {\r\n    this.store.dispatch(new Settings.SetInserterTargetAction(value));\r\n  }\r\n\r\n  setMiningBonus(value: number): void {\r\n    this.store.dispatch(new Settings.SetMiningBonusAction(value));\r\n  }\r\n\r\n  setResearchSpeed(value: ResearchSpeed): void {\r\n    this.store.dispatch(new Settings.SetResearchSpeedAction(value));\r\n  }\r\n\r\n  setInserterCapacity(value: InserterCapacity): void {\r\n    this.store.dispatch(new Settings.SetInserterCapacityAction(value));\r\n  }\r\n\r\n  setDisplayRate(value: DisplayRate, prev: DisplayRate): void {\r\n    this.store.dispatch(new Settings.SetDisplayRateAction({ value, prev }));\r\n  }\r\n\r\n  setPowerUnit(value: PowerUnit): void {\r\n    this.store.dispatch(new Preferences.SetPowerUnitAction(value));\r\n  }\r\n\r\n  setLanguage(value: Language): void {\r\n    this.translateSvc.use(value);\r\n    this.store.dispatch(new Preferences.SetLanguageAction(value));\r\n  }\r\n\r\n  setTheme(value: Theme): void {\r\n    this.store.dispatch(new Preferences.SetThemeAction(value));\r\n  }\r\n\r\n  setSimplexType(value: SimplexType): void {\r\n    this.store.dispatch(new Preferences.SetSimplexTypeAction(value));\r\n  }\r\n}\r\n","<div class=\"p-3\">\r\n  <div class=\"d-flex align-items-center justify-content-between\">\r\n    <h2>{{ 'settings.header' | translate }}</h2>\r\n    <div>\r\n      <button\r\n        pButton\r\n        pRipple\r\n        type=\"button\"\r\n        class=\"p-button-rounded p-button-text\"\r\n        icon=\"fa-solid fa-trash\"\r\n        [pTooltip]=\"'settings.reset' | translate\"\r\n        tooltipPosition=\"bottom\"\r\n        (click)=\"clickResetSettings()\"\r\n      ></button>\r\n      <button\r\n        pButton\r\n        pRipple\r\n        type=\"button\"\r\n        class=\"p-button-rounded p-button-text d-inline-flex d-none d-xl-inline-flex\"\r\n        icon=\"fa-solid fa-xmark\"\r\n        (click)=\"contentSvc.toggleSettingsXl()\"\r\n      ></button>\r\n      <button\r\n        pButton\r\n        pRipple\r\n        type=\"button\"\r\n        class=\"p-button-rounded p-button-text d-inline-flex d-sm-none\"\r\n        icon=\"fa-solid fa-xmark\"\r\n        (click)=\"contentSvc.toggleSettings()\"\r\n      ></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div *ngIf=\"vm$ | async as vm\" class=\"flex-grow-1 overflow-hidden\">\r\n  <p-scrollPanel [style]=\"{ height: '100%' }\">\r\n    <div class=\"p-fluid px-3 overflow-hidden settings-container\">\r\n      <div class=\"mb-2\">\r\n        <h3>\r\n          <span [pTooltip]=\"'settings.savedStatesTooltip' | translate\">\r\n            {{ 'settings.savedStates' | translate }}\r\n            <i class=\"fa-solid fa-info-circle\"></i>\r\n          </span>\r\n        </h3>\r\n        <div class=\"p-inputgroup\">\r\n          <ng-container *ngIf=\"editState; else selectState\">\r\n            <button\r\n              pButton\r\n              pRipple\r\n              type=\"button\"\r\n              icon=\"fa-solid fa-xmark\"\r\n              [pTooltip]=\"'cancel' | translate\"\r\n              (click)=\"editState = false\"\r\n            ></button>\r\n            <input\r\n              pInputText\r\n              [pAutoFocus]=\"true\"\r\n              type=\"text\"\r\n              [placeholder]=\"'settings.nameSavedState' | translate\"\r\n              [pTooltip]=\"'settings.savedStateName' | translate\"\r\n              tooltipPosition=\"top\"\r\n              [formControl]=\"stateCtrl\"\r\n            />\r\n            <button\r\n              pButton\r\n              pRipple\r\n              type=\"button\"\r\n              icon=\"fa-solid fa-floppy-disk\"\r\n              [pTooltip]=\"'settings.saveSavedState' | translate\"\r\n              [disabled]=\"!stateCtrl.valid\"\r\n              (click)=\"clickSaveState()\"\r\n            ></button>\r\n          </ng-container>\r\n        </div>\r\n        <ng-template #selectState>\r\n          <button\r\n            pButton\r\n            pRipple\r\n            type=\"button\"\r\n            icon=\"fa-solid fa-pen-to-square\"\r\n            [pTooltip]=\"'settings.editSavedState' | translate\"\r\n            (click)=\"openEditState()\"\r\n          ></button>\r\n          <p-dropdown\r\n            [placeholder]=\"'settings.selectSavedState' | translate\"\r\n            [pTooltip]=\"'settings.selectSavedState' | translate\"\r\n            tooltipPosition=\"top\"\r\n            [ngModel]=\"state\"\r\n            [options]=\"vm.savedStates\"\r\n            (onChange)=\"setState($event.value, vm.preferences)\"\r\n          ></p-dropdown>\r\n          <button\r\n            pButton\r\n            pRipple\r\n            type=\"button\"\r\n            icon=\"fa-solid fa-trash\"\r\n            [pTooltip]=\"'settings.deleteSavedState' | translate\"\r\n            [disabled]=\"!state\"\r\n            (click)=\"clickDeleteState()\"\r\n          ></button>\r\n        </ng-template>\r\n      </div>\r\n      <div class=\"mb-2\">\r\n        <div class=\"d-flex align-items-center justify-content-between mb-2\">\r\n          <h3 class=\"mb-0\">{{ 'settings.recipes' | translate }}</h3>\r\n          <a\r\n            *ngIf=\"vm.data.game === Game.Factorio\"\r\n            target=\"_blank\"\r\n            href=\"https://github.com/factoriolab/factoriolab/issues/new?assignees=&labels=mod+support&template=mod-request.md&title=\"\r\n            ><small>{{ 'settings.requestMod' | translate }}</small></a\r\n          >\r\n        </div>\r\n        <div class=\"mt-3 py-2\">\r\n          <span\r\n            class=\"p-float-label\"\r\n            [pTooltip]=\"'settings.gameTooltip' | translate\"\r\n          >\r\n            <p-dropdown\r\n              labDropdownTranslate\r\n              inputId=\"game\"\r\n              [ngModel]=\"vm.data.game\"\r\n              [options]=\"gameOptions\"\r\n              (onChange)=\"setGame($event.value)\"\r\n            >\r\n            </p-dropdown>\r\n            <label for=\"game\">{{ 'settings.game' | translate }}</label>\r\n            <ng-container *ngIf=\"vm.data.game !== Game.Factorio\">\r\n              <small\r\n                *ngFor=\"let mod of vm.data.version | keyvalue\"\r\n                class=\"position-absolute end-0 bottom-100 me-1 mb-1\"\r\n              >\r\n                {{ mod.value }}\r\n              </small>\r\n            </ng-container>\r\n          </span>\r\n        </div>\r\n        <div *ngIf=\"vm.data.game === Game.Factorio\" class=\"pb-2\">\r\n          <label class=\"p-static-label\">{{\r\n            'settings.modSet' | translate\r\n          }}</label>\r\n          <span class=\"p-inputgroup\">\r\n            <p-dropdown\r\n              inputId=\"mod\"\r\n              styleClass=\"w-100\"\r\n              [filter]=\"true\"\r\n              [pTooltip]=\"'settings.modSetTooltip' | translate\"\r\n              [ngModel]=\"vm.settings.modId\"\r\n              [options]=\"vm.modOptions\"\r\n              (onChange)=\"setMod($event.value)\"\r\n            >\r\n            </p-dropdown>\r\n            <button\r\n              pButton\r\n              pRipple\r\n              icon=\"fa-solid fa-info\"\r\n              [pTooltip]=\"'settings.modVersions' | translate\"\r\n              (click)=\"versionsVisible = true\"\r\n            >\r\n              <p-dialog\r\n                [(visible)]=\"versionsVisible\"\r\n                appendTo=\"body\"\r\n                [modal]=\"true\"\r\n                [dismissableMask]=\"true\"\r\n                [draggable]=\"false\"\r\n                [resizable]=\"false\"\r\n                [style]=\"{ width: '400px', maxHeight: '500px' }\"\r\n                [breakpoints]=\"{ '400px': '100vw' }\"\r\n                [header]=\"'settings.modVersions' | translate\"\r\n              >\r\n                <p-table\r\n                  responsiveLayout=\"scroll\"\r\n                  styleClass=\"p-datatable-sm\"\r\n                  [value]=\"vm.data.version | keyvalue\"\r\n                >\r\n                  <ng-template pTemplate=\"header\">\r\n                    <tr>\r\n                      <th>{{ 'settings.mod' | translate }}</th>\r\n                      <th>{{ 'settings.version' | translate }}</th>\r\n                    </tr>\r\n                  </ng-template>\r\n                  <ng-template pTemplate=\"body\" let-mod>\r\n                    <tr>\r\n                      <td>{{ mod.key }}</td>\r\n                      <td>{{ mod.value }}</td>\r\n                    </tr>\r\n                  </ng-template>\r\n                </p-table>\r\n                <ng-template pTemplate=\"footer\">\r\n                  <button\r\n                    pButton\r\n                    pRipple\r\n                    type=\"button\"\r\n                    class=\"p-button-text\"\r\n                    icon=\"fa-solid fa-check\"\r\n                    [label]=\"'ok' | translate\"\r\n                    (click)=\"versionsVisible = false\"\r\n                  ></button>\r\n                </ng-template>\r\n              </p-dialog>\r\n            </button>\r\n          </span>\r\n        </div>\r\n        <div class=\"mt-3 py-2\">\r\n          <span\r\n            class=\"p-float-label\"\r\n            [pTooltip]=\"'settings.optionalRecipesTooltip' | translate\"\r\n          >\r\n            <p-multiSelect\r\n              inputId=\"optional-recipes\"\r\n              appendTo=\"body\"\r\n              scrollHeight=\"40vh\"\r\n              [virtualScroll]=\"true\"\r\n              [virtualScrollItemSize]=\"48\"\r\n              [panelStyle]=\"{ width: '1rem' }\"\r\n              panelStyleClass=\"mw-100\"\r\n              [ngModel]=\"\r\n                vm.settings.disabledRecipeIds\r\n                  | invertArray: vm.data.complexRecipeIds\r\n              \"\r\n              [options]=\"vm.options.complexRecipes\"\r\n              (onChange)=\"\r\n                setDisabledRecipes(\r\n                  displaySvc.invertArray(\r\n                    $event.value,\r\n                    vm.data.complexRecipeIds\r\n                  ),\r\n                  vm.data.defaults?.disabledRecipeIds\r\n                )\r\n              \"\r\n            >\r\n              <ng-template pTemplate=\"selectedItems\" let-items>\r\n                {{ items?.length ?? 0 }}\r\n                {{ 'settings.recipesEnabled' | translate }}\r\n              </ng-template>\r\n              <ng-template pTemplate=\"item\" let-item>\r\n                <div\r\n                  class=\"d-flex align-items-center w-100 h-100\"\r\n                  [pTooltip]=\"item.value | recipeTooltip: vm.data\"\r\n                  [escape]=\"false\"\r\n                >\r\n                  <i [class]=\"item.value | iconSmClass: 'recipe'\"></i>\r\n                  <div class=\"ms-3 text-truncate\">\r\n                    {{ item.label }}\r\n                  </div>\r\n                </div>\r\n              </ng-template>\r\n            </p-multiSelect>\r\n            <label for=\"optional-recipes\">{{\r\n              'settings.optionalRecipes' | translate\r\n            }}</label>\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div class=\"mb-2\">\r\n        <h3>{{ 'settings.factory' | translate }}</h3>\r\n        <div class=\"mt-3 py-2 mb-1\">\r\n          <span\r\n            class=\"p-float-label\"\r\n            [pTooltip]=\"'settings.presetTooltip' | translate\"\r\n          >\r\n            <p-dropdown\r\n              labDropdownTranslate\r\n              inputId=\"preset\"\r\n              [ngModel]=\"vm.settings.preset\"\r\n              [options]=\"vm.presetOptions\"\r\n              (onChange)=\"setPreset($event.value)\"\r\n            >\r\n            </p-dropdown>\r\n            <label for=\"preset\">{{ 'settings.preset' | translate }}</label>\r\n          </span>\r\n        </div>\r\n        <ng-container *ngIf=\"vm.data.game !== Game.CaptainOfIndustry\">\r\n          <ng-container\r\n            *ngFor=\"let factoryId of vm.factoryRows; let index = index\"\r\n          >\r\n            <ng-container *ngIf=\"vm.factories.entities[factoryId] as settings\">\r\n              <ng-container\r\n                *ngIf=\"\r\n                  factoryId\r\n                    ? vm.factories.entities['']\r\n                    : vm.data.defaults as defaults\r\n                \"\r\n              >\r\n                <div class=\"p-inputgroup flex-wrap factory-preference\">\r\n                  <!-- Add/Remove factory button -->\r\n                  <p-dropdown\r\n                    *ngIf=\"index === 0; else removeButton\"\r\n                    labDropdownBase=\"icon\"\r\n                    [pTooltip]=\"'settings.addFactoryTooltip' | translate\"\r\n                    [options]=\"vm.factoryOptions\"\r\n                    (onChange)=\"\r\n                      addFactory($event.value, vm.data.defaults?.factoryRankIds)\r\n                    \"\r\n                  >\r\n                    <ng-template pTemplate=\"selectedItem\" let-item>\r\n                      <div\r\n                        class=\"d-flex justify-content-center align-items-center h-100 w-100\"\r\n                      >\r\n                        <i class=\"fa-solid fa-plus\"></i>\r\n                      </div>\r\n                    </ng-template>\r\n                    <ng-template pTemplate=\"item\" let-item>\r\n                      <div\r\n                        class=\"d-flex align-items-center py-2 w-100 h-100\"\r\n                        [pTooltip]=\"item.value | factoryTooltip: vm.data\"\r\n                        [escape]=\"false\"\r\n                      >\r\n                        <i [class]=\"item.value | iconSmClass\"></i>\r\n                        <div class=\"ms-3 text-truncate\">\r\n                          {{ item.label }}\r\n                        </div>\r\n                      </div>\r\n                    </ng-template>\r\n                  </p-dropdown>\r\n                  <ng-template #removeButton>\r\n                    <button\r\n                      pButton\r\n                      pRipple\r\n                      type=\"button\"\r\n                      icon=\"fa-solid fa-minus\"\r\n                      [pTooltip]=\"\r\n                        'settings.removeFactoryPreference' | translate\r\n                      \"\r\n                      (click)=\"\r\n                        removeFactory(\r\n                          factoryId,\r\n                          vm.data.defaults?.factoryRankIds\r\n                        )\r\n                      \"\r\n                    ></button>\r\n                  </ng-template>\r\n                  <!-- Factory dropdown -->\r\n                  <p-dropdown\r\n                    *ngIf=\"factoryId; else factoryIcon\"\r\n                    labDropdownBase=\"icon\"\r\n                    [pTooltip]=\"'settings.factoryTooltip' | translate\"\r\n                    [ngModel]=\"factoryId\"\r\n                    [options]=\"vm.factoryOptions\"\r\n                    (onChange)=\"\r\n                      setFactory(\r\n                        factoryId,\r\n                        $event.value,\r\n                        vm.data.defaults?.factoryRankIds\r\n                      )\r\n                    \"\r\n                  >\r\n                    <ng-template pTemplate=\"selectedItem\" let-item>\r\n                      <div class=\"d-flex\">\r\n                        <i [class]=\"item.value | iconSmClass\"></i>\r\n                      </div>\r\n                    </ng-template>\r\n                    <ng-template pTemplate=\"item\" let-item>\r\n                      <div\r\n                        class=\"d-flex align-items-center py-2 w-100 h-100\"\r\n                        [pTooltip]=\"item.value | factoryTooltip: vm.data\"\r\n                        [escape]=\"false\"\r\n                      >\r\n                        <i [class]=\"item.value | iconSmClass\"></i>\r\n                        <div class=\"ms-3 text-truncate\">\r\n                          {{ item.label }}\r\n                        </div>\r\n                      </div>\r\n                    </ng-template>\r\n                  </p-dropdown>\r\n                  <ng-template #factoryIcon>\r\n                    <span\r\n                      class=\"p-inputgroup-addon\"\r\n                      [pTooltip]=\"'settings.factoryDefaults' | translate\"\r\n                    >\r\n                      <i class=\"fa-solid fa-industry\"></i>\r\n                    </span>\r\n                  </ng-template>\r\n                  <!-- Modifiers multiselect -->\r\n                  <p-multiSelect\r\n                    *ngIf=\"settings.moduleRankIds\"\r\n                    appendTo=\"body\"\r\n                    scrollHeight=\"40vh\"\r\n                    styleClass=\"icon\"\r\n                    panelStyleClass=\"tooltip\"\r\n                    placeholder=\"unused\"\r\n                    [selectionLimit]=\"\r\n                      vm.data.game === Game.Satisfactory ? 1 : 2\r\n                    \"\r\n                    [pTooltip]=\"'settings.modifierTooltip' | translate\"\r\n                    [ngModel]=\"settings.moduleRankIds\"\r\n                    [options]=\"vm.options.modules\"\r\n                    (onChange)=\"\r\n                      setModuleRank(\r\n                        factoryId,\r\n                        $event.value,\r\n                        defaults?.moduleRankIds\r\n                      )\r\n                    \"\r\n                  >\r\n                    <ng-template pTemplate=\"selectedItems\" let-items>\r\n                      <div class=\"d-flex\">\r\n                        <i\r\n                          *ngIf=\"items && items.length; else noModifiers\"\r\n                          [class]=\"items[0] | iconSmClass\"\r\n                        >\r\n                          <span *ngIf=\"items.length > 1\"\r\n                            >+{{ items.length - 1 }}</span\r\n                          >\r\n                        </i>\r\n                        <ng-template #noModifiers>\r\n                          <i [class]=\"ItemId.Module | iconSmClass\"></i>\r\n                        </ng-template>\r\n                      </div>\r\n                    </ng-template>\r\n                    <ng-template pTemplate=\"item\" let-item>\r\n                      <div\r\n                        class=\"d-flex align-items-center py-2 w-100 h-100\"\r\n                        [pTooltip]=\"item.value | moduleTooltip: vm.data\"\r\n                        [escape]=\"false\"\r\n                      >\r\n                        <i [class]=\"item.value | iconSmClass\"></i>\r\n                        <div class=\"ms-3 text-truncate\">\r\n                          {{ item.label }}\r\n                        </div>\r\n                      </div>\r\n                    </ng-template>\r\n                  </p-multiSelect>\r\n                  <!-- Overclock input -->\r\n                  <ng-container *ngIf=\"vm.data.game === Game.Satisfactory\">\r\n                    <p-inputNumber\r\n                      #overclockInput\r\n                      suffix=\"%\"\r\n                      [min]=\"1\"\r\n                      [max]=\"250\"\r\n                      [step]=\"10\"\r\n                      [showButtons]=\"true\"\r\n                      [pTooltip]=\"'settings.overclockTooltip' | translate\"\r\n                      [ngModel]=\"settings.overclock\"\r\n                      (onBlur)=\"\r\n                        setOverclock(\r\n                          factoryId,\r\n                          overclockInput.value,\r\n                          factoryId ? vm.factories.entities[''].overclock : 100\r\n                        )\r\n                      \"\r\n                    >\r\n                    </p-inputNumber>\r\n                  </ng-container>\r\n                  <ng-container *ngIf=\"vm.data.game === Game.Factorio\">\r\n                    <ng-container *ngIf=\"settings.beaconCount != null\">\r\n                      <!-- Beacon count input -->\r\n                      <lab-input-number\r\n                        [pTooltip]=\"'settings.beaconCountTooltip' | translate\"\r\n                        tooltipPosition=\"top\"\r\n                        [value]=\"settings.beaconCount\"\r\n                        (setValue)=\"\r\n                          setBeaconCount(\r\n                            factoryId,\r\n                            $event,\r\n                            defaults?.beaconCount\r\n                          )\r\n                        \"\r\n                      ></lab-input-number>\r\n                      <!-- Beacon dropdown -->\r\n                      <p-dropdown\r\n                        labDropdownBase=\"icon\"\r\n                        [pTooltip]=\"'settings.beaconTooltip' | translate\"\r\n                        tooltipPosition=\"top\"\r\n                        [ngModel]=\"settings.beaconId\"\r\n                        [options]=\"vm.options.beacons\"\r\n                        (onChange)=\"\r\n                          setBeacon(factoryId, $event.value, defaults?.beaconId)\r\n                        \"\r\n                      >\r\n                        <ng-template pTemplate=\"selectedItem\" let-item>\r\n                          <div class=\"d-flex\">\r\n                            <i [class]=\"item.value | iconSmClass\"></i>\r\n                          </div>\r\n                        </ng-template>\r\n                        <ng-template pTemplate=\"item\" let-item>\r\n                          <div\r\n                            class=\"d-flex align-items-center py-2 w-100 h-100\"\r\n                            [pTooltip]=\"item.value | beaconTooltip: vm.data\"\r\n                            [escape]=\"false\"\r\n                          >\r\n                            <i [class]=\"item.value | iconSmClass\"></i>\r\n                            <div class=\"ms-3 text-truncate\">\r\n                              {{ item.label }}\r\n                            </div>\r\n                          </div>\r\n                        </ng-template>\r\n                      </p-dropdown>\r\n                      <!-- Beacon module dropdown -->\r\n                      <p-dropdown\r\n                        labDropdownBase=\"icon\"\r\n                        [autoDisplayFirst]=\"false\"\r\n                        placeholder=\"unused\"\r\n                        [pTooltip]=\"'settings.beaconModuleTooltip' | translate\"\r\n                        tooltipPosition=\"top\"\r\n                        [ngModel]=\"settings.beaconModuleId\"\r\n                        [options]=\"vm.options.beaconModules\"\r\n                        (onChange)=\"\r\n                          setBeaconModule(\r\n                            factoryId,\r\n                            $event.value,\r\n                            defaults?.beaconModuleId\r\n                          )\r\n                        \"\r\n                      >\r\n                        <ng-template pTemplate=\"selectedItem\" let-item>\r\n                          <div class=\"d-flex\">\r\n                            <i [class]=\"item.value | iconSmClass\"></i>\r\n                          </div>\r\n                        </ng-template>\r\n                        <ng-template pTemplate=\"item\" let-item>\r\n                          <div\r\n                            class=\"d-flex align-items-center py-2 w-100 h-100\"\r\n                            [pTooltip]=\"item.value | moduleTooltip: vm.data\"\r\n                            [escape]=\"false\"\r\n                          >\r\n                            <i [class]=\"item.value | iconSmClass\"></i>\r\n                            <div class=\"ms-3 text-truncate\">\r\n                              {{ item.label }}\r\n                            </div>\r\n                          </div>\r\n                        </ng-template>\r\n                      </p-dropdown>\r\n                    </ng-container>\r\n                  </ng-container>\r\n                  <!-- Move options -->\r\n                  <button\r\n                    pButton\r\n                    pRipple\r\n                    type=\"button\"\r\n                    class=\"ms-auto\"\r\n                    [class.invisible]=\"vm.factoryMenuItems[index].length === 0\"\r\n                    icon=\"fa-solid fa-ellipsis-vertical\"\r\n                    [pTooltip]=\"'settings.moveFactoryPreference' | translate\"\r\n                    (click)=\"factoryMenu.toggle($event)\"\r\n                  >\r\n                    <p-menu\r\n                      #factoryMenu\r\n                      appendTo=\"body\"\r\n                      [popup]=\"true\"\r\n                      [model]=\"vm.factoryMenuItems[index]\"\r\n                    ></p-menu>\r\n                  </button>\r\n                </div>\r\n              </ng-container>\r\n            </ng-container>\r\n          </ng-container>\r\n        </ng-container>\r\n        <div *ngIf=\"vm.data.game === Game.Factorio\" class=\"mt-2 py-2\">\r\n          <p-checkbox\r\n            [ngModel]=\"vm.settings.beaconReceivers != null\"\r\n            [binary]=\"true\"\r\n            [label]=\"'settings.estimateBeaconPowerUsage' | translate\"\r\n            [pTooltip]=\"'settings.estimateBeaconPowerUsageTooltip' | translate\"\r\n            (onChange)=\"toggleBeaconReceivers($event.checked)\"\r\n          ></p-checkbox>\r\n        </div>\r\n        <div *ngIf=\"vm.settings.beaconReceivers\" class=\"pb-2\">\r\n          <label class=\"p-static-label\" for=\"beacon-receivers\">{{\r\n            'settings.averageBeaconReceivers' | translate\r\n          }}</label>\r\n          <lab-input-number\r\n            inputId=\"beacon-receivers\"\r\n            class=\"w-100\"\r\n            [pTooltip]=\"'settings.averageBeaconReceiversTooltip' | translate\"\r\n            [value]=\"vm.settings.beaconReceivers\"\r\n            (setValue)=\"setBeaconReceivers($event)\"\r\n          ></lab-input-number>\r\n        </div>\r\n        <div *ngIf=\"vm.data.game === Game.DysonSphereProgram\" class=\"mt-4 py-2\">\r\n          <div\r\n            class=\"p-float-label\"\r\n            [pTooltip]=\"'settings.proliferatorSelfSprayTooltip' | translate\"\r\n          >\r\n            <p-dropdown\r\n              labDropdownBase\r\n              inputId=\"proliferator-self-spray\"\r\n              [autoDisplayFirst]=\"false\"\r\n              [ngModel]=\"vm.settings.proliferatorSprayId\"\r\n              [options]=\"vm.options.prodModules\"\r\n              (onChange)=\"setProliferatorSpray($event.value)\"\r\n            >\r\n              <ng-template pTemplate=\"selectedItem\" let-item>\r\n                <div class=\"d-flex align-items-center h-100\">\r\n                  <i [class]=\"item.value | iconSmClass\"></i>\r\n                  <div class=\"ms-3 text-truncate\">\r\n                    {{ item.label }}\r\n                  </div>\r\n                </div>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"item\" let-item>\r\n                <div\r\n                  class=\"d-flex align-items-center py-2 w-100 h-100\"\r\n                  [pTooltip]=\"item.value | moduleTooltip: vm.data\"\r\n                  [escape]=\"false\"\r\n                >\r\n                  <i [class]=\"item.value | iconSmClass\"></i>\r\n                  <div class=\"ms-3 text-truncate\">\r\n                    {{ item.label }}\r\n                  </div>\r\n                </div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n            <label for=\"proliferator-self-spray\">{{\r\n              'settings.proliferatorSelfSpray' | translate\r\n            }}</label>\r\n          </div>\r\n        </div>\r\n        <div class=\"mt-3 py-2\">\r\n          <div\r\n            class=\"p-float-label\"\r\n            [pTooltip]=\"'settings.defaultTransportBeltTooltip' | translate\"\r\n          >\r\n            <p-dropdown\r\n              labDropdownBase\r\n              inputId=\"default-transport-belt\"\r\n              [ngModel]=\"vm.settings.beltId\"\r\n              [options]=\"vm.options.belts\"\r\n              (onChange)=\"setBelt($event.value, vm.data.defaults?.beltId)\"\r\n            >\r\n              <ng-template pTemplate=\"selectedItem\" let-item>\r\n                <div class=\"d-flex align-items-center h-100\">\r\n                  <i [class]=\"item.value | iconSmClass\"></i>\r\n                  <div class=\"ms-3 text-truncate\">\r\n                    {{ item.label }}\r\n                  </div>\r\n                </div>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"item\" let-item>\r\n                <div\r\n                  class=\"d-flex align-items-center py-2 w-100 h-100\"\r\n                  [pTooltip]=\"\r\n                    'tooltip.belt'\r\n                      | translate\r\n                        : {\r\n                            name: vm.data.itemEntities[item.value].name,\r\n                            speed: vm.beltSpeedTxt[item.value]\r\n                          }\r\n                  \"\r\n                  [escape]=\"false\"\r\n                >\r\n                  <i [class]=\"item.value | iconSmClass\"></i>\r\n                  <div class=\"ms-3 text-truncate\">\r\n                    {{ item.label }}\r\n                  </div>\r\n                </div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n            <label for=\"default-transport-belt\">{{\r\n              'settings.defaultTransportBelt' | translate\r\n            }}</label>\r\n          </div>\r\n        </div>\r\n        <div *ngIf=\"vm.data.pipeIds.length > 1\" class=\"mt-3 py-2\">\r\n          <div\r\n            class=\"p-float-label\"\r\n            [pTooltip]=\"'settings.defaultPipeTooltip' | translate\"\r\n          >\r\n            <p-dropdown\r\n              labDropdownBase\r\n              inputId=\"default-pipe\"\r\n              [ngModel]=\"vm.settings.pipeId\"\r\n              [options]=\"vm.options.pipes\"\r\n              (onChange)=\"setPipe($event.value, vm.data.defaults?.pipeId)\"\r\n            >\r\n              <ng-template pTemplate=\"selectedItem\" let-item>\r\n                <div class=\"d-flex align-items-center h-100\">\r\n                  <i [class]=\"item.value | iconSmClass\"></i>\r\n                  <div class=\"ms-3 text-truncate\">\r\n                    {{ item.label }}\r\n                  </div>\r\n                </div>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"item\" let-item>\r\n                <div\r\n                  class=\"d-flex align-items-center py-2 w-100 h-100\"\r\n                  [pTooltip]=\"\r\n                    'tooltip.pipe'\r\n                      | translate\r\n                        : {\r\n                            name: vm.data.itemEntities[item.value].name,\r\n                            speed: vm.beltSpeedTxt[item.value]\r\n                          }\r\n                  \"\r\n                  [escape]=\"false\"\r\n                >\r\n                  <i [class]=\"item.value | iconSmClass\"></i>\r\n                  <div class=\"ms-3 text-truncate\">\r\n                    {{ item.label }}\r\n                  </div>\r\n                </div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n            <label for=\"default-pipe\">{{\r\n              'settings.defaultPipe' | translate\r\n            }}</label>\r\n          </div>\r\n        </div>\r\n        <div *ngIf=\"vm.data.cargoWagonIds.length > 1\" class=\"mt-3 py-2\">\r\n          <div\r\n            class=\"p-float-label\"\r\n            [pTooltip]=\"'settings.defaultCargoWagonTooltip' | translate\"\r\n          >\r\n            <p-dropdown\r\n              labDropdownBase\r\n              inputId=\"default-cargo-wagon\"\r\n              [ngModel]=\"vm.settings.cargoWagonId\"\r\n              [options]=\"vm.options.cargoWagons\"\r\n              (onChange)=\"\r\n                setCargoWagon($event.value, vm.data.defaults?.cargoWagonId)\r\n              \"\r\n            >\r\n              <ng-template pTemplate=\"selectedItem\" let-item>\r\n                <div class=\"d-flex align-items-center h-100\">\r\n                  <i [class]=\"item.value | iconSmClass\"></i>\r\n                  <div class=\"ms-3 text-truncate\">\r\n                    {{ item.label }}\r\n                  </div>\r\n                </div>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"item\" let-item>\r\n                <div\r\n                  class=\"d-flex align-items-center py-2 w-100 h-100\"\r\n                  [pTooltip]=\"\r\n                    'tooltip.cargoWagon'\r\n                      | translate\r\n                        : {\r\n                            name: vm.data.itemEntities[item.value].name,\r\n                            size: vm.data.cargoWagonEntities[item.value].size\r\n                          }\r\n                  \"\r\n                  [escape]=\"false\"\r\n                >\r\n                  <i [class]=\"item.value | iconSmClass\"></i>\r\n                  <div class=\"ms-3 text-truncate\">\r\n                    {{ item.label }}\r\n                  </div>\r\n                </div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n            <label for=\"default-cargo-wagon\">{{\r\n              'settings.defaultCargoWagon' | translate\r\n            }}</label>\r\n          </div>\r\n        </div>\r\n        <div *ngIf=\"vm.data.fluidWagonIds.length > 1\" class=\"mt-3 py-2\">\r\n          <div\r\n            class=\"p-float-label\"\r\n            [pTooltip]=\"'settings.defaultFluidWagonTooltip' | translate\"\r\n          >\r\n            <p-dropdown\r\n              labDropdownBase\r\n              inputId=\"default-fluid-wagon\"\r\n              [ngModel]=\"vm.settings.fluidWagonId\"\r\n              [options]=\"vm.options.fluidWagons\"\r\n              (onChange)=\"\r\n                setFluidWagon($event.value, vm.data.defaults?.fluidWagonId)\r\n              \"\r\n            >\r\n              <ng-template pTemplate=\"selectedItem\" let-item>\r\n                <div class=\"d-flex align-items-center h-100\">\r\n                  <i [class]=\"item.value | iconSmClass\"></i>\r\n                  <div class=\"ms-3 text-truncate\">\r\n                    {{ item.label }}\r\n                  </div>\r\n                </div>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"item\" let-item>\r\n                <div\r\n                  class=\"d-flex align-items-center py-2 w-100 h-100\"\r\n                  [pTooltip]=\"\r\n                    'tooltip.fluidWagon'\r\n                      | translate\r\n                        : {\r\n                            name: vm.data.itemEntities[item.value].name,\r\n                            size: vm.data.fluidWagonEntities[item.value]\r\n                              .capacity\r\n                          }\r\n                  \"\r\n                  [escape]=\"false\"\r\n                >\r\n                  <i [class]=\"item.value | iconSmClass\"></i>\r\n                  <div class=\"ms-3 text-truncate\">\r\n                    {{ item.label }}\r\n                  </div>\r\n                </div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n            <label for=\"default-fluid-wagon\">{{\r\n              'settings.defaultFluidWagon' | translate\r\n            }}</label>\r\n          </div>\r\n        </div>\r\n        <div\r\n          *ngIf=\"\r\n            vm.data.fuelIds[FuelType.Chemical] &&\r\n            vm.data.fuelIds[FuelType.Chemical].length > 1 &&\r\n            vm.data.game !== Game.Satisfactory\r\n          \"\r\n          class=\"mt-3 py-2\"\r\n        >\r\n          <div\r\n            class=\"p-float-label\"\r\n            [pTooltip]=\"'settings.chemicalFuelTooltip' | translate\"\r\n          >\r\n            <p-dropdown\r\n              labDropdownBase\r\n              inputId=\"chemical-fuel\"\r\n              [ngModel]=\"vm.settings.fuelId\"\r\n              [options]=\"vm.options.chemicalFuels\"\r\n              (onChange)=\"setFuel($event.value, vm.data.defaults?.fuelId)\"\r\n            >\r\n              <ng-template pTemplate=\"selectedItem\" let-item>\r\n                <div class=\"d-flex align-items-center h-100\">\r\n                  <i [class]=\"item.value | iconSmClass\"></i>\r\n                  <div class=\"ms-3 text-truncate\">\r\n                    {{ item.label }}\r\n                  </div>\r\n                </div>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"item\" let-item>\r\n                <div\r\n                  class=\"d-flex align-items-center py-2 w-100 h-100\"\r\n                  [pTooltip]=\"\r\n                    'tooltip.fuel'\r\n                      | translate\r\n                        : {\r\n                            name: vm.data.itemEntities[item.value].name,\r\n                            category: vm.data.fuelEntities[item.value].category,\r\n                            value: vm.data.fuelEntities[item.value].value\r\n                          }\r\n                  \"\r\n                  [escape]=\"false\"\r\n                >\r\n                  <i [class]=\"item.value | iconSmClass\"></i>\r\n                  <div class=\"ms-3 text-truncate\">\r\n                    {{ item.label }}\r\n                  </div>\r\n                </div>\r\n              </ng-template>\r\n            </p-dropdown>\r\n            <label for=\"chemical-fuel\">{{\r\n              'settings.chemicalFuel' | translate\r\n            }}</label>\r\n          </div>\r\n        </div>\r\n        <ng-container *ngIf=\"vm.data.game === Game.Factorio\">\r\n          <div class=\"mt-3 py-2\">\r\n            <div\r\n              class=\"p-float-label\"\r\n              [pTooltip]=\"'settings.pipeFlowRateTooltip' | translate\"\r\n            >\r\n              <p-inputNumber\r\n                #flowRateInput\r\n                inputId=\"pipe-flow-rate\"\r\n                [suffix]=\"' ' + ('settings.flowRateUnit' | translate)\"\r\n                [min]=\"1\"\r\n                [step]=\"100\"\r\n                [showButtons]=\"true\"\r\n                [ngModel]=\"vm.settings.flowRate\"\r\n                (onBlur)=\"setFlowRate(flowRateInput.value)\"\r\n              ></p-inputNumber>\r\n              <label for=\"pipe-flow-rate\">{{\r\n                'settings.pipeFlowRate' | translate\r\n              }}</label>\r\n              <small class=\"position-absolute end-0 bottom-100 me-1 mb-1\">\r\n                <a\r\n                  href=\"https://wiki.factorio.com/Fluid_system#Pipelines\"\r\n                  target=\"_blank\"\r\n                  >Wiki</a\r\n                >\r\n              </small>\r\n            </div>\r\n          </div>\r\n          <div class=\"mt-3 py-2\">\r\n            <div\r\n              class=\"p-float-label\"\r\n              [pTooltip]=\"'settings.inserterTargetTooltip' | translate\"\r\n            >\r\n              <p-dropdown\r\n                labDropdownTranslate\r\n                inputId=\"inserter-target\"\r\n                [ngModel]=\"vm.settings.inserterTarget\"\r\n                [options]=\"inserterTargetOptions\"\r\n                (onChange)=\"setInserterTarget($event.value)\"\r\n              >\r\n              </p-dropdown>\r\n              <label for=\"inserter-target\">{{\r\n                'settings.inserterTarget' | translate\r\n              }}</label>\r\n            </div>\r\n          </div>\r\n        </ng-container>\r\n      </div>\r\n      <div\r\n        *ngIf=\"\r\n          vm.data.game === Game.Factorio ||\r\n          vm.data.game === Game.DysonSphereProgram\r\n        \"\r\n        class=\"mb-2\"\r\n      >\r\n        <h3>{{ 'settings.bonuses' | translate }}</h3>\r\n        <ng-container *ngIf=\"vm.data.game === Game.DysonSphereProgram\">\r\n          <div class=\"mt-3 py-2\">\r\n            <div\r\n              class=\"p-float-label\"\r\n              [pTooltip]=\"'settings.miningSpeedTooltip' | translate\"\r\n            >\r\n              <p-inputNumber\r\n                #miningBonusInput\r\n                inputId=\"mining-speed\"\r\n                suffix=\"%\"\r\n                [min]=\"100\"\r\n                [step]=\"10\"\r\n                [showButtons]=\"true\"\r\n                [ngModel]=\"vm.settings.miningBonus + 100\"\r\n                (onBlur)=\"setMiningBonus(miningBonusInput.value - 100)\"\r\n              ></p-inputNumber>\r\n              <label for=\"mining-speed\">{{\r\n                'settings.miningSpeed' | translate\r\n              }}</label>\r\n            </div>\r\n          </div>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"vm.data.game === Game.Factorio\">\r\n          <div class=\"mt-3 py-2\">\r\n            <div\r\n              class=\"p-float-label\"\r\n              [pTooltip]=\"'settings.miningProductivityTooltip' | translate\"\r\n            >\r\n              <p-inputNumber\r\n                #miningProdInput\r\n                inputId=\"mining-productivity\"\r\n                prefix=\"+\"\r\n                suffix=\"%\"\r\n                [min]=\"0\"\r\n                [step]=\"10\"\r\n                [showButtons]=\"true\"\r\n                [ngModel]=\"vm.settings.miningBonus\"\r\n                (onBlur)=\"setMiningBonus(miningProdInput.value)\"\r\n              ></p-inputNumber>\r\n              <label for=\"mining-productivity\">{{\r\n                'settings.miningProductivity' | translate\r\n              }}</label>\r\n            </div>\r\n          </div>\r\n          <div class=\"mt-3 py-2\">\r\n            <div\r\n              class=\"p-float-label\"\r\n              [pTooltip]=\"'settings.researchSpeedTooltip' | translate\"\r\n            >\r\n              <p-dropdown\r\n                labDropdownTranslate\r\n                inputId=\"research-speed\"\r\n                [ngModel]=\"vm.settings.researchSpeed\"\r\n                [options]=\"researchSpeedOptions\"\r\n                (onChange)=\"setResearchSpeed($event.value)\"\r\n              >\r\n              </p-dropdown>\r\n              <label for=\"research-speed\">{{\r\n                'settings.researchSpeed' | translate\r\n              }}</label>\r\n            </div>\r\n          </div>\r\n          <div class=\"mt-3 py-2\">\r\n            <div\r\n              class=\"p-float-label\"\r\n              [pTooltip]=\"'settings.inserterCapacityTooltip' | translate\"\r\n            >\r\n              <p-dropdown\r\n                labDropdownTranslate\r\n                inputId=\"inserter-capacity\"\r\n                [ngModel]=\"vm.settings.inserterCapacity\"\r\n                [options]=\"inserterCapacityOptions\"\r\n                (onChange)=\"setInserterCapacity($event.value)\"\r\n              >\r\n              </p-dropdown>\r\n              <label for=\"inserter-capacity\">{{\r\n                'settings.inserterCapacity' | translate\r\n              }}</label>\r\n            </div>\r\n          </div>\r\n        </ng-container>\r\n      </div>\r\n      <div class=\"mb-2\">\r\n        <h3>{{ 'settings.display' | translate }}</h3>\r\n        <button\r\n          pButton\r\n          pRipple\r\n          type=\"button\"\r\n          class=\"my-2\"\r\n          icon=\"fa-solid fa-table-columns\"\r\n          [label]=\"'settings.openColumnSettings' | translate\"\r\n          (click)=\"contentSvc.showColumns$.next()\"\r\n        ></button>\r\n        <div class=\"mt-3 py-2\">\r\n          <span\r\n            class=\"p-float-label\"\r\n            [pTooltip]=\"'settings.displayRateTooltip' | translate\"\r\n          >\r\n            <p-dropdown\r\n              labDropdownTranslate\r\n              inputId=\"display-rate\"\r\n              [ngModel]=\"vm.settings.displayRate\"\r\n              [options]=\"displayRateOptions\"\r\n              (onChange)=\"setDisplayRate($event.value, vm.settings.displayRate)\"\r\n            >\r\n            </p-dropdown>\r\n            <label for=\"display-rate\">{{\r\n              'settings.displayRate' | translate\r\n            }}</label>\r\n          </span>\r\n        </div>\r\n        <div *ngIf=\"vm.columns[Column.Power].show\" class=\"mt-3 py-2\">\r\n          <span\r\n            class=\"p-float-label\"\r\n            [pTooltip]=\"'settings.powerUnitTooltip' | translate\"\r\n          >\r\n            <p-dropdown\r\n              labDropdownTranslate\r\n              inputId=\"power-unit\"\r\n              [ngModel]=\"vm.preferences.powerUnit\"\r\n              [options]=\"powerUnitOptions\"\r\n              (onChange)=\"setPowerUnit($event.value)\"\r\n            >\r\n            </p-dropdown>\r\n            <label for=\"power-unit\">{{\r\n              'settings.powerUnit' | translate\r\n            }}</label>\r\n          </span>\r\n        </div>\r\n        <div class=\"mt-3 py-2\">\r\n          <div class=\"text-end\"></div>\r\n          <div\r\n            class=\"p-float-label\"\r\n            [pTooltip]=\"'settings.languageTooltip' | translate\"\r\n          >\r\n            <p-dropdown\r\n              labDropdownTranslate\r\n              inputId=\"language\"\r\n              [ngModel]=\"vm.preferences.language\"\r\n              [options]=\"languageOptions\"\r\n              (onChange)=\"setLanguage($event.value)\"\r\n            >\r\n            </p-dropdown>\r\n            <label for=\"language\">{{ 'settings.language' | translate }}</label>\r\n            <small class=\"position-absolute end-0 bottom-100 me-1 mb-1\">\r\n              <a\r\n                href=\"https://github.com/factoriolab/factoriolab/wiki/Translating-FactorioLab\"\r\n                target=\"_blank\"\r\n                >{{ 'settings.helpTranslate' | translate }}</a\r\n              >\r\n            </small>\r\n          </div>\r\n        </div>\r\n        <div class=\"mt-3 py-2\">\r\n          <div\r\n            class=\"p-float-label\"\r\n            [pTooltip]=\"'settings.themeTooltip' | translate\"\r\n          >\r\n            <p-dropdown\r\n              labDropdownTranslate\r\n              inputId=\"theme\"\r\n              [ngModel]=\"vm.preferences.theme\"\r\n              [options]=\"themeOptions\"\r\n              (onChange)=\"setTheme($event.value)\"\r\n            >\r\n            </p-dropdown>\r\n            <label for=\"theme\">{{ 'settings.theme' | translate }}</label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"mb-2\">\r\n        <h3>{{ 'settings.advanced' | translate }}</h3>\r\n        <div class=\"mt-3 py-2\">\r\n          <div\r\n            class=\"p-float-label\"\r\n            [pTooltip]=\"'settings.simplexSolverTooltip' | translate\"\r\n          >\r\n            <p-dropdown\r\n              labDropdownTranslate\r\n              inputId=\"simplex-solver\"\r\n              [ngModel]=\"vm.preferences.simplexType\"\r\n              [options]=\"simplexTypeOptions\"\r\n              (onChange)=\"setSimplexType($event.value)\"\r\n            >\r\n            </p-dropdown>\r\n            <label for=\"inserter-capacity\">{{\r\n              'settings.simplexSolver' | translate\r\n            }}</label>\r\n          </div>\r\n          <div class=\"p-error\">\r\n            <small *ngIf=\"vm.preferences.simplexType === SimplexType.Disabled\">\r\n              {{ 'settings.simplexSolverDisabledInfo' | translate }}\r\n            </small>\r\n            <small\r\n              *ngIf=\"vm.preferences.simplexType === SimplexType.WasmFloat64\"\r\n            >\r\n              {{ 'settings.simplexSolverWasmFloat64Info' | translate }}\r\n            </small>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </p-scrollPanel>\r\n</div>\r\n","import { Directive, Input, OnInit, Self } from '@angular/core';\r\nimport { Dropdown } from 'primeng/dropdown';\r\n\r\n@Directive({\r\n  selector: '[labDropdownBase]',\r\n})\r\nexport class DropdownBaseDirective implements OnInit {\r\n  @Input() labDropdownBase: 'icon' | '' | undefined;\r\n\r\n  constructor(@Self() private readonly pDropdown: Dropdown) {}\r\n\r\n  ngOnInit(): void {\r\n    this.pDropdown.appendTo = 'body';\r\n    this.pDropdown.filter = true;\r\n    this.pDropdown.scrollHeight = '40vh';\r\n    this.pDropdown.panelStyleClass = 'tooltip';\r\n    if (this.labDropdownBase) {\r\n      this.pDropdown.styleClass = this.labDropdownBase;\r\n    }\r\n  }\r\n}\r\n","import { Directive, OnInit, Self, TemplateRef } from '@angular/core';\r\nimport { Dropdown } from 'primeng/dropdown';\r\nimport { combineLatest, filter, first } from 'rxjs';\r\n\r\nimport { ContentService } from '~/services';\r\n\r\n@Directive({\r\n  selector: '[labDropdownTranslate]',\r\n})\r\nexport class DropdownTranslateDirective implements OnInit {\r\n  constructor(\r\n    @Self() private readonly pDropdown: Dropdown,\r\n    private contentSvc: ContentService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.pDropdown.appendTo = 'body';\r\n    combineLatest([\r\n      this.contentSvc.translateSelectedItem$.pipe(\r\n        filter((t): t is TemplateRef<any> => t != null)\r\n      ),\r\n      this.contentSvc.translateItem$.pipe(\r\n        filter((t): t is TemplateRef<any> => t != null)\r\n      ),\r\n    ])\r\n      .pipe(first())\r\n      .subscribe(([selectedItemTemplate, itemTemplate]) => {\r\n        this.pDropdown.selectedItemTemplate = selectedItemTemplate;\r\n        this.pDropdown.itemTemplate = itemTemplate;\r\n      });\r\n  }\r\n}\r\n","import { Directive, Input } from '@angular/core';\r\nimport {\r\n  AbstractControl,\r\n  NG_VALIDATORS,\r\n  ValidationErrors,\r\n  Validator,\r\n} from '@angular/forms';\r\n\r\nimport { Rational } from '~/models';\r\n\r\n@Directive({\r\n  selector: '[labValidateNumber][ngModel]',\r\n  providers: [\r\n    {\r\n      provide: NG_VALIDATORS,\r\n      useExisting: ValidateNumberDirective,\r\n      multi: true,\r\n    },\r\n  ],\r\n})\r\nexport class ValidateNumberDirective implements Validator {\r\n  @Input() set labValidateMinimum(value: string) {\r\n    this.minimum = Rational.fromString(value);\r\n  }\r\n\r\n  minimum = Rational.zero;\r\n\r\n  validate(control: AbstractControl): ValidationErrors | null {\r\n    if (control.value == null) {\r\n      return null;\r\n    }\r\n    try {\r\n      const rational = Rational.fromString(control.value);\r\n      if (rational.gte(this.minimum)) {\r\n        return null;\r\n      }\r\n    } catch {}\r\n    return {\r\n      validateNumber: {\r\n        valid: false,\r\n      },\r\n    };\r\n  }\r\n}\r\n","export const DEFAULT_PRECISION = 1;\r\nexport const STATE_KEY = 'state';\r\nexport const APP = 'FactorioLab';\r\nexport const WARNING_HANG = `No solution found in 5 seconds. Continue trying to solve?\r\nTo avoid this issue, try the WASM Float64 simplex solver, or disable recycling recipes.\r\n\\u26a0 Warning: The browser may hang if you choose to continue.\r\n\r\n(Click \"OK\" to keep trying, click \"Cancel\" to quit)`;\r\n","import { Rational } from '../rational';\r\n\r\nexport interface Beacon {\r\n  effectivity: number;\r\n  modules: number;\r\n  range: number;\r\n  /** Energy type, e.g. electric or burner */\r\n  type?: string;\r\n  /** Fuel category, e.g. chemical or nuclear */\r\n  category?: string;\r\n  /** Energy consumption in kW */\r\n  usage?: number;\r\n}\r\n\r\nexport class RationalBeacon {\r\n  effectivity: Rational;\r\n  modules: number;\r\n  range: number;\r\n  /** Energy type, e.g. electric or burner */\r\n  type?: string;\r\n  /** Fuel category, e.g. chemical or nuclear */\r\n  category?: string;\r\n  /** Energy consumption in kW */\r\n  usage?: Rational;\r\n\r\n  constructor(data: Beacon) {\r\n    this.effectivity = Rational.fromNumber(data.effectivity);\r\n    this.modules = data.modules;\r\n    this.range = data.range;\r\n    if (data.type) {\r\n      this.type = data.type;\r\n    }\r\n    if (data.category) {\r\n      this.category = data.category;\r\n    }\r\n    if (data.usage != null) {\r\n      this.usage = Rational.fromNumber(data.usage);\r\n    }\r\n  }\r\n}\r\n","import { Rational } from '../rational';\r\n\r\nexport interface Belt {\r\n  speed: number | string;\r\n}\r\n\r\nexport class RationalBelt {\r\n  speed: Rational;\r\n\r\n  constructor(data: Belt) {\r\n    this.speed = Rational.fromJson(data.speed);\r\n  }\r\n}\r\n","import { Rational } from '../rational';\r\n\r\nexport interface CargoWagon {\r\n  size: number;\r\n}\r\n\r\nexport class RationalCargoWagon {\r\n  size: Rational;\r\n\r\n  constructor(data: CargoWagon) {\r\n    this.size = Rational.fromNumber(data.size);\r\n  }\r\n}\r\n","import { Entities } from '../entities';\r\nimport { Rational } from '../rational';\r\nimport { RationalSilo, Silo } from './silo';\r\n\r\nexport interface Factory {\r\n  speed?: number;\r\n  modules?: number;\r\n  /** Energy type, e.g. electric or burner */\r\n  type?: string;\r\n  /** Fuel category, e.g. chemical or nuclear */\r\n  category?: string;\r\n  /** Energy consumption in kW */\r\n  usage?: number;\r\n  /** Drain in kW */\r\n  drain?: number | string;\r\n  /** Pollution in #/m */\r\n  pollution?: number;\r\n  mining?: boolean;\r\n  research?: boolean;\r\n  silo?: Silo;\r\n  overclockFactor?: number;\r\n  consumption?: Entities<number | string>;\r\n}\r\n\r\nexport class RationalFactory {\r\n  speed?: Rational;\r\n  modules?: number;\r\n  /** Energy type, e.g. electric or burner */\r\n  type?: string;\r\n  /** Fuel category, e.g. chemical or nuclear */\r\n  category?: string;\r\n  /** Energy consumption in kW */\r\n  usage?: Rational;\r\n  drain?: Rational;\r\n  pollution?: Rational;\r\n  mining?: boolean;\r\n  research?: boolean;\r\n  silo?: RationalSilo;\r\n  overclockFactor?: number;\r\n  consumption?: Entities<Rational>;\r\n\r\n  constructor(data: Factory) {\r\n    if (data.speed != null) {\r\n      this.speed = Rational.fromNumber(data.speed);\r\n    }\r\n    if (data.modules != null) {\r\n      this.modules = Math.round(data.modules);\r\n    }\r\n    if (data.type) {\r\n      this.type = data.type;\r\n    }\r\n    if (data.category) {\r\n      this.category = data.category;\r\n    }\r\n    if (data.usage != null) {\r\n      this.usage = Rational.fromNumber(data.usage);\r\n    }\r\n    if (data.drain != null) {\r\n      if (typeof data.drain === 'string') {\r\n        this.drain = Rational.fromString(data.drain);\r\n      } else {\r\n        this.drain = Rational.fromNumber(data.drain);\r\n      }\r\n    }\r\n    if (data.pollution != null) {\r\n      this.pollution = Rational.fromNumber(data.pollution);\r\n    }\r\n    if (data.mining) {\r\n      this.mining = data.mining;\r\n    }\r\n    if (data.research) {\r\n      this.research = data.research;\r\n    }\r\n    if (data.silo) {\r\n      this.silo = new RationalSilo(data.silo);\r\n    }\r\n    if (data.overclockFactor) {\r\n      this.overclockFactor = data.overclockFactor;\r\n    }\r\n    if (data.consumption) {\r\n      const consumption = data.consumption;\r\n      this.consumption = Object.keys(consumption).reduce(\r\n        (e: Entities<Rational>, i) => {\r\n          e[i] = Rational.fromJson(consumption[i]);\r\n          return e;\r\n        },\r\n        {}\r\n      );\r\n    }\r\n  }\r\n}\r\n","import { Rational } from '../rational';\r\n\r\nexport interface FluidWagon {\r\n  capacity: number;\r\n}\r\n\r\nexport class RationalFluidWagon {\r\n  capacity: Rational;\r\n\r\n  constructor(data: FluidWagon) {\r\n    this.capacity = Rational.fromNumber(data.capacity);\r\n  }\r\n}\r\n","import { Rational } from '../rational';\r\n\r\nexport interface Fuel {\r\n  category: string;\r\n  value: number;\r\n  result?: string;\r\n}\r\n\r\nexport class RationalFuel {\r\n  category: string;\r\n  value: Rational;\r\n  result?: string;\r\n\r\n  constructor(data: Fuel) {\r\n    this.category = data.category;\r\n    this.value = Rational.fromNumber(data.value);\r\n    if (data.result) {\r\n      this.result = data.result;\r\n    }\r\n  }\r\n}\r\n","export * from './beacon';\r\nexport * from './belt';\r\nexport * from './cargo-wagon';\r\nexport * from './category';\r\nexport * from '../dataset';\r\nexport * from './factory';\r\nexport * from './fluid-wagon';\r\nexport * from './fuel';\r\nexport * from './icon';\r\nexport * from './item';\r\nexport * from './mod-data';\r\nexport * from './mod-defaults';\r\nexport * from './mod-hash';\r\nexport * from './mod-i18n';\r\nexport * from './module';\r\nexport * from './recipe';\r\n","import { Rational } from '../rational';\r\nimport { Beacon, RationalBeacon } from './beacon';\r\nimport { Belt, RationalBelt } from './belt';\r\nimport { CargoWagon, RationalCargoWagon } from './cargo-wagon';\r\nimport { Factory, RationalFactory } from './factory';\r\nimport { FluidWagon, RationalFluidWagon } from './fluid-wagon';\r\nimport { Fuel, RationalFuel } from './fuel';\r\nimport { Module, RationalModule } from './module';\r\n\r\nexport interface Item {\r\n  id: string;\r\n  name: string;\r\n  category: string;\r\n  row: number;\r\n  stack?: number;\r\n  beacon?: Beacon;\r\n  belt?: Belt;\r\n  pipe?: Belt;\r\n  factory?: Factory;\r\n  module?: Module;\r\n  fuel?: Fuel;\r\n  cargoWagon?: CargoWagon;\r\n  fluidWagon?: FluidWagon;\r\n  /** Used to link the item to an alternate icon id */\r\n  icon?: string;\r\n  /** Used to add extra text to an already defined icon */\r\n  iconText?: string;\r\n}\r\n\r\nexport class RationalItem {\r\n  id: string;\r\n  name: string;\r\n  category: string;\r\n  row: number;\r\n  stack?: Rational;\r\n  beacon?: RationalBeacon;\r\n  belt?: RationalBelt;\r\n  pipe?: RationalBelt;\r\n  factory?: RationalFactory;\r\n  module?: RationalModule;\r\n  fuel?: RationalFuel;\r\n  cargoWagon?: RationalCargoWagon;\r\n  fluidWagon?: RationalFluidWagon;\r\n  /** Used to link the item to an alternate icon id */\r\n  icon?: string;\r\n  /** Used to add extra text to an already defined icon */\r\n  iconText?: string;\r\n\r\n  constructor(data: Item) {\r\n    this.id = data.id;\r\n    this.name = data.name;\r\n    this.category = data.category;\r\n    this.row = Math.round(data.row);\r\n    if (data.stack) {\r\n      this.stack = Rational.fromNumber(data.stack);\r\n    }\r\n    if (data.beacon) {\r\n      this.beacon = new RationalBeacon(data.beacon);\r\n    }\r\n    if (data.belt) {\r\n      this.belt = new RationalBelt(data.belt);\r\n    }\r\n    if (data.pipe) {\r\n      this.pipe = new RationalBelt(data.pipe);\r\n    }\r\n    if (data.factory) {\r\n      this.factory = new RationalFactory(data.factory);\r\n    }\r\n    if (data.module) {\r\n      this.module = new RationalModule(data.module);\r\n    }\r\n    if (data.fuel) {\r\n      this.fuel = new RationalFuel(data.fuel);\r\n    }\r\n    if (data.cargoWagon) {\r\n      this.cargoWagon = new RationalCargoWagon(data.cargoWagon);\r\n    }\r\n    if (data.fluidWagon) {\r\n      this.fluidWagon = new RationalFluidWagon(data.fluidWagon);\r\n    }\r\n    if (data.icon) {\r\n      this.icon = data.icon;\r\n    }\r\n    if (data.iconText) {\r\n      this.iconText = data.iconText;\r\n    }\r\n  }\r\n}\r\n","import { Rational } from '../rational';\r\n\r\nexport interface Module {\r\n  speed?: number;\r\n  productivity?: number;\r\n  consumption?: number;\r\n  pollution?: number;\r\n  limitation?: string;\r\n  sprays?: number;\r\n  proliferator?: string;\r\n}\r\n\r\nexport class RationalModule {\r\n  speed?: Rational;\r\n  productivity?: Rational;\r\n  consumption?: Rational;\r\n  pollution?: Rational;\r\n  limitation?: string;\r\n  sprays?: Rational;\r\n  proliferator?: string;\r\n\r\n  constructor(data: Module) {\r\n    if (data.speed) {\r\n      this.speed = Rational.fromNumber(data.speed);\r\n    }\r\n    if (data.productivity) {\r\n      this.productivity = Rational.fromNumber(data.productivity);\r\n    }\r\n    if (data.consumption) {\r\n      this.consumption = Rational.fromNumber(data.consumption);\r\n    }\r\n    if (data.pollution) {\r\n      this.pollution = Rational.fromNumber(data.pollution);\r\n    }\r\n    if (data.limitation) {\r\n      this.limitation = data.limitation;\r\n    }\r\n    if (data.sprays) {\r\n      this.sprays = Rational.fromNumber(data.sprays);\r\n    }\r\n    if (data.proliferator) {\r\n      this.proliferator = data.proliferator;\r\n    }\r\n  }\r\n}\r\n","import { Entities } from '../entities';\r\nimport { Rational } from '../rational';\r\n\r\nexport interface Recipe {\r\n  id: string;\r\n  name: string;\r\n  time: number;\r\n  producers: string[];\r\n  in: Entities<number | string>;\r\n  out: Entities<number | string>;\r\n  /** Denotes amount of output that is not affected by productivity */\r\n  catalyst?: Entities<number | string>;\r\n  cost?: number;\r\n  /** If recipe is a rocket launch, indicates the rocket part recipe used */\r\n  part?: string;\r\n  /** Used to link the recipe to an alternate icon id */\r\n  icon?: string;\r\n  /** Used to override the factory's usage for this recipe */\r\n  usage?: number | string;\r\n}\r\n\r\nexport class RationalRecipe {\r\n  id: string;\r\n  name: string;\r\n  time: Rational;\r\n  producers: string[];\r\n  productivity = Rational.one;\r\n  adjustProd = false;\r\n  in: Entities<Rational>;\r\n  out: Entities<Rational>;\r\n  /** Denotes amount of output that is not affected by productivity */\r\n  catalyst?: Entities<Rational>;\r\n  cost?: Rational;\r\n  /** If recipe is a rocket launch, indicates the rocket part recipe used */\r\n  part?: string;\r\n  usage?: Rational;\r\n  drain?: Rational;\r\n  consumption?: Rational;\r\n  pollution?: Rational;\r\n\r\n  constructor(data: Recipe) {\r\n    this.id = data.id;\r\n    this.name = data.name;\r\n    this.time = Rational.fromNumber(data.time);\r\n    this.producers = data.producers;\r\n    this.in = Object.keys(data.in).reduce((e: Entities<Rational>, i) => {\r\n      e[i] = Rational.fromJson(data.in[i]);\r\n      return e;\r\n    }, {});\r\n    this.out = Object.keys(data.out).reduce((e: Entities<Rational>, i) => {\r\n      e[i] = Rational.fromJson(data.out[i]);\r\n      return e;\r\n    }, {});\r\n\r\n    if (data.catalyst) {\r\n      const catalyst = data.catalyst; // Store null-checked value\r\n      this.catalyst = Object.keys(catalyst).reduce(\r\n        (e: Entities<Rational>, i) => {\r\n          e[i] = Rational.fromJson(catalyst[i]);\r\n          return e;\r\n        },\r\n        {}\r\n      );\r\n    }\r\n    if (data.cost) {\r\n      this.cost = Rational.fromNumber(data.cost);\r\n    }\r\n    if (data.part) {\r\n      this.part = data.part;\r\n    }\r\n    if (data.usage != null) {\r\n      if (typeof data.usage === 'string') {\r\n        this.usage = Rational.fromString(data.usage);\r\n      } else {\r\n        this.usage = Rational.fromNumber(data.usage);\r\n      }\r\n    }\r\n  }\r\n\r\n  produces(id: string): boolean {\r\n    if (this.out[id]) {\r\n      // Recipe declares this as output, check inputs\r\n      return this.in[id] == null || this.in[id].lt(this.out[id]);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  producesOnly(id: string): boolean {\r\n    return Object.keys(this.out).length === 1 && this.produces(id);\r\n  }\r\n\r\n  output(id: string): Rational {\r\n    return (this.out[id] ?? Rational.zero).sub(this.in[id] ?? Rational.zero);\r\n  }\r\n}\r\n","import { Rational } from '../rational';\r\n\r\nconst secs = Rational.from(60);\r\n\r\nexport interface Silo {\r\n  /** Number of rocket parts required */\r\n  parts: number;\r\n  /** Launch animation delay, in ticks */\r\n  launch: number;\r\n}\r\n\r\nexport class RationalSilo {\r\n  /** Number of rocket parts required */\r\n  parts: Rational;\r\n  /** Launch animation delay, in seconds */\r\n  launch: Rational;\r\n\r\n  constructor(data: Silo) {\r\n    this.parts = Rational.fromNumber(data.parts);\r\n    this.launch = Rational.fromNumber(data.launch).div(secs);\r\n  }\r\n}\r\n","export type Entities<T = string> = Record<string, T>;\r\n\r\nexport function toEntities<T extends { id: string }>(\r\n  value: T[],\r\n  init: Entities<T> = {}\r\n): Entities<T> {\r\n  return value.reduce((e: Entities<T>, v) => {\r\n    e[v.id] = v;\r\n    return e;\r\n  }, init);\r\n}\r\n\r\nexport function toBoolEntities(\r\n  value: string[],\r\n  init: Entities<boolean> = {}\r\n): Entities<boolean> {\r\n  return value.reduce((e: Entities<boolean>, v) => {\r\n    e[v] = true;\r\n    return e;\r\n  }, init);\r\n}\r\n","import { SelectItem } from 'primeng/api';\r\n\r\nimport { Game } from './game';\r\n\r\nexport enum Column {\r\n  Tree = 'Tree',\r\n  Surplus = 'Surplus',\r\n  Items = 'Items',\r\n  Belts = 'Belts',\r\n  Wagons = 'Wagons',\r\n  Factories = 'Factories',\r\n  Beacons = 'Beacons',\r\n  Power = 'Power',\r\n  Pollution = 'Pollution',\r\n  Link = 'Link',\r\n}\r\n\r\nexport const allColumns = [\r\n  Column.Tree,\r\n  Column.Items,\r\n  Column.Belts,\r\n  Column.Wagons,\r\n  Column.Factories,\r\n  Column.Beacons,\r\n  Column.Power,\r\n  Column.Pollution,\r\n  Column.Link,\r\n];\r\n\r\nexport const precisionColumns = [\r\n  Column.Items,\r\n  Column.Belts,\r\n  Column.Wagons,\r\n  Column.Factories,\r\n  Column.Power,\r\n  Column.Pollution,\r\n];\r\n\r\nexport function columnOptions(game: Game): SelectItem<Column>[] {\r\n  const result = allColumns.map(\r\n    (id): SelectItem<Column> => ({\r\n      label: id,\r\n      value: id,\r\n      disabled: id === Column.Items || id === Column.Factories,\r\n    })\r\n  );\r\n\r\n  switch (game) {\r\n    case Game.Factorio:\r\n      return result;\r\n    case Game.CaptainOfIndustry:\r\n      return result.filter(\r\n        (i) =>\r\n          i.value !== Column.Beacons &&\r\n          i.value !== Column.Power &&\r\n          i.value !== Column.Pollution &&\r\n          i.value !== Column.Wagons\r\n      );\r\n    case Game.DysonSphereProgram:\r\n      return result.filter(\r\n        (i) =>\r\n          i.value !== Column.Beacons &&\r\n          i.value !== Column.Pollution &&\r\n          i.value !== Column.Wagons\r\n      );\r\n    case Game.Satisfactory:\r\n      return result.filter(\r\n        (i) => i.value !== Column.Beacons && i.value !== Column.Pollution\r\n      );\r\n    case Game.Foxhole:\r\n      return result.filter(\r\n        (i) => i.value !== Column.Beacons && i.value !== Column.Pollution\r\n      );\r\n  }\r\n\r\n  return [];\r\n}\r\n","import { SelectItem } from 'primeng/api';\r\n\r\nimport { Rational } from '../rational';\r\n\r\nexport enum DisplayRate {\r\n  PerSecond = 1,\r\n  PerMinute = 60,\r\n  PerHour = 3600,\r\n}\r\n\r\nexport const displayRateOptions: SelectItem<DisplayRate>[] = [\r\n  { value: DisplayRate.PerSecond, label: 'options.displayRate.perSecond' },\r\n  { value: DisplayRate.PerMinute, label: 'options.displayRate.perMinute' },\r\n  { value: DisplayRate.PerHour, label: 'options.displayRate.perHour' },\r\n];\r\n\r\nexport interface DisplayRateInfo {\r\n  option: DisplayRate;\r\n  label: string;\r\n  value: Rational;\r\n}\r\n\r\nexport const displayRateInfo: Record<DisplayRate, DisplayRateInfo> = {\r\n  [DisplayRate.PerSecond]: {\r\n    option: DisplayRate.PerSecond,\r\n    label: '/s',\r\n    value: Rational.from(DisplayRate.PerSecond),\r\n  },\r\n  [DisplayRate.PerMinute]: {\r\n    option: DisplayRate.PerMinute,\r\n    label: '/m',\r\n    value: Rational.from(DisplayRate.PerMinute),\r\n  },\r\n  [DisplayRate.PerHour]: {\r\n    option: DisplayRate.PerHour,\r\n    label: '/h',\r\n    value: Rational.from(DisplayRate.PerHour),\r\n  },\r\n};\r\n","export enum EnergyType {\r\n  Electric = 'electric',\r\n  Burner = 'burner',\r\n}\r\n","export enum FuelType {\r\n  Chemical = 'chemical',\r\n  Nuclear = 'nuclear',\r\n}\r\n","import { SelectItem } from 'primeng/api';\r\n\r\nexport enum Game {\r\n  None = 'None',\r\n  Factorio = 'Factorio',\r\n  CaptainOfIndustry = 'CaptainOfIndustry',\r\n  DysonSphereProgram = 'DysonSphereProgram',\r\n  Satisfactory = 'Satisfactory',\r\n  Foxhole = 'Foxhole',\r\n}\r\n\r\nexport const games = [\r\n  Game.Factorio,\r\n  Game.DysonSphereProgram,\r\n  Game.Satisfactory,\r\n  Game.Foxhole,\r\n  Game.CaptainOfIndustry,\r\n];\r\n\r\nexport const gameOptions: SelectItem<Game>[] = [\r\n  { value: Game.Factorio, label: 'options.game.factorio' },\r\n  { value: Game.DysonSphereProgram, label: 'options.game.dysonSphereProgram' },\r\n  { value: Game.Satisfactory, label: 'options.game.satisfactory' },\r\n  { value: Game.Foxhole, label: 'options.game.foxhole' },\r\n  { value: Game.CaptainOfIndustry, label: 'options.game.captainOfIndustry' },\r\n];\r\n","export * from './column';\r\nexport * from './display-rate';\r\nexport * from './energy-type';\r\nexport * from './fuel-type';\r\nexport * from './game';\r\nexport * from './id-type';\r\nexport * from './inserter-capacity';\r\nexport * from './inserter-target';\r\nexport * from './item-id';\r\nexport * from './language';\r\nexport * from './matrix-result-type';\r\nexport * from './power-unit';\r\nexport * from './preset';\r\nexport * from './rate-type';\r\nexport * from './recipe-field';\r\nexport * from './research-speed';\r\nexport * from './simplex-type';\r\nexport * from './step-detail-tab';\r\nexport * from './theme';\r\n","import { SelectItem } from 'primeng/api';\r\n\r\nexport enum InserterCapacity {\r\n  Capacity0,\r\n  Capacity2,\r\n  Capacity7,\r\n}\r\n\r\nexport const inserterCapacityOptions: SelectItem<InserterCapacity>[] = [\r\n  {\r\n    label: 'options.inserterCapacity.capacity0',\r\n    value: InserterCapacity.Capacity0,\r\n  },\r\n  {\r\n    label: 'options.inserterCapacity.capacity2',\r\n    value: InserterCapacity.Capacity2,\r\n  },\r\n  {\r\n    label: 'options.inserterCapacity.capacity7',\r\n    value: InserterCapacity.Capacity7,\r\n  },\r\n];\r\n","import { SelectItem } from 'primeng/api';\r\n\r\nexport enum InserterTarget {\r\n  Chest,\r\n  ExpressTransportBelt,\r\n  FastTransportBelt,\r\n  TransportBelt,\r\n}\r\n\r\nexport const inserterTargetOptions: SelectItem<InserterTarget>[] = [\r\n  { label: 'options.inserterTarget.chest', value: InserterTarget.Chest },\r\n  {\r\n    label: 'options.inserterTarget.expressTransportBelt',\r\n    value: InserterTarget.ExpressTransportBelt,\r\n  },\r\n  {\r\n    label: 'options.inserterTarget.fastTransportBelt',\r\n    value: InserterTarget.FastTransportBelt,\r\n  },\r\n  {\r\n    label: 'options.inserterTarget.transportBelt',\r\n    value: InserterTarget.TransportBelt,\r\n  },\r\n];\r\n","export enum ItemId {\r\n  FastInserter = 'fast-inserter',\r\n  Inserter = 'inserter',\r\n  LongHandedInserter = 'long-handed-inserter',\r\n  MineControlTower = 'mine-control-tower',\r\n  MiningDrill = 'mining-drill',\r\n  Module = 'module',\r\n  NuclearPowerPlant = 'nuclear-power-plant',\r\n  Pipe = 'pipe',\r\n  ProductivityLimitation = 'productivity-module',\r\n  Pumpjack = 'pumpjack',\r\n  StackInserter = 'stack-inserter',\r\n  Water = 'water',\r\n}\r\n","import { SelectItem } from 'primeng/api';\r\n\r\nexport enum Language {\r\n  English = 'en',\r\n  Chinese = 'zh',\r\n}\r\n\r\nexport const languageOptions: SelectItem<Language>[] = [\r\n  { label: 'English', value: Language.English },\r\n  { label: '简体中文 - Outdated', value: Language.Chinese },\r\n];\r\n","export enum MatrixResultType {\r\n  Skipped = 'Skipped',\r\n  Cached = 'Cached',\r\n  Cancelled = 'Cancelled',\r\n  Failed = 'Failed',\r\n  Solved = 'Solved',\r\n}\r\n","import { SelectItem } from 'primeng/api';\r\n\r\nexport enum PowerUnit {\r\n  Auto,\r\n  kW,\r\n  MW,\r\n  GW,\r\n}\r\n\r\nexport const powerUnitOptions: SelectItem<PowerUnit>[] = [\r\n  { label: 'Auto', value: PowerUnit.Auto },\r\n  { label: 'kW', value: PowerUnit.kW },\r\n  { label: 'MW', value: PowerUnit.MW },\r\n  { label: 'GW', value: PowerUnit.GW },\r\n];\r\n","import { SelectItem } from 'primeng/api';\r\n\r\nimport { Game } from './game';\r\n\r\nexport enum Preset {\r\n  Minimum,\r\n  Modules,\r\n  Beacon8,\r\n  Beacon12,\r\n}\r\n\r\nexport function presetOptions(game: Game): SelectItem<Preset>[] {\r\n  return game === Game.Factorio\r\n    ? [\r\n        { value: Preset.Minimum, label: 'options.preset.minimum' },\r\n        { value: Preset.Modules, label: 'options.preset.modules' },\r\n        { value: Preset.Beacon8, label: 'options.preset.beacon8' },\r\n        { value: Preset.Beacon12, label: 'options.preset.beacon12' },\r\n      ]\r\n    : game === Game.CaptainOfIndustry\r\n    ? [\r\n        { value: Preset.Minimum, label: 'options.preset.minimum' },\r\n        { value: Preset.Modules, label: 'options.preset.upgraded' },\r\n      ]\r\n    : [\r\n        { value: Preset.Minimum, label: 'options.preset.minimum' },\r\n        { value: Preset.Modules, label: 'options.preset.upgraded' },\r\n        { value: Preset.Beacon8, label: 'options.preset.proliferated' },\r\n      ];\r\n}\r\n","import { SelectItem } from 'primeng/api';\r\n\r\nimport { DisplayRateInfo } from './display-rate';\r\nimport { Game } from './game';\r\n\r\nexport enum RateType {\r\n  Items,\r\n  Belts,\r\n  Wagons,\r\n  Factories,\r\n}\r\n\r\nexport function rateTypeOptions(\r\n  dispRateInfo: DisplayRateInfo,\r\n  game: Game\r\n): SelectItem<RateType>[] {\r\n  const result = [\r\n    { value: RateType.Items, label: `Items${dispRateInfo.label}` },\r\n    { value: RateType.Belts, label: 'Belts' },\r\n    { value: RateType.Wagons, label: `Wagons${dispRateInfo.label}` },\r\n    { value: RateType.Factories, label: 'Factories' },\r\n  ];\r\n\r\n  if (game === Game.DysonSphereProgram || game === Game.CaptainOfIndustry) {\r\n    return result.filter((i) => i.value !== RateType.Wagons);\r\n  }\r\n\r\n  return result;\r\n}\r\n","export enum RecipeField {\r\n  FactoryModules,\r\n  BeaconCount,\r\n  Beacon,\r\n  BeaconModules,\r\n  Overclock,\r\n}\r\n","import { SelectItem } from 'primeng/api';\r\n\r\nimport { Rational } from '../rational';\r\n\r\nexport enum ResearchSpeed {\r\n  Speed0 = 0,\r\n  Speed1 = 20,\r\n  Speed2 = 50,\r\n  Speed3 = 90,\r\n  Speed4 = 140,\r\n  Speed5 = 190,\r\n  Speed6 = 250,\r\n}\r\n\r\nexport const researchSpeedOptions: SelectItem<ResearchSpeed>[] = [\r\n  { label: 'options.researchSpeed.speed0', value: ResearchSpeed.Speed0 },\r\n  { label: 'options.researchSpeed.speed1', value: ResearchSpeed.Speed1 },\r\n  { label: 'options.researchSpeed.speed2', value: ResearchSpeed.Speed2 },\r\n  { label: 'options.researchSpeed.speed3', value: ResearchSpeed.Speed3 },\r\n  { label: 'options.researchSpeed.speed4', value: ResearchSpeed.Speed4 },\r\n  { label: 'options.researchSpeed.speed5', value: ResearchSpeed.Speed5 },\r\n  { label: 'options.researchSpeed.speed6', value: ResearchSpeed.Speed6 },\r\n];\r\n\r\nexport const researchSpeedVal = {\r\n  [ResearchSpeed.Speed0]: new Rational(BigInt(ResearchSpeed.Speed0)),\r\n  [ResearchSpeed.Speed1]: new Rational(BigInt(ResearchSpeed.Speed1)),\r\n  [ResearchSpeed.Speed2]: new Rational(BigInt(ResearchSpeed.Speed2)),\r\n  [ResearchSpeed.Speed3]: new Rational(BigInt(ResearchSpeed.Speed3)),\r\n  [ResearchSpeed.Speed4]: new Rational(BigInt(ResearchSpeed.Speed4)),\r\n  [ResearchSpeed.Speed5]: new Rational(BigInt(ResearchSpeed.Speed5)),\r\n  [ResearchSpeed.Speed6]: new Rational(BigInt(ResearchSpeed.Speed6)),\r\n};\r\n\r\nexport const researchSpeedFactor = {\r\n  [ResearchSpeed.Speed0]: researchSpeedVal[ResearchSpeed.Speed0]\r\n    .add(Rational.hundred)\r\n    .div(Rational.hundred),\r\n  [ResearchSpeed.Speed1]: researchSpeedVal[ResearchSpeed.Speed1]\r\n    .add(Rational.hundred)\r\n    .div(Rational.hundred),\r\n  [ResearchSpeed.Speed2]: researchSpeedVal[ResearchSpeed.Speed2]\r\n    .add(Rational.hundred)\r\n    .div(Rational.hundred),\r\n  [ResearchSpeed.Speed3]: researchSpeedVal[ResearchSpeed.Speed3]\r\n    .add(Rational.hundred)\r\n    .div(Rational.hundred),\r\n  [ResearchSpeed.Speed4]: researchSpeedVal[ResearchSpeed.Speed4]\r\n    .add(Rational.hundred)\r\n    .div(Rational.hundred),\r\n  [ResearchSpeed.Speed5]: researchSpeedVal[ResearchSpeed.Speed5]\r\n    .add(Rational.hundred)\r\n    .div(Rational.hundred),\r\n  [ResearchSpeed.Speed6]: researchSpeedVal[ResearchSpeed.Speed6]\r\n    .add(Rational.hundred)\r\n    .div(Rational.hundred),\r\n};\r\n","import { SelectItem } from 'primeng/api';\r\n\r\nexport enum SimplexType {\r\n  Disabled,\r\n  JsBigIntRational,\r\n  WasmFloat64,\r\n}\r\n\r\nexport const simplexTypeOptions: SelectItem<SimplexType>[] = [\r\n  {\r\n    label: 'options.simplexType.jsBigIntRational',\r\n    value: SimplexType.JsBigIntRational,\r\n  },\r\n  { label: 'options.simplexType.wasmFloat64', value: SimplexType.WasmFloat64 },\r\n  { label: 'options.simplexType.disabled', value: SimplexType.Disabled },\r\n];\r\n","import { MenuItem } from 'primeng/api';\r\n\r\nexport enum StepDetailTab {\r\n  None = 'none',\r\n  Item = 'item',\r\n  Recipe = 'recipe',\r\n  Factory = 'factory',\r\n  Recipes = 'recipes',\r\n}\r\n","import { SelectItem } from 'primeng/api';\r\n\r\nexport enum Theme {\r\n  System,\r\n  Light,\r\n  Dark,\r\n}\r\n\r\nexport const themeOptions: SelectItem<Theme>[] = [\r\n  { label: 'options.theme.system', value: Theme.System },\r\n  { label: 'options.theme.light', value: Theme.Light },\r\n  { label: 'options.theme.dark', value: Theme.Dark },\r\n];\r\n","import { Recipe } from './data';\r\nimport { Theme } from './enum/theme';\r\n\r\nexport enum NodeType {\r\n  Input = 'input', // Use info/secondary button styles\r\n  Recipe = 'recipe', // Use primary button styles\r\n  Surplus = 'surplus', // Use warning/danger button styles\r\n  Output = 'output', // Use success button styles\r\n}\r\n\r\nexport interface NodeStyle {\r\n  color: string;\r\n  background: string;\r\n}\r\n\r\nexport interface FlowStyle {\r\n  node: Record<NodeType, NodeStyle>;\r\n  edge: string; // Text color\r\n}\r\n\r\nconst darkTheme: FlowStyle = {\r\n  node: {\r\n    [NodeType.Input]: { color: '#044868', background: '#B3E5FC' },\r\n    [NodeType.Recipe]: { color: '#212529', background: '#ffbe4d' },\r\n    [NodeType.Surplus]: { color: '#73000c', background: '#FFCDD2' },\r\n    [NodeType.Output]: { color: '#224a23', background: '#C8E6C9' },\r\n  },\r\n  edge: 'rgba(255, 255, 255, 0.87)',\r\n};\r\n\r\nconst lightTheme: FlowStyle = {\r\n  node: {\r\n    [NodeType.Input]: { color: '#044868', background: '#B3E5FC' },\r\n    [NodeType.Recipe]: { color: '#FFFFFF', background: '#BD7800' },\r\n    [NodeType.Surplus]: { color: '#73000c', background: '#FFCDD2' },\r\n    [NodeType.Output]: { color: '#224a23', background: '#C8E6C9' },\r\n  },\r\n  edge: '#495057',\r\n};\r\n\r\nexport const themeMap: Record<Theme.Light | Theme.Dark, FlowStyle> = {\r\n  [Theme.Light]: lightTheme,\r\n  [Theme.Dark]: darkTheme,\r\n};\r\n\r\nexport interface FlowData {\r\n  theme: FlowStyle;\r\n  nodes: Node[];\r\n  links: Link[];\r\n}\r\n\r\nexport interface FlowBase {\r\n  name: string;\r\n  text: string;\r\n}\r\n\r\nexport interface Node extends FlowBase {\r\n  id: string;\r\n  type: NodeType;\r\n  recipe?: Recipe;\r\n  factories?: string;\r\n  factoryId?: string;\r\n}\r\n\r\nexport interface Link extends FlowBase {\r\n  source: string;\r\n  target: string;\r\n}\r\n","import { Game } from './enum';\r\n\r\ninterface GameInfo {\r\n  icon: string;\r\n  route: string;\r\n  title: string;\r\n  label: string;\r\n  meta: string;\r\n  modId: string;\r\n}\r\n\r\nexport const gameInfo: Record<Game, GameInfo> = {\r\n  [Game.None]: {\r\n    icon: 'factorio',\r\n    route: 'factorio',\r\n    title: 'title.lab',\r\n    label: 'options.game.factorio',\r\n    meta: 'FactorioLab',\r\n    modId: '1.1',\r\n  },\r\n  [Game.Factorio]: {\r\n    icon: 'factorio',\r\n    route: 'factorio',\r\n    title: 'title.lab',\r\n    label: 'options.game.factorio',\r\n    meta: 'Factorio',\r\n    modId: '1.1',\r\n  },\r\n  [Game.DysonSphereProgram]: {\r\n    icon: 'dyson-sphere-program',\r\n    route: 'dsp',\r\n    title: 'title.dsp',\r\n    label: 'options.game.dysonSphereProgram',\r\n    meta: 'Dyson Sphere Program',\r\n    modId: 'dsp',\r\n  },\r\n  [Game.Satisfactory]: {\r\n    icon: 'satisfactory',\r\n    route: 'satisfactory',\r\n    title: 'title.sfy',\r\n    label: 'options.game.satisfactory',\r\n    meta: 'Satisfactory',\r\n    modId: 'sfy',\r\n  },\r\n  [Game.Foxhole]: {\r\n    icon: 'foxhole',\r\n    route: 'foxhole',\r\n    title: 'title.fox',\r\n    label: 'options.game.foxhole',\r\n    meta: 'Foxhole',\r\n    modId: 'fox',\r\n  },\r\n  [Game.CaptainOfIndustry]: {\r\n    icon: 'captain-of-industry',\r\n    route: 'coi',\r\n    title: 'title.coi',\r\n    label: 'options.game.captainOfIndustry',\r\n    meta: 'Captain of Industry',\r\n    modId: 'coi',\r\n  },\r\n};\r\n","export * from './data';\r\nexport * from './enum';\r\nexport * from './settings';\r\n\r\nexport * from './app-data';\r\nexport * from './defaults';\r\nexport * from './constants';\r\nexport * from './dataset';\r\nexport * from './entities';\r\nexport * from './game-info';\r\nexport * from './id-name';\r\nexport * from './inserter-data';\r\nexport * from './matrix-result';\r\nexport * from './mod';\r\nexport * from './options';\r\nexport * from './payload';\r\nexport * from './product';\r\nexport * from './rational';\r\nexport * from './flow';\r\nexport * from './step-detail';\r\nexport * from './step';\r\n","import { InserterCapacity, InserterTarget, ItemId } from './enum';\r\nimport { Rational } from './rational';\r\n\r\nexport interface InserterSpeed {\r\n  id: ItemId;\r\n  value: Rational;\r\n}\r\n\r\nexport const InserterData: Record<\r\n  InserterTarget,\r\n  Record<InserterCapacity, InserterSpeed[]>\r\n> = {\r\n  [InserterTarget.Chest]: {\r\n    [InserterCapacity.Capacity0]: [\r\n      {\r\n        id: ItemId.Inserter,\r\n        value: Rational.fromNumber(0.83),\r\n      },\r\n      {\r\n        id: ItemId.LongHandedInserter,\r\n        value: Rational.fromNumber(1.2),\r\n      },\r\n      {\r\n        id: ItemId.FastInserter,\r\n        value: Rational.fromNumber(2.31),\r\n      },\r\n      {\r\n        id: ItemId.StackInserter,\r\n        value: Rational.fromNumber(4.62),\r\n      },\r\n    ],\r\n    [InserterCapacity.Capacity2]: [\r\n      {\r\n        id: ItemId.Inserter,\r\n        value: Rational.fromNumber(1.67),\r\n      },\r\n      {\r\n        id: ItemId.LongHandedInserter,\r\n        value: Rational.fromNumber(2.4),\r\n      },\r\n      {\r\n        id: ItemId.FastInserter,\r\n        value: Rational.fromNumber(4.62),\r\n      },\r\n      {\r\n        id: ItemId.StackInserter,\r\n        value: Rational.fromNumber(9.23),\r\n      },\r\n    ],\r\n    [InserterCapacity.Capacity7]: [\r\n      {\r\n        id: ItemId.Inserter,\r\n        value: Rational.fromNumber(2.5),\r\n      },\r\n      {\r\n        id: ItemId.LongHandedInserter,\r\n        value: Rational.fromNumber(3.6),\r\n      },\r\n      {\r\n        id: ItemId.FastInserter,\r\n        value: Rational.fromNumber(6.92),\r\n      },\r\n      {\r\n        id: ItemId.StackInserter,\r\n        value: Rational.fromNumber(27.69),\r\n      },\r\n    ],\r\n  },\r\n  [InserterTarget.ExpressTransportBelt]: {\r\n    [InserterCapacity.Capacity0]: [\r\n      {\r\n        id: ItemId.Inserter,\r\n        value: Rational.fromNumber(0.83),\r\n      },\r\n      {\r\n        id: ItemId.LongHandedInserter,\r\n        value: Rational.fromNumber(1.2),\r\n      },\r\n      {\r\n        id: ItemId.FastInserter,\r\n        value: Rational.fromNumber(2.31),\r\n      },\r\n      {\r\n        id: ItemId.StackInserter,\r\n        value: Rational.fromNumber(4.44),\r\n      },\r\n    ],\r\n    [InserterCapacity.Capacity2]: [\r\n      {\r\n        id: ItemId.Inserter,\r\n        value: Rational.fromNumber(1.64),\r\n      },\r\n      {\r\n        id: ItemId.LongHandedInserter,\r\n        value: Rational.fromNumber(2.35),\r\n      },\r\n      {\r\n        id: ItemId.FastInserter,\r\n        value: Rational.fromNumber(4.44),\r\n      },\r\n      {\r\n        id: ItemId.StackInserter,\r\n        value: Rational.fromNumber(7.74),\r\n      },\r\n    ],\r\n    [InserterCapacity.Capacity7]: [\r\n      {\r\n        id: ItemId.Inserter,\r\n        value: Rational.fromNumber(2.43),\r\n      },\r\n      {\r\n        id: ItemId.LongHandedInserter,\r\n        value: Rational.fromNumber(3.46),\r\n      },\r\n      {\r\n        id: ItemId.FastInserter,\r\n        value: Rational.fromNumber(6.43),\r\n      },\r\n      {\r\n        id: ItemId.StackInserter,\r\n        value: Rational.fromNumber(13.85),\r\n      },\r\n    ],\r\n  },\r\n  [InserterTarget.FastTransportBelt]: {\r\n    [InserterCapacity.Capacity0]: [\r\n      {\r\n        id: ItemId.Inserter,\r\n        value: Rational.fromNumber(0.83),\r\n      },\r\n      {\r\n        id: ItemId.LongHandedInserter,\r\n        value: Rational.fromNumber(1.2),\r\n      },\r\n      {\r\n        id: ItemId.FastInserter,\r\n        value: Rational.fromNumber(2.31),\r\n      },\r\n      {\r\n        id: ItemId.StackInserter,\r\n        value: Rational.fromNumber(4.44),\r\n      },\r\n    ],\r\n    [InserterCapacity.Capacity2]: [\r\n      {\r\n        id: ItemId.Inserter,\r\n        value: Rational.fromNumber(1.64),\r\n      },\r\n      {\r\n        id: ItemId.LongHandedInserter,\r\n        value: Rational.fromNumber(2.35),\r\n      },\r\n      {\r\n        id: ItemId.FastInserter,\r\n        value: Rational.fromNumber(4.44),\r\n      },\r\n      {\r\n        id: ItemId.StackInserter,\r\n        value: Rational.fromNumber(7.06),\r\n      },\r\n    ],\r\n    [InserterCapacity.Capacity7]: [\r\n      {\r\n        id: ItemId.Inserter,\r\n        value: Rational.fromNumber(2.37),\r\n      },\r\n      {\r\n        id: ItemId.LongHandedInserter,\r\n        value: Rational.fromNumber(3.33),\r\n      },\r\n      {\r\n        id: ItemId.FastInserter,\r\n        value: Rational.fromNumber(6),\r\n      },\r\n      {\r\n        id: ItemId.StackInserter,\r\n        value: Rational.fromNumber(10.91),\r\n      },\r\n    ],\r\n  },\r\n  [InserterTarget.TransportBelt]: {\r\n    [InserterCapacity.Capacity0]: [\r\n      {\r\n        id: ItemId.Inserter,\r\n        value: Rational.fromNumber(0.83),\r\n      },\r\n      {\r\n        id: ItemId.LongHandedInserter,\r\n        value: Rational.fromNumber(1.2),\r\n      },\r\n      {\r\n        id: ItemId.FastInserter,\r\n        value: Rational.fromNumber(2.31),\r\n      },\r\n      {\r\n        id: ItemId.StackInserter,\r\n        value: Rational.fromNumber(4.44),\r\n      },\r\n    ],\r\n    [InserterCapacity.Capacity2]: [\r\n      {\r\n        id: ItemId.Inserter,\r\n        value: Rational.fromNumber(1.64),\r\n      },\r\n      {\r\n        id: ItemId.LongHandedInserter,\r\n        value: Rational.fromNumber(2.35),\r\n      },\r\n      {\r\n        id: ItemId.FastInserter,\r\n        value: Rational.fromNumber(4.44),\r\n      },\r\n      {\r\n        id: ItemId.StackInserter,\r\n        value: Rational.fromNumber(5.71),\r\n      },\r\n    ],\r\n    [InserterCapacity.Capacity7]: [\r\n      {\r\n        id: ItemId.Inserter,\r\n        value: Rational.fromNumber(2.25),\r\n      },\r\n      {\r\n        id: ItemId.LongHandedInserter,\r\n        value: Rational.fromNumber(3.1),\r\n      },\r\n      {\r\n        id: ItemId.FastInserter,\r\n        value: Rational.fromNumber(5.29),\r\n      },\r\n      {\r\n        id: ItemId.StackInserter,\r\n        value: Rational.fromNumber(6.79),\r\n      },\r\n    ],\r\n  },\r\n};\r\n","import { RateType } from './enum/rate-type';\r\nimport { Rational } from './rational';\r\n\r\nexport interface Product {\r\n  id: string;\r\n  itemId: string;\r\n  rate: string;\r\n  rateType: RateType;\r\n  viaId?: string;\r\n}\r\n\r\nexport class RationalProduct {\r\n  id: string;\r\n  itemId: string;\r\n  rate: Rational;\r\n  rateType: RateType;\r\n  viaId?: string;\r\n\r\n  constructor(data: Product) {\r\n    this.id = data.id;\r\n    this.itemId = data.itemId;\r\n    this.rate = Rational.fromString(data.rate);\r\n    this.rateType = data.rateType;\r\n    if (data.viaId) {\r\n      this.viaId = data.viaId;\r\n    }\r\n  }\r\n}\r\n","const MAX_DENOM = 100000;\r\nconst DIVIDE_BY_ZERO = 'Cannot divide by zero';\r\n\r\nconst bigZero = BigInt(0);\r\nconst bigOne = BigInt(1);\r\nconst bigMinusOne = BigInt(-1);\r\n\r\nexport class Rational {\r\n  static zero = new Rational(bigZero);\r\n  static minusOne = new Rational(bigMinusOne);\r\n  static one = new Rational(bigOne);\r\n  static two = new Rational(BigInt(2));\r\n  static ten = new Rational(BigInt(10));\r\n  static sixty = new Rational(BigInt(60));\r\n  static hundred = new Rational(BigInt(100));\r\n  static thousand = new Rational(BigInt(1000));\r\n  static million = new Rational(BigInt(1000000));\r\n\r\n  readonly p: bigint;\r\n  readonly q: bigint;\r\n\r\n  static gcd(x: bigint, y: bigint): bigint {\r\n    x = Rational.abs(x);\r\n    y = Rational.abs(y);\r\n    while (y) {\r\n      const t = y;\r\n      y = x % y;\r\n      x = t;\r\n    }\r\n\r\n    return x;\r\n  }\r\n\r\n  static abs(x: bigint): bigint {\r\n    return x < bigZero ? x * bigMinusOne : x;\r\n  }\r\n\r\n  static from(p: number, q: number = 1): Rational {\r\n    if (q === 0) {\r\n      throw Error(DIVIDE_BY_ZERO);\r\n    }\r\n\r\n    return new Rational(BigInt(p), BigInt(q));\r\n  }\r\n\r\n  private static parseFloatCache: Record<number, Rational> = {};\r\n  /**\r\n   * Source: https://www.ics.uci.edu/%7Eeppstein/numth/frap.c\r\n   */\r\n  private static parseFloat(startx: number): Rational {\r\n    if (this.parseFloatCache[startx]) return this.parseFloatCache[startx];\r\n\r\n    let ai = startx,\r\n      x = startx;\r\n\r\n    /** initialize matrix */\r\n    const m = [\r\n      [1, 0],\r\n      [0, 1],\r\n    ];\r\n\r\n    /** loop finding terms until denom gets too big */\r\n    while (m[1][0] * (ai = Math.floor(x)) + m[1][1] <= MAX_DENOM) {\r\n      let t = m[0][0] * ai + m[0][1];\r\n      m[0][1] = m[0][0];\r\n      m[0][0] = t;\r\n      t = m[1][0] * ai + m[1][1];\r\n      m[1][1] = m[1][0];\r\n      m[1][0] = t;\r\n      if (x === ai) break; // AF: division by zero\r\n      x = 1 / (x - ai);\r\n    }\r\n\r\n    const optA = Rational.from(m[0][0], m[1][0]);\r\n    const errA = Math.abs(startx - optA.toNumber());\r\n\r\n    ai = Math.floor((MAX_DENOM - m[1][1]) / m[1][0]);\r\n    m[0][0] = m[0][0] * ai + m[0][1];\r\n    m[1][0] = m[1][0] * ai + m[1][1];\r\n\r\n    const optB = Rational.from(m[0][0], m[1][0]);\r\n    const errB = Math.abs(startx - optB.toNumber());\r\n\r\n    const result = errA < errB ? optA : optB;\r\n    this.parseFloatCache[startx] = result;\r\n    return result;\r\n  }\r\n\r\n  static fromJson(x: number | string): Rational {\r\n    if (typeof x === 'number') {\r\n      return this.fromNumber(x);\r\n    }\r\n\r\n    return this.fromString(x);\r\n  }\r\n\r\n  static fromNumber(x: number): Rational {\r\n    if (Number.isInteger(x)) {\r\n      return new Rational(BigInt(x), bigOne);\r\n    }\r\n\r\n    return this.parseFloat(x);\r\n  }\r\n\r\n  static fromString(x: string): Rational {\r\n    if (x.length === 0) {\r\n      throw new Error('Empty string');\r\n    }\r\n\r\n    if (typeof x === 'number' || x.indexOf('/') === -1) {\r\n      return Rational.fromNumber(Number(x));\r\n    } else {\r\n      const f = x.split('/');\r\n      if (f.length > 2) {\r\n        throw new Error('Too many /');\r\n      }\r\n\r\n      if (f[0].indexOf(' ') === -1) {\r\n        const p = Number(f[0]);\r\n        const q = Number(f[1]);\r\n        return Rational.from(p, q);\r\n      } else {\r\n        const g = f[0].split(' ');\r\n        if (g.length > 2) {\r\n          throw new Error('Too many spaces');\r\n        }\r\n\r\n        const n = Number(g[0]);\r\n        const p = Number(g[1]);\r\n        const q = Number(f[1]);\r\n        return Rational.from(n).add(Rational.from(p, q));\r\n      }\r\n    }\r\n  }\r\n\r\n  static min(x: Rational, y: Rational): Rational {\r\n    return x.lt(y) ? x : y;\r\n  }\r\n\r\n  static max(x: Rational, y: Rational): Rational {\r\n    return x.gt(y) ? x : y;\r\n  }\r\n\r\n  isZero(): boolean {\r\n    return this.p === bigZero;\r\n  }\r\n\r\n  isOne(): boolean {\r\n    return this.p === bigOne && this.q === bigOne;\r\n  }\r\n\r\n  nonzero(): boolean {\r\n    return this.p !== bigZero;\r\n  }\r\n\r\n  isInteger(): boolean {\r\n    return this.q === bigOne;\r\n  }\r\n\r\n  inverse(): Rational {\r\n    return this.mul(Rational.minusOne);\r\n  }\r\n\r\n  reciprocal(): Rational {\r\n    return new Rational(this.q, this.p);\r\n  }\r\n\r\n  lt(x: Rational): boolean {\r\n    if (this.q === x.q) {\r\n      return this.p < x.p;\r\n    }\r\n\r\n    return this.p * x.q < x.p * this.q;\r\n  }\r\n\r\n  lte(x: Rational): boolean {\r\n    return this.eq(x) || this.lt(x);\r\n  }\r\n\r\n  gt(x: Rational): boolean {\r\n    return x.lt(this);\r\n  }\r\n\r\n  gte(x: Rational): boolean {\r\n    return this.eq(x) || this.gt(x);\r\n  }\r\n\r\n  eq(x: Rational): boolean {\r\n    return this.p === x.p && this.q === x.q;\r\n  }\r\n\r\n  add(x: Rational): Rational {\r\n    if (x.isZero()) {\r\n      return this;\r\n    }\r\n\r\n    return new Rational(this.p * x.q + this.q * x.p, this.q * x.q);\r\n  }\r\n\r\n  sub(x: Rational): Rational {\r\n    if (x.isZero()) {\r\n      return this;\r\n    }\r\n\r\n    return new Rational(this.p * x.q - this.q * x.p, this.q * x.q);\r\n  }\r\n\r\n  mul(x: Rational): Rational {\r\n    if (this.isOne()) {\r\n      return x;\r\n    }\r\n\r\n    if (x.isOne()) {\r\n      return this;\r\n    }\r\n\r\n    if (this.isZero() || x.isZero()) {\r\n      return Rational.zero;\r\n    }\r\n\r\n    return new Rational(this.p * x.p, this.q * x.q);\r\n  }\r\n\r\n  div(x: Rational): Rational {\r\n    if (x.isOne()) {\r\n      return this;\r\n    }\r\n\r\n    if (this.eq(x)) {\r\n      return Rational.one;\r\n    }\r\n\r\n    return new Rational(this.p * x.q, this.q * x.p);\r\n  }\r\n\r\n  ceil(): Rational {\r\n    if (this.isInteger()) {\r\n      return this;\r\n    } else {\r\n      return new Rational(this.p / this.q + bigOne);\r\n    }\r\n  }\r\n\r\n  floor(): Rational {\r\n    if (this.isInteger()) {\r\n      return this;\r\n    } else {\r\n      return new Rational(this.p / this.q);\r\n    }\r\n  }\r\n\r\n  abs(): Rational {\r\n    return new Rational(Rational.abs(this.p), this.q);\r\n  }\r\n\r\n  toNumber(): number {\r\n    return Number(this.p) / Number(this.q);\r\n  }\r\n\r\n  toPrecision(x: number): number {\r\n    const round = Rational.from(Math.pow(10, x));\r\n    return this.mul(round).ceil().div(round).toNumber();\r\n  }\r\n\r\n  toFraction(): string {\r\n    if (this.isInteger()) {\r\n      return this.p.toString();\r\n    }\r\n\r\n    if (Rational.abs(this.p) > Rational.abs(this.q)) {\r\n      const whole = this.p / this.q;\r\n      const mod = this.p % this.q;\r\n      return `${whole} + ${mod}/${this.q}`;\r\n    }\r\n\r\n    return `${this.p}/${this.q}`;\r\n  }\r\n\r\n  /**\r\n   * Converts rational to string\r\n   * * Default: Use decimals if 2 or less, use num/den otherwise\r\n   * * Custom:\r\n   *   * Specify null to use num/den\r\n   *   * Specify number to specify number of decimals\r\n   */\r\n  toString(precision?: number | null): string {\r\n    if (precision) return this.toPrecision(precision).toString();\r\n\r\n    if (precision === null || this.toDecimals() > 2) {\r\n      return `${this.p.toString()}/${this.q.toString()}`;\r\n    } else {\r\n      return this.toNumber().toString();\r\n    }\r\n  }\r\n\r\n  toDecimals(): number {\r\n    const num = this.toNumber();\r\n    if (num % 1 !== 0) {\r\n      return num.toString().split('.')[1].length;\r\n    }\r\n\r\n    return 0;\r\n  }\r\n\r\n  constructor(p: bigint, q: bigint = bigOne) {\r\n    if (q < bigZero) {\r\n      p = -p;\r\n      q = -q;\r\n    }\r\n\r\n    const gcd = Rational.gcd(Rational.abs(p), q);\r\n    if (gcd > bigOne) {\r\n      p = p / gcd;\r\n      q = q / gcd;\r\n    }\r\n\r\n    this.p = p;\r\n    this.q = q;\r\n  }\r\n}\r\n","export * from './column-settings';\r\nexport * from './factory-settings';\r\nexport * from './item-settings';\r\nexport * from './recipe-settings';\r\n","import { Rational } from '../rational';\r\n\r\nexport interface RecipeSettings {\r\n  factoryId?: string;\r\n  factoryModuleIds?: string[];\r\n  beaconCount?: string;\r\n  beaconId?: string;\r\n  beaconModuleIds?: string[];\r\n  beaconTotal?: string;\r\n  overclock?: number;\r\n  cost?: string;\r\n}\r\n\r\nexport class RationalRecipeSettings {\r\n  factoryId?: string;\r\n  factoryModuleIds?: string[];\r\n  beaconCount?: Rational;\r\n  beaconId?: string;\r\n  beaconModuleIds?: string[];\r\n  beaconTotal?: Rational;\r\n  overclock?: Rational;\r\n  cost?: Rational;\r\n\r\n  constructor(data: RecipeSettings) {\r\n    if (data.factoryId != null) {\r\n      this.factoryId = data.factoryId;\r\n    }\r\n    if (data.factoryModuleIds != null) {\r\n      this.factoryModuleIds = data.factoryModuleIds;\r\n    }\r\n    if (data.beaconCount != null) {\r\n      this.beaconCount = Rational.fromString(data.beaconCount);\r\n    }\r\n    if (data.beaconId != null) {\r\n      this.beaconId = data.beaconId;\r\n    }\r\n    if (data.beaconModuleIds != null) {\r\n      this.beaconModuleIds = data.beaconModuleIds;\r\n    }\r\n    if (data.beaconTotal != null) {\r\n      this.beaconTotal = Rational.fromString(data.beaconTotal);\r\n    }\r\n    if (data.overclock != null) {\r\n      this.overclock = Rational.fromNumber(data.overclock);\r\n    }\r\n    if (data.cost != null) {\r\n      this.cost = Rational.fromString(data.cost);\r\n    }\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\nimport { ItemId, Rational } from '~/models';\r\nimport { RatePipe } from './rate.pipe';\r\n\r\n@Pipe({ name: 'factoryRate' })\r\nexport class FactoryRatePipe implements PipeTransform {\r\n  constructor(private ratePipe: RatePipe) {}\r\n\r\n  transform(\r\n    value: Rational,\r\n    precision: number | null,\r\n    factoryId: string\r\n  ): string {\r\n    if (factoryId === ItemId.Pumpjack) {\r\n      return `${this.ratePipe.transform(\r\n        value.mul(Rational.hundred),\r\n        precision != null ? Math.max(precision - 2, 0) : precision\r\n      )}%`;\r\n    } else {\r\n      return this.ratePipe.transform(value, precision);\r\n    }\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\nimport { Game, ItemId } from '~/models';\r\n\r\n@Pipe({ name: 'factoryShowRate' })\r\nexport class FactoryShowRatePipe implements PipeTransform {\r\n  transform(factoryId: string, game: Game): boolean {\r\n    return (\r\n      game !== Game.CaptainOfIndustry || factoryId !== ItemId.MineControlTower\r\n    );\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\nimport { Game, ItemId } from '~/models';\r\n\r\n@Pipe({ name: 'factoryShow' })\r\nexport class FactoryShowPipe implements PipeTransform {\r\n  transform(factoryId: string | null | undefined, game: Game): boolean {\r\n    if (factoryId == null) return false;\r\n\r\n    return game !== Game.DysonSphereProgram || factoryId !== ItemId.MiningDrill;\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\nimport { IdType } from '~/models';\r\n\r\n@Pipe({ name: 'iconClass' })\r\nexport class IconClassPipe implements PipeTransform {\r\n  transform(value: string | null | undefined, type: IdType = 'item'): string {\r\n    if (value == null) return '';\r\n\r\n    return `lab-icon ${type} ${value}`;\r\n  }\r\n}\r\n\r\n@Pipe({ name: 'iconSmClass' })\r\nexport class IconSmClassPipe implements PipeTransform {\r\n  transform(value: string | null | undefined, type: IdType = 'item'): string {\r\n    if (value == null) return '';\r\n\r\n    return `lab-icon-sm ${type} ${value}`;\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\nimport { InserterData, InserterSpeed, ItemId, Rational } from '~/models';\r\nimport { Settings } from '~/store';\r\n\r\n@Pipe({ name: 'inserterSpeed' })\r\nexport class InserterSpeedPipe implements PipeTransform {\r\n  transform(\r\n    value: Rational | undefined,\r\n    settings: Settings.SettingsState\r\n  ): InserterSpeed | null {\r\n    if (value != null) {\r\n      const inserter = InserterData[settings.inserterTarget][\r\n        settings.inserterCapacity\r\n      ]?.find((d) => d.value.gt(value) || d.id === ItemId.StackInserter);\r\n\r\n      if (inserter == null) {\r\n        // Should be impossible due to stack inserter fallback\r\n        return null;\r\n      }\r\n\r\n      return {\r\n        id: inserter.id,\r\n        value: value.div(inserter.value),\r\n      };\r\n    }\r\n    return null;\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\nimport { DisplayService } from '~/services';\r\n\r\n@Pipe({ name: 'invertArray' })\r\nexport class InvertArrayPipe implements PipeTransform {\r\n  constructor(private displaySvc: DisplayService) {}\r\n\r\n  transform(value: string[], all: string[]): string[] {\r\n    return this.displaySvc.invertArray(value, all);\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({ name: 'leftPad' })\r\nexport class LeftPadPipe implements PipeTransform {\r\n  transform(value: string | undefined): string {\r\n    if (value == null) return '';\r\n\r\n    return ' '.repeat(4 - value.length) + value;\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { SelectItem } from 'primeng/api';\r\n\r\nimport { ItemId } from '~/models';\r\n\r\n@Pipe({ name: 'options' })\r\nexport class OptionsPipe implements PipeTransform {\r\n  transform(\r\n    value: string[] | null | undefined,\r\n    entities: Record<string, { name: string }>,\r\n    includeEmptyModule = false\r\n  ): SelectItem[] {\r\n    if (value == null) {\r\n      return [];\r\n    }\r\n\r\n    const list = value.map(\r\n      (i): SelectItem => ({ label: entities[i].name, value: i })\r\n    );\r\n\r\n    if (includeEmptyModule) {\r\n      list.unshift({ label: 'None', value: ItemId.Module });\r\n    }\r\n\r\n    return list;\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\nimport { PowerUnit, Rational } from '~/models';\r\nimport { RatePipe } from './rate.pipe';\r\n\r\n@Pipe({ name: 'power' })\r\nexport class PowerPipe implements PipeTransform {\r\n  constructor(private ratePipe: RatePipe) {}\r\n\r\n  transform(\r\n    value: Rational,\r\n    precision: number | null,\r\n    unit?: PowerUnit\r\n  ): string {\r\n    switch (unit) {\r\n      case PowerUnit.GW:\r\n        return `${this.ratePipe.transform(\r\n          value.div(Rational.million),\r\n          precision\r\n        )} GW`;\r\n      case PowerUnit.MW:\r\n        return `${this.ratePipe.transform(\r\n          value.div(Rational.thousand),\r\n          precision\r\n        )} MW`;\r\n      default:\r\n        return `${this.ratePipe.transform(value, precision)} kW`;\r\n    }\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\nimport { Rational } from '~/models';\r\n\r\n@Pipe({ name: 'precisionExample' })\r\nexport class PrecisionExamplePipe implements PipeTransform {\r\n  static value = Rational.from(1, 3);\r\n\r\n  transform(value: number | null | undefined): string {\r\n    if (value == null) {\r\n      return PrecisionExamplePipe.value.toFraction();\r\n    }\r\n\r\n    return PrecisionExamplePipe.value.toPrecision(value).toString();\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\nimport { IdType, RateType } from '~/models';\r\n\r\n@Pipe({ name: 'rateTypeViaDropdown' })\r\nexport class RateTypeViaDropdownPipe implements PipeTransform {\r\n  transform(value: RateType): IdType {\r\n    return value === RateType.Factories ? 'recipe' : 'item';\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\nimport { Rational } from '~/models';\r\n\r\n@Pipe({ name: 'rate' })\r\nexport class RatePipe implements PipeTransform {\r\n  transform(value: Rational, precision: number | null): string {\r\n    if (precision == null) {\r\n      return value.toFraction();\r\n    } else {\r\n      if (precision === -2) {\r\n        const num = Math.round(value.mul(Rational.hundred).toNumber());\r\n        return num.toString();\r\n      }\r\n      const num = value.toPrecision(precision);\r\n      if (precision > 0) {\r\n        const result = num.toString();\r\n        const split = result.split('.');\r\n        if (split.length > 1) {\r\n          if (split[1].length < precision) {\r\n            const spaces = precision - split[1].length;\r\n            return num.toString() + '0'.repeat(spaces);\r\n          }\r\n        } else if (value.isInteger()) {\r\n          return num.toString() + ' '.repeat(precision + 1);\r\n        } else {\r\n          return num.toString() + '.' + '0'.repeat(precision);\r\n        }\r\n      }\r\n      return num.toString();\r\n    }\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\nimport { Dataset, Step } from '~/models';\r\nimport { RouterService } from '~/services';\r\n\r\n@Pipe({ name: 'stepHref' })\r\nexport class StepHrefPipe implements PipeTransform {\r\n  constructor(private routerSvc: RouterService) {}\r\n\r\n  transform(value: Step, data: Dataset): string | null {\r\n    let step = value;\r\n    if (step.recipeId) {\r\n      const recipe = data.recipeR[step.recipeId];\r\n      if (recipe.adjustProd && recipe.productivity && value.items) {\r\n        // Adjust items to account for productivity bonus\r\n        step = {\r\n          ...value,\r\n          ...{ items: value.items.div(recipe.productivity) },\r\n        };\r\n      }\r\n    }\r\n    return this.routerSvc.stepHref(step, data.hash);\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\nimport { Dataset } from '~/models';\r\nimport { DisplayService } from '~/services';\r\n\r\n@Pipe({ name: 'beaconTooltip' })\r\nexport class BeaconTooltipPipe implements PipeTransform {\r\n  constructor(\r\n    private translateSvc: TranslateService,\r\n    private displaySvc: DisplayService\r\n  ) {}\r\n\r\n  transform(value: string | null | undefined, data: Dataset): string {\r\n    if (value == null) return '';\r\n\r\n    const item = data.itemEntities[value];\r\n    const beacon = item?.beacon;\r\n\r\n    if (item == null || beacon == null) return '';\r\n\r\n    let html = item.name + '\\n<small>';\r\n\r\n    const tableRows: [string, string][] = [\r\n      [\r\n        this.translateSvc.instant('tooltip.effectivity'),\r\n        this.displaySvc.round(beacon.effectivity),\r\n      ],\r\n      [this.translateSvc.instant('tooltip.modules'), beacon.modules.toString()],\r\n      [this.translateSvc.instant('tooltip.range'), beacon.range.toString()],\r\n    ];\r\n\r\n    if (beacon.type) {\r\n      tableRows.push([\r\n        this.translateSvc.instant('tooltip.energyType'),\r\n        beacon.type,\r\n      ]);\r\n    }\r\n\r\n    if (beacon.category) {\r\n      tableRows.push([\r\n        this.translateSvc.instant('tooltip.fuelCategory'),\r\n        beacon.category,\r\n      ]);\r\n    }\r\n\r\n    if (beacon.usage) {\r\n      tableRows.push([\r\n        this.translateSvc.instant('tooltip.energyUsage'),\r\n        this.displaySvc.power(beacon.usage),\r\n      ]);\r\n    }\r\n\r\n    html += this.displaySvc.table(tableRows);\r\n\r\n    html += '</small>';\r\n\r\n    return html;\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\nimport { Dataset, Game } from '~/models';\r\nimport { DisplayService } from '~/services';\r\n\r\n@Pipe({ name: 'factoryTooltip' })\r\nexport class FactoryTooltipPipe implements PipeTransform {\r\n  constructor(\r\n    private translateSvc: TranslateService,\r\n    private displaySvc: DisplayService\r\n  ) {}\r\n\r\n  transform(value: string | null | undefined, data: Dataset): string {\r\n    if (value == null) return '';\r\n\r\n    const item = data.itemEntities[value];\r\n    const factory = item?.factory;\r\n\r\n    if (item == null || factory == null) return '';\r\n\r\n    let html = item.name + '\\n<small>';\r\n    const tableRows: [string, string][] = [];\r\n    if (factory.speed && data.game !== Game.CaptainOfIndustry) {\r\n      tableRows.push([\r\n        this.translateSvc.instant('tooltip.craftingSpeed'),\r\n        this.displaySvc.round(factory.speed),\r\n      ]);\r\n    }\r\n\r\n    if (factory.modules && data.game === Game.Factorio) {\r\n      tableRows.push([\r\n        this.translateSvc.instant('tooltip.modules'),\r\n        factory.modules.toString(),\r\n      ]);\r\n    }\r\n\r\n    if (factory.type) {\r\n      tableRows.push([\r\n        this.translateSvc.instant('tooltip.energyType'),\r\n        factory.type,\r\n      ]);\r\n    }\r\n\r\n    if (factory.category) {\r\n      tableRows.push([\r\n        this.translateSvc.instant('tooltip.fuelCategory'),\r\n        factory.category,\r\n      ]);\r\n    }\r\n\r\n    if (factory.usage?.nonzero()) {\r\n      tableRows.push([\r\n        this.translateSvc.instant('tooltip.energyUsage'),\r\n        this.displaySvc.power(factory.usage),\r\n      ]);\r\n    }\r\n\r\n    if (factory.drain?.nonzero()) {\r\n      tableRows.push([\r\n        this.translateSvc.instant('tooltip.drain'),\r\n        this.displaySvc.power(factory.drain),\r\n      ]);\r\n    }\r\n\r\n    if (factory.pollution?.nonzero()) {\r\n      tableRows.push([\r\n        this.translateSvc.instant('tooltip.pollution'),\r\n        this.displaySvc.round(factory.pollution) + '/m',\r\n      ]);\r\n    }\r\n\r\n    if (factory.silo) {\r\n      tableRows.push([\r\n        this.translateSvc.instant('tooltip.rocketPartsRequired'),\r\n        this.displaySvc.round(factory.silo.parts),\r\n      ]);\r\n      tableRows.push([\r\n        this.translateSvc.instant('tooltip.launchTime'),\r\n        this.displaySvc.round(factory.silo.launch) + 's',\r\n      ]);\r\n    }\r\n\r\n    html += this.displaySvc.table(tableRows);\r\n\r\n    if (factory.consumption) {\r\n      html +=\r\n        '<div class=\"d-flex align-items-center justify-content-center flex-wrap mt-2\">';\r\n      for (const key of Object.keys(factory.consumption)) {\r\n        html += this.displaySvc.icon(\r\n          key,\r\n          this.displaySvc.round(factory.consumption[key])\r\n        );\r\n      }\r\n      html += '</div>';\r\n    }\r\n\r\n    html += '</small>';\r\n\r\n    return html;\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\nimport { Dataset } from '~/models';\r\nimport { DisplayService } from '~/services';\r\n\r\n@Pipe({ name: 'itemTooltip' })\r\nexport class ItemTooltipPipe implements PipeTransform {\r\n  constructor(private displaySvc: DisplayService) {}\r\n\r\n  transform(value: string | null | undefined, data: Dataset): string {\r\n    if (value == null) return '';\r\n\r\n    const recipeId = data.itemRecipeId[value];\r\n\r\n    if (recipeId == null) {\r\n      const item = data.itemEntities[value];\r\n\r\n      if (item == null) return '';\r\n\r\n      return item.name;\r\n    } else {\r\n      const recipe = data.recipeEntities[value];\r\n\r\n      if (recipe == null) return '';\r\n\r\n      const producersHtml = recipe.producers\r\n        .map((i) => this.displaySvc.icon(i, ''))\r\n        .join('');\r\n\r\n      return `<div>${\r\n        recipe.name\r\n      }</div><div class=\"d-flex align-items-center justify-content-center\\\r\n      flex-wrap mt-2\">${this.displaySvc.recipeProcess(recipe)}\\\r\n      </div><div class=\"d-flex align-items-center justify-content-center flex-wrap mt-2\">\\\r\n      ${producersHtml}</div>`;\r\n    }\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\nimport { Dataset } from '~/models';\r\nimport { DisplayService } from '~/services';\r\n\r\n@Pipe({ name: 'moduleTooltip' })\r\nexport class ModuleTooltipPipe implements PipeTransform {\r\n  constructor(\r\n    private translateSvc: TranslateService,\r\n    private displaySvc: DisplayService\r\n  ) {}\r\n\r\n  transform(value: string | null | undefined, data: Dataset): string {\r\n    if (value == null) return '';\r\n\r\n    const item = data.itemEntities[value];\r\n    const module = item?.module;\r\n\r\n    if (item == null || module == null) return '';\r\n\r\n    let html = item.name + '\\n<small>';\r\n\r\n    const tableRows: [string, string][] = [];\r\n    if (module.consumption?.nonzero()) {\r\n      tableRows.push([\r\n        this.translateSvc.instant('tooltip.consumption'),\r\n        this.displaySvc.toBonusPercent(module.consumption),\r\n      ]);\r\n    }\r\n\r\n    if (module.speed?.nonzero()) {\r\n      tableRows.push([\r\n        this.translateSvc.instant('tooltip.speed'),\r\n        this.displaySvc.toBonusPercent(module.speed),\r\n      ]);\r\n    }\r\n\r\n    if (module.productivity?.nonzero()) {\r\n      tableRows.push([\r\n        this.translateSvc.instant('tooltip.productivity'),\r\n        this.displaySvc.toBonusPercent(module.productivity),\r\n      ]);\r\n    }\r\n\r\n    if (module.pollution?.nonzero()) {\r\n      tableRows.push([\r\n        this.translateSvc.instant('tooltip.pollution'),\r\n        this.displaySvc.toBonusPercent(module.pollution),\r\n      ]);\r\n    }\r\n\r\n    if (module.sprays?.nonzero()) {\r\n      tableRows.push([\r\n        this.translateSvc.instant('tooltip.sprays'),\r\n        this.displaySvc.round(module.sprays),\r\n      ]);\r\n    }\r\n\r\n    html += this.displaySvc.table(tableRows);\r\n\r\n    html += '</small>';\r\n\r\n    return html;\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\nimport { Dataset } from '~/models';\r\nimport { DisplayService } from '~/services';\r\n\r\n@Pipe({ name: 'recipeTooltip' })\r\nexport class RecipeTooltipPipe implements PipeTransform {\r\n  constructor(private displaySvc: DisplayService) {}\r\n\r\n  transform(value: string | null | undefined, data: Dataset): string {\r\n    if (value == null) return '';\r\n\r\n    const recipe = data.recipeEntities[value];\r\n\r\n    if (recipe == null) return '';\r\n\r\n    const producersHtml = recipe.producers\r\n      .map((i) => this.displaySvc.icon(i, ''))\r\n      .join('');\r\n\r\n    return `<div>${\r\n      recipe.name\r\n    }</div><div class=\"d-flex align-items-center justify-content-center\\\r\n    flex-wrap mt-2\">${this.displaySvc.recipeProcess(recipe)}\\\r\n    </div><div class=\"d-flex align-items-center justify-content-center flex-wrap mt-2\">\\\r\n    ${producersHtml}</div>`;\r\n  }\r\n}\r\n","import { Injectable, TemplateRef } from '@angular/core';\r\nimport {\r\n  NavigationCancel,\r\n  NavigationEnd,\r\n  NavigationError,\r\n  NavigationStart,\r\n  Router,\r\n} from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { Confirmation } from 'primeng/api';\r\nimport {\r\n  BehaviorSubject,\r\n  filter,\r\n  fromEvent,\r\n  map,\r\n  startWith,\r\n  Subject,\r\n} from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ContentService {\r\n  // Responsive\r\n  scrollTop$ = fromEvent(window, 'scroll').pipe(\r\n    map(\r\n      // Don't test fromEvent\r\n      // istanbul ignore next\r\n      () => window.scrollY\r\n    ),\r\n    startWith(window.scrollY)\r\n  );\r\n\r\n  // Dialogs\r\n  showColumns$ = new Subject<void>();\r\n  showConfirm$ = new Subject<Confirmation>();\r\n\r\n  confirm(confirmation: Confirmation): void {\r\n    this.showConfirm$.next(confirmation);\r\n  }\r\n\r\n  // Templates\r\n  translateSelectedItem$ = new BehaviorSubject<TemplateRef<any> | undefined>(\r\n    undefined\r\n  );\r\n  translateItem$ = new BehaviorSubject<TemplateRef<any> | undefined>(undefined);\r\n\r\n  // Header\r\n  settingsActive$ = new BehaviorSubject(false);\r\n  settingsXlHidden$ = new BehaviorSubject(false);\r\n\r\n  toggleSettings(): void {\r\n    this.settingsActive$.next(!this.settingsActive$.value);\r\n  }\r\n\r\n  toggleSettingsXl(): void {\r\n    this.settingsXlHidden$.next(!this.settingsXlHidden$.value);\r\n  }\r\n\r\n  // Watch all language changes\r\n  lang$ = this.translateSvc.onLangChange.pipe(startWith(''));\r\n\r\n  constructor(private router: Router, private translateSvc: TranslateService) {}\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Store } from '@ngrx/store';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport {\r\n  catchError,\r\n  combineLatest,\r\n  Observable,\r\n  of,\r\n  shareReplay,\r\n  skip,\r\n  tap,\r\n} from 'rxjs';\r\n\r\nimport { Entities, ModData, ModHash, ModI18n } from '~/models';\r\nimport { Datasets, LabState, Products, Settings } from '~/store';\r\nimport { BrowserUtility } from '~/utilities';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class DataService {\r\n  cacheData: Entities<Observable<ModData>> = {};\r\n  cacheHash: Entities<Observable<ModHash>> = {};\r\n  cacheI18n: Entities<Observable<ModI18n | null>> = {};\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    private store: Store<LabState>,\r\n    private translateSvc: TranslateService\r\n  ) {\r\n    this.initialize(\r\n      BrowserUtility.zip,\r\n      BrowserUtility.storedState,\r\n      Settings.initialSettingsState\r\n    );\r\n    combineLatest([\r\n      this.store.select(Settings.getModId),\r\n      this.translateSvc.onLangChange,\r\n    ])\r\n      .pipe(skip(1))\r\n      .subscribe(([id]) => {\r\n        this.requestData(id).subscribe();\r\n      });\r\n  }\r\n\r\n  initialize(\r\n    zip: string,\r\n    stored: Partial<LabState> | null,\r\n    initial: Settings.SettingsState\r\n  ): void {\r\n    if (!zip) {\r\n      const id = stored?.settingsState?.modId || initial.modId;\r\n      this.requestData(id).subscribe(([data]) => {\r\n        if (!stored?.productsState) {\r\n          this.store.dispatch(new Products.ResetAction(data.items[0].id));\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  requestData(id: string): Observable<[ModData, ModHash, ModI18n | null]> {\r\n    const payload: Datasets.DatasetPayload = {\r\n      data: null,\r\n      hash: null,\r\n      i18n: null,\r\n    };\r\n\r\n    /** Setup observable for data */\r\n    if (!this.cacheData[id]) {\r\n      this.cacheData[id] = this.http.get<ModData>(`data/${id}/data.json`).pipe(\r\n        tap((value) => {\r\n          payload.data = { id, value };\r\n        }),\r\n        shareReplay()\r\n      );\r\n    }\r\n    const data$ = this.cacheData[id];\r\n\r\n    /** Setup observable for hash */\r\n    if (!this.cacheHash[id]) {\r\n      this.cacheHash[id] = this.http.get<ModHash>(`data/${id}/hash.json`).pipe(\r\n        tap((value) => {\r\n          payload.hash = { id, value };\r\n        }),\r\n        shareReplay()\r\n      );\r\n    }\r\n    const hash$ = this.cacheHash[id];\r\n\r\n    /** Setup observable for i18n */\r\n    const i18nLang = this.translateSvc.currentLang ?? 'en';\r\n    const i18nKey = `${id}-${i18nLang}`;\r\n    const skipI18n = i18nLang === 'en';\r\n    let i18n$: Observable<ModI18n | null>;\r\n    if (skipI18n) {\r\n      i18n$ = of(null);\r\n    } else {\r\n      if (!this.cacheI18n[i18nKey]) {\r\n        this.cacheI18n[i18nKey] = this.http\r\n          .get<ModI18n>(`data/${id}/i18n/${i18nLang}.json`)\r\n          .pipe(\r\n            catchError(() => {\r\n              console.warn(`No localization file found for ${i18nKey}`);\r\n              return of(null);\r\n            }),\r\n            tap((value) => {\r\n              if (value) {\r\n                payload.i18n = { id: i18nKey, value };\r\n              }\r\n            }),\r\n            shareReplay()\r\n          );\r\n      }\r\n      i18n$ = this.cacheI18n[i18nKey];\r\n    }\r\n\r\n    return combineLatest([data$, hash$, i18n$]).pipe(\r\n      tap(() => {\r\n        if (payload.data || payload.hash || payload.i18n) {\r\n          this.store.dispatch(new Datasets.LoadModAction(payload));\r\n        }\r\n      })\r\n    );\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\nimport { Rational, Recipe } from '~/models';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class DisplayService {\r\n  icon(id: string, num?: string | number): string {\r\n    return `<i class=\"m-1 me-2 lab-icon-sm ${id}\"><span>${\r\n      num ?? ''\r\n    }</span></i>`;\r\n  }\r\n\r\n  table(rows: [string, string][]): string {\r\n    let html = `<table class=\"w-100\">`;\r\n    rows.forEach((r) => (html += `<tr><td>${r[0]}</td><td>${r[1]}</td></tr>`));\r\n    html += `</table>`;\r\n    return html;\r\n  }\r\n\r\n  round(value: Rational): string {\r\n    return Number(value.toNumber().toFixed(2)).toString();\r\n  }\r\n\r\n  power(value: Rational | string | number): string {\r\n    if (typeof value === 'string') {\r\n      value = Rational.fromString(value);\r\n    } else if (typeof value === 'number') {\r\n      value = Rational.fromNumber(value);\r\n    }\r\n    if (value.abs().lt(Rational.thousand)) {\r\n      return `${this.round(value)} kW`;\r\n    } else {\r\n      return `${this.round(value.div(Rational.thousand))} MW`;\r\n    }\r\n  }\r\n\r\n  toBonusPercent(value: Rational): string {\r\n    const rational = this.round(value.mul(Rational.hundred));\r\n    if (value.gt(Rational.zero)) {\r\n      return `+${rational}%`;\r\n    } else if (value.lt(Rational.zero)) {\r\n      return `${rational}%`;\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  recipeProcess(recipe: Recipe): string {\r\n    const timeHtml = this.icon('time', recipe.time);\r\n    const inHtml = Object.keys(recipe.in)\r\n      .map((i) => this.icon(i, recipe.in[i]))\r\n      .join('');\r\n    const outHtml = Object.keys(recipe.out)\r\n      .map((i) => this.icon(i, recipe.out[i]))\r\n      .join('');\r\n    return `${timeHtml}${inHtml}<i class=\"m-1 me-2 fa-solid fa-arrow-right\"></i>${outHtml}`;\r\n  }\r\n\r\n  invertArray(value: string[], all: string[]): string[] {\r\n    return all.filter((a) => !value.some((v) => v === a));\r\n  }\r\n}\r\n","import { ErrorHandler, Injectable, NgZone } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ErrorService {\r\n  message$ = new BehaviorSubject<string | null>(null);\r\n}\r\n\r\n@Injectable()\r\nexport class LabErrorHandler implements ErrorHandler {\r\n  constructor(private ngZone: NgZone, private error: ErrorService) {}\r\n\r\n  handleError(error: string): void {\r\n    if (this.error.message$.value == null) {\r\n      this.ngZone.run(() => {\r\n        console.error(error);\r\n        this.error.message$.next(error);\r\n      });\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Store } from '@ngrx/store';\r\nimport { combineLatest, map, Observable } from 'rxjs';\r\n\r\nimport {\r\n  Column,\r\n  Dataset,\r\n  DisplayRateInfo,\r\n  Entities,\r\n  FlowData,\r\n  FlowStyle,\r\n  ItemSettings,\r\n  NodeType,\r\n  Rational,\r\n  RecipeSettings,\r\n  Step,\r\n  themeMap,\r\n} from '~/models';\r\nimport {\r\n  Items,\r\n  LabState,\r\n  Preferences,\r\n  Products,\r\n  Recipes,\r\n  Settings,\r\n} from '~/store';\r\nimport { ColumnsState } from '~/store/preferences';\r\nimport { ThemeService } from './theme.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class FlowService {\r\n  flowData$: Observable<FlowData>;\r\n\r\n  constructor(private store: Store<LabState>, private theme: ThemeService) {\r\n    this.flowData$ = combineLatest([\r\n      this.store.select(Products.getSteps),\r\n      this.store.select(Items.getItemSettings),\r\n      this.store.select(Recipes.getRecipeSettings),\r\n      this.store.select(Recipes.getAdjustedDataset),\r\n      this.store.select(Settings.getDisplayRateInfo),\r\n      this.store.select(Preferences.getColumns),\r\n      this.theme.theme$,\r\n    ]).pipe(\r\n      map(\r\n        ([\r\n          steps,\r\n          itemSettings,\r\n          recipeSettings,\r\n          data,\r\n          dispRateInfo,\r\n          columns,\r\n          theme,\r\n        ]) =>\r\n          this.buildGraph(\r\n            steps,\r\n            itemSettings,\r\n            recipeSettings,\r\n            data,\r\n            dispRateInfo,\r\n            columns,\r\n            themeMap[theme]\r\n          )\r\n      )\r\n    );\r\n  }\r\n\r\n  buildGraph(\r\n    steps: Step[],\r\n    itemSettings: Entities<ItemSettings>,\r\n    recipeSettings: Entities<RecipeSettings>,\r\n    data: Dataset,\r\n    dispRateInfo: DisplayRateInfo,\r\n    columns: ColumnsState,\r\n    theme: FlowStyle\r\n  ): FlowData {\r\n    const flow: FlowData = {\r\n      theme,\r\n      nodes: [],\r\n      links: [],\r\n    };\r\n\r\n    const itemPrec = columns[Column.Items].precision;\r\n    const rateLbl = dispRateInfo.label;\r\n\r\n    for (const step of steps) {\r\n      if (step.recipeId && step.factories) {\r\n        const recipe = data.recipeEntities[step.recipeId];\r\n        const settings = recipeSettings[step.recipeId];\r\n\r\n        if (settings.factoryId != null) {\r\n          const factory = data.itemEntities[settings.factoryId];\r\n          // CREATE NODE: Standard recipe\r\n          flow.nodes.push({\r\n            id: `r|${step.recipeId}`,\r\n            type:\r\n              Object.keys(recipe.in).length === 0\r\n                ? NodeType.Input\r\n                : NodeType.Recipe,\r\n            name: recipe.name,\r\n            text: `${step.factories.toString(itemPrec)} ${factory.name}`,\r\n            recipe,\r\n            factoryId: settings.factoryId,\r\n            factories: step.factories.toString(\r\n              columns[Column.Factories].precision\r\n            ),\r\n          });\r\n        }\r\n      }\r\n\r\n      if (step.itemId) {\r\n        const item = data.itemEntities[step.itemId];\r\n        if (step.surplus) {\r\n          // CREATE NODE: Surplus\r\n          flow.nodes.push({\r\n            id: `s|${step.itemId}`,\r\n            type: NodeType.Surplus,\r\n            name: item.name,\r\n            text: `${step.surplus.toString(itemPrec)}${rateLbl}`,\r\n          });\r\n          // Links to surplus node\r\n          for (const sourceStep of steps) {\r\n            if (sourceStep.recipeId && sourceStep.outputs) {\r\n              if (sourceStep.outputs[step.itemId]) {\r\n                const sourceAmount = step.surplus.mul(\r\n                  sourceStep.outputs[step.itemId]\r\n                );\r\n                // CREATE LINK: Recipe -> Surplus\r\n                flow.links.push({\r\n                  source: `r|${sourceStep.recipeId}`,\r\n                  target: `s|${step.itemId}`,\r\n                  name: item.name,\r\n                  text: `${sourceAmount.toString(itemPrec)}${rateLbl}`,\r\n                });\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        if (step.items) {\r\n          let itemAmount = step.items;\r\n          if (step.parents) {\r\n            let inputAmount = Rational.zero;\r\n\r\n            // Links to recipe node\r\n            for (const targetId of Object.keys(step.parents)) {\r\n              // This is how much is requested by that recipe, but need recipe source\r\n              const targetAmount = step.items.mul(step.parents[targetId]);\r\n              // Keep track of remaining amounts\r\n              let amount = targetAmount;\r\n              itemAmount = itemAmount.sub(amount);\r\n              for (const sourceStep of steps) {\r\n                if (sourceStep.recipeId && sourceStep.outputs) {\r\n                  if (sourceStep.outputs[step.itemId]) {\r\n                    // This source step produces this item\r\n                    const sourceAmount = targetAmount.mul(\r\n                      sourceStep.outputs[step.itemId]\r\n                    );\r\n                    amount = amount.sub(sourceAmount);\r\n                    // CREATE LINK: Recipe -> Recipe\r\n                    flow.links.push({\r\n                      source: `r|${sourceStep.recipeId}`,\r\n                      target: `r|${targetId}`,\r\n                      name: item.name,\r\n                      text: `${sourceAmount.toString(itemPrec)}${rateLbl}`,\r\n                    });\r\n                  }\r\n                }\r\n              }\r\n\r\n              if (\r\n                !itemSettings[step.itemId].ignore &&\r\n                amount.gt(Rational.zero)\r\n              ) {\r\n                inputAmount = inputAmount.add(amount);\r\n                // CREATE LINK: Input -> Recipe\r\n                flow.links.push({\r\n                  source: `i|${step.itemId}`,\r\n                  target: `r|${targetId}`,\r\n                  name: item.name,\r\n                  text: `${targetAmount.toString(itemPrec)}${rateLbl}`,\r\n                });\r\n              }\r\n            }\r\n\r\n            if (\r\n              !itemSettings[step.itemId].ignore &&\r\n              inputAmount.gt(Rational.zero)\r\n            ) {\r\n              // CREATE NODE: Input\r\n              flow.nodes.push({\r\n                id: `i|${step.itemId}`,\r\n                type: NodeType.Input,\r\n                name: item.name,\r\n                text: `${inputAmount.toString(itemPrec)}${rateLbl}`,\r\n              });\r\n            }\r\n          }\r\n\r\n          if (step.output) {\r\n            // CREATE NODE: Output\r\n            flow.nodes.push({\r\n              id: `o|${step.itemId}`,\r\n              type: NodeType.Output,\r\n              name: item.name,\r\n              text: `${step.output.toString(itemPrec)}${rateLbl}`,\r\n            });\r\n            for (const sourceStep of steps) {\r\n              if (sourceStep.recipeId && sourceStep.outputs) {\r\n                if (sourceStep.outputs[step.itemId]) {\r\n                  // CREATE LINK: Recipe -> Output\r\n                  flow.links.push({\r\n                    source: `r|${sourceStep.recipeId}`,\r\n                    target: `o|${step.itemId}`,\r\n                    name: item.name,\r\n                    text: `${step.output\r\n                      .mul(sourceStep.outputs[step.itemId])\r\n                      .toString(itemPrec)}${rateLbl}`,\r\n                  });\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return flow;\r\n  }\r\n}\r\n","export * from './content.service';\r\nexport * from './data.service';\r\nexport * from './display.service';\r\nexport * from './error.service';\r\nexport * from './flow.service';\r\nexport * from './router.service';\r\nexport * from './state.service';\r\nexport * from './theme.service';\r\nexport * from './track.service';\r\n","import { Injectable } from '@angular/core';\r\nimport { Event, NavigationEnd, Router } from '@angular/router';\r\nimport { Store } from '@ngrx/store';\r\nimport { GoogleAnalyticsService } from 'ngx-google-analytics';\r\nimport { deflate, inflate } from 'pako';\r\nimport { debounceTime, Observable } from 'rxjs';\r\nimport { filter, first, map } from 'rxjs/operators';\r\n\r\nimport { data } from 'src/data';\r\nimport {\r\n  DisplayRate,\r\n  Entities,\r\n  FactorySettings,\r\n  ItemSettings,\r\n  ModHash,\r\n  Product,\r\n  RateType,\r\n  Rational,\r\n  RecipeSettings,\r\n  Step,\r\n} from '~/models';\r\nimport {\r\n  App,\r\n  Datasets,\r\n  Factories,\r\n  Items,\r\n  LabState,\r\n  Products,\r\n  Recipes,\r\n  Settings,\r\n} from '~/store';\r\nimport { DataService } from './data.service';\r\n\r\nexport const NULL = '?'; // Encoded, previously 'n'\r\nexport const EMPTY = '='; // Encoded, previously 'e'\r\nexport const LISTSEP = '_'; // Unreserved, previously ','\r\nexport const ARRAYSEP = '~'; // Unreserved, previously '+'\r\nexport const FIELDSEP = '*'; // Reserved, unescaped by encoding\r\nexport const TRUE = '1';\r\nexport const FALSE = '0';\r\nexport const BASE64ABC =\r\n  'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-.'; // Unreserved\r\nexport const MAX = BASE64ABC.length;\r\nexport const INVERT = BASE64ABC.split('').reduce(\r\n  (e: Entities<number>, c, i) => {\r\n    e[c] = i;\r\n    return e;\r\n  },\r\n  {}\r\n);\r\nexport const MIN_ZIP = 75;\r\n\r\nexport enum Section {\r\n  Version = 'v',\r\n  Mod = 'b',\r\n  Products = 'p',\r\n  Items = 'i',\r\n  Recipes = 'r',\r\n  Factories = 'f',\r\n  Settings = 's',\r\n}\r\n\r\nexport enum ZipVersion {\r\n  Version0 = '0',\r\n  Version1 = '1',\r\n  Version2 = '2',\r\n  Version3 = '3',\r\n  Version4 = '4',\r\n  Version5 = '5',\r\n}\r\n\r\nexport enum MigrationWarning {\r\n  ExpensiveDeprecation = 'Deprecated: The expensive setting has been removed. Please use or request an expensive data set instead.',\r\n}\r\n\r\nexport interface Zip {\r\n  bare: string;\r\n  hash: string;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class RouterService {\r\n  zip: string | undefined;\r\n  zipPartial: Zip = { bare: '', hash: '' };\r\n  base64codes: Uint8Array;\r\n  // Intended to denote hashing algorithm version\r\n  bareVersion = ZipVersion.Version4;\r\n  hashVersion = ZipVersion.Version5;\r\n  zipTail: Zip = {\r\n    bare: `&${Section.Version}=${this.bareVersion}`,\r\n    hash: `&${Section.Version}${this.hashVersion}`,\r\n  };\r\n  first = true;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private gaSvc: GoogleAnalyticsService,\r\n    private store: Store<LabState>,\r\n    private dataSvc: DataService\r\n  ) {\r\n    const l = 256;\r\n    this.base64codes = new Uint8Array(l);\r\n    for (let i = 0; i < l; i++) {\r\n      this.base64codes[i] = 255; // invalid character\r\n    }\r\n    for (let i = 0; i < BASE64ABC.length; i++) {\r\n      this.base64codes[BASE64ABC.charCodeAt(i)] = i;\r\n    }\r\n    this.base64codes['_'.charCodeAt(0)] = 0;\r\n  }\r\n\r\n  initialize(): void {\r\n    this.router.events.subscribe((e) => this.updateState(e));\r\n\r\n    this.store\r\n      .select(Products.getZipState)\r\n      .pipe(debounceTime(0))\r\n      .subscribe((s) => {\r\n        let skip = false;\r\n        if (this.first) {\r\n          // First update: if there are no modified settings, leave base URL.\r\n          if (\r\n            Object.keys(s.items).length === 0 &&\r\n            Object.keys(s.recipes).length === 0 &&\r\n            JSON.stringify(s.factories) ===\r\n              JSON.stringify(Factories.initialFactoriesState) &&\r\n            JSON.stringify(s.settings) ===\r\n              JSON.stringify(Settings.initialSettingsState)\r\n          ) {\r\n            // No modified settings, skip first update.\r\n            skip = true;\r\n          }\r\n          // Don't check again later, always update.\r\n          this.first = false;\r\n        }\r\n        if (!skip) {\r\n          this.updateUrl(\r\n            s.products,\r\n            s.items,\r\n            s.recipes,\r\n            s.factories,\r\n            s.settings\r\n          );\r\n        }\r\n      });\r\n  }\r\n\r\n  updateUrl(\r\n    products: Products.ProductsState,\r\n    items: Items.ItemsState,\r\n    recipes: Recipes.RecipesState,\r\n    factories: Factories.FactoriesState,\r\n    settings: Settings.SettingsState\r\n  ): void {\r\n    this.zipState(products, items, recipes, factories, settings).subscribe(\r\n      (zState) => {\r\n        this.zip = this.getHash(zState);\r\n        const hash = this.router.url.split('#');\r\n        const url = `${hash[0].split('?')[0]}?${this.zip}${\r\n          (hash[1] && `#${hash[1]}`) || ''\r\n        }`;\r\n        this.router.navigateByUrl(url);\r\n      }\r\n    );\r\n  }\r\n\r\n  zipState(\r\n    products: Products.ProductsState,\r\n    items: Items.ItemsState,\r\n    recipes: Recipes.RecipesState,\r\n    factories: Factories.FactoriesState,\r\n    settings: Settings.SettingsState\r\n  ): Observable<Zip> {\r\n    return this.store.select(Datasets.getHashEntities).pipe(\r\n      map((hashEntities) => hashEntities[settings.modId]),\r\n      filter((hash): hash is ModHash => hash != null),\r\n      first(),\r\n      map((hash) => {\r\n        const zipPartial: Zip = { bare: '', hash: '' };\r\n        // Mod\r\n        const zMod = this.zipDiffString(\r\n          settings.modId,\r\n          Settings.initialSettingsState.modId\r\n        );\r\n        if (zMod.length) {\r\n          zipPartial.hash += `&${Section.Mod}${this.getId(\r\n            data.hash.indexOf(zMod)\r\n          )}`;\r\n        }\r\n        // Products\r\n        const p = products.ids.map((i) => products.entities[i]);\r\n        const zState = this.zipProducts(p, hash);\r\n        // Settings\r\n        this.zipItems(zipPartial, items, hash);\r\n        this.zipRecipes(zipPartial, recipes, hash);\r\n        this.zipFactories(zipPartial, factories, hash);\r\n        this.zipSettings(zipPartial, settings, hash);\r\n        this.zipPartial = zipPartial;\r\n        return zState;\r\n      })\r\n    );\r\n  }\r\n\r\n  stepHref(step: Step, hash: ModHash | undefined): string | null {\r\n    if (step.items == null || step.itemId == null || hash == null) {\r\n      return null;\r\n    }\r\n    const products: Product[] = [\r\n      {\r\n        id: '0',\r\n        itemId: step.itemId,\r\n        rate: step.items.toString(),\r\n        rateType: RateType.Items,\r\n      },\r\n    ];\r\n    return '?' + this.getHash(this.zipProducts(products, hash));\r\n  }\r\n\r\n  getHash(zProducts: Zip): string {\r\n    const bare = zProducts.bare + this.zipPartial.bare + this.zipTail.bare;\r\n    const hash = zProducts.hash + this.zipPartial.hash + this.zipTail.hash;\r\n    const zip = `z=${this.bytesToBase64(deflate(hash))}`;\r\n    return bare.length < Math.max(zip.length, MIN_ZIP) ? bare : zip;\r\n  }\r\n\r\n  getParams(zip: string): Entities {\r\n    const sections = zip.split('&');\r\n    const substr = sections[0][1] === '=' ? 2 : 1;\r\n    const params = sections.reduce((e: Entities<string>, v) => {\r\n      e[v[0]] = v.substring(substr);\r\n      return e;\r\n    }, {});\r\n    return params;\r\n  }\r\n\r\n  updateState(e: Event): void {\r\n    try {\r\n      if (e instanceof NavigationEnd) {\r\n        const [prehash, ...posthash] = e.urlAfterRedirects.split('#');\r\n        const hash = posthash.join('#'); // Preserve # after first instance\r\n        const [prequery, ...postquery] = prehash.split('?');\r\n        let query = postquery.join('?'); // Preserve ? after first instance\r\n        if (!query.length && hash.length > 1 && hash[1] === '=') {\r\n          // Try to recognize and handle old hash style navigation\r\n          query = hash;\r\n        }\r\n        if (query) {\r\n          let zip = query;\r\n          if (this.zip !== zip) {\r\n            if (zip.startsWith('z=')) {\r\n              // Upgrade V0 query-unsafe zipped characters\r\n              const z = zip\r\n                .substring(2)\r\n                .replace(/\\+/g, '-')\r\n                .replace(/\\//g, '.')\r\n                .replace(/=/g, '_');\r\n              zip = this.inflateSafe(z);\r\n            }\r\n            // Upgrade V0 query-unsafe delimiters\r\n            zip = zip.replace(/,/g, LISTSEP).replace(/\\+/g, ARRAYSEP);\r\n            // Upgrade V0 null/empty values\r\n            zip = zip\r\n              .replace(/\\*n\\*/g, `*${NULL}*`)\r\n              .replace(/\\*e\\*/g, `*${EMPTY}*`);\r\n            let params = this.getParams(zip);\r\n            let warnings: string[] = [];\r\n            [params, warnings] = this.migrate(params);\r\n            this.displayWarnings(warnings);\r\n            const v = params[Section.Version] as ZipVersion;\r\n            const state: App.PartialState = {};\r\n            if (v == this.bareVersion) {\r\n              Object.keys(params).forEach((k) => {\r\n                params[k] = decodeURIComponent(params[k]);\r\n              });\r\n              if (params[Section.Products]) {\r\n                state.productsState = this.unzipProducts(params);\r\n              }\r\n              if (params[Section.Items]) {\r\n                state.itemsState = this.unzipItems(params);\r\n              }\r\n              if (params[Section.Recipes]) {\r\n                state.recipesState = this.unzipRecipes(params);\r\n              }\r\n              if (params[Section.Factories]) {\r\n                state.factoriesState = this.unzipFactories(params);\r\n              }\r\n              if (params[Section.Settings]) {\r\n                state.settingsState = this.unzipSettings(params);\r\n              }\r\n              this.dispatch(zip, state);\r\n            } else {\r\n              const modId = this.parseNString(params[Section.Mod], data.hash);\r\n              this.dataSvc\r\n                .requestData(modId || Settings.initialSettingsState.modId)\r\n                .subscribe(([_, hash]) => {\r\n                  if (params[Section.Products]) {\r\n                    state.productsState = this.unzipProducts(params, hash);\r\n                  }\r\n                  if (params[Section.Items]) {\r\n                    state.itemsState = this.unzipItems(params, hash);\r\n                  }\r\n                  if (params[Section.Recipes]) {\r\n                    state.recipesState = this.unzipRecipes(params, hash);\r\n                  }\r\n                  if (params[Section.Factories]) {\r\n                    state.factoriesState = this.unzipFactories(params, hash);\r\n                  }\r\n                  if (params[Section.Settings]) {\r\n                    state.settingsState = this.unzipSettings(params, hash);\r\n                  }\r\n                  if (modId != null) {\r\n                    state.settingsState = {\r\n                      ...state.settingsState,\r\n                      ...{ modId },\r\n                    };\r\n                  }\r\n                  this.dispatch(zip, state);\r\n                });\r\n            }\r\n          }\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      throw new Error('RouterService failed to parse url');\r\n    }\r\n  }\r\n\r\n  dispatch(zip: string, state: App.PartialState): void {\r\n    this.zip = zip;\r\n    this.store.dispatch(new App.LoadAction(state));\r\n  }\r\n\r\n  /** Migrates older zip params to latest bare/hash formats */\r\n  migrate(params: Entities<string>): [Entities<string>, string[]] {\r\n    const warnings: string[] = [];\r\n    const v = (params[Section.Version] as ZipVersion) ?? ZipVersion.Version0;\r\n    this.gaSvc.event('unzip_version', v);\r\n    switch (v) {\r\n      case ZipVersion.Version0:\r\n        return this.migrateV0(params, warnings);\r\n      case ZipVersion.Version1:\r\n        return this.migrateV1(params, warnings);\r\n      case ZipVersion.Version2:\r\n        return this.migrateV2(params, warnings);\r\n      case ZipVersion.Version3:\r\n        return this.migrateV3(params, warnings);\r\n      default:\r\n        return [params, warnings];\r\n    }\r\n  }\r\n\r\n  /** Migrates V0 bare zip to latest bare format */\r\n  migrateV0(\r\n    params: Entities<string>,\r\n    warnings: string[]\r\n  ): [Entities<string>, string[]] {\r\n    if (params[Section.Settings]) {\r\n      // Reorganize settings\r\n      const zip = params[Section.Settings];\r\n      const s = zip.split(FIELDSEP);\r\n      // Convert modId to V1\r\n      let modId = this.parseString(s[0]);\r\n      modId = modId && data.hash[data.v0.indexOf(modId)];\r\n      modId = modId ?? NULL;\r\n      // Convert displayRate to V1\r\n      const displayRateV0 =\r\n        this.parseNumber(s[6]) ?? Settings.initialSettingsState.displayRate;\r\n      const displayRateV1 = this.zipDiffDisplayRate(\r\n        displayRateV0,\r\n        Settings.initialSettingsState.displayRate\r\n      );\r\n      params[Section.Settings] = this.zipFields([\r\n        modId,\r\n        displayRateV1,\r\n        params[Section.Mod], // Legacy preset\r\n        s[1], // disabledRecipeIds\r\n        s[3], // beltId\r\n        s[4], // fuelId\r\n        s[5], // flowRate\r\n        s[7], // miningBonus\r\n        s[8], // researchSpeed\r\n        s[10], // inserterCapacity\r\n        s[9], // inserterTarget\r\n        s[2], // expensive\r\n        s[11], // cargoWagonId\r\n        s[12], // fluidWagonId\r\n      ]);\r\n    } else if (params[Section.Mod]) {\r\n      params[Section.Settings] = this.zipFields([\r\n        NULL,\r\n        NULL,\r\n        params[Section.Mod], // Legacy preset\r\n      ]);\r\n    }\r\n    params[Section.Version] = ZipVersion.Version1;\r\n    return this.migrateV1(params, warnings);\r\n  }\r\n\r\n  /** Migrates V1 bare zip to latest bare format */\r\n  migrateV1(\r\n    params: Entities<string>,\r\n    warnings: string[]\r\n  ): [Entities<string>, string[]] {\r\n    if (params[Section.Settings]) {\r\n      const zip = params[Section.Settings];\r\n      const s = zip.split(FIELDSEP);\r\n      const index = 11; // Index of expensive field\r\n      if (s.length > index) {\r\n        // Remove expensive field\r\n        const val = s.splice(index, 1);\r\n        const expensive = this.parseBool(val[0]);\r\n        if (expensive) {\r\n          warnings.push(MigrationWarning.ExpensiveDeprecation);\r\n        }\r\n      }\r\n      params[Section.Settings] = this.zipFields(s);\r\n    }\r\n    params[Section.Version] = ZipVersion.Version4;\r\n    return [params, warnings];\r\n  }\r\n\r\n  /** Migrates V2 hash zip to latest hash format */\r\n  migrateV2(\r\n    params: Entities<string>,\r\n    warnings: string[]\r\n  ): [Entities<string>, string[]] {\r\n    if (params[Section.Recipes]) {\r\n      // Convert recipe settings\r\n      const zip = params[Section.Recipes];\r\n      const list = zip.split(LISTSEP);\r\n      const migrated = [];\r\n      const index = 3; // Index of beaconCount field\r\n      for (const recipe of list) {\r\n        const s = recipe.split(FIELDSEP);\r\n        if (s.length > index) {\r\n          // Convert beaconCount from number to string format\r\n          const asString = this.parseNNumber(s[index])?.toString();\r\n          s[index] = this.zipTruthyString(asString);\r\n        }\r\n        migrated.push(this.zipFields(s));\r\n      }\r\n      params[Section.Recipes] = migrated.join(LISTSEP);\r\n    }\r\n    if (params[Section.Factories]) {\r\n      // Convert factory settings\r\n      const zip = params[Section.Factories];\r\n      const list = zip.split(LISTSEP);\r\n      const migrated = [];\r\n      const index = 2; // Index of beaconCount field\r\n      for (const factory of list) {\r\n        const s = factory.split(FIELDSEP);\r\n        if (s.length > index) {\r\n          // Convert beaconCount from number to string format\r\n          const asString = this.parseNNumber(s[index])?.toString();\r\n          s[index] = this.zipTruthyString(asString);\r\n        }\r\n        migrated.push(this.zipFields(s));\r\n      }\r\n      params[Section.Factories] = migrated.join(LISTSEP);\r\n    }\r\n    params[Section.Version] = ZipVersion.Version3;\r\n    return this.migrateV3(params, warnings);\r\n  }\r\n\r\n  /** Migrates V3 hash zip to latest hash format */\r\n  migrateV3(\r\n    params: Entities<string>,\r\n    warnings: string[]\r\n  ): [Entities<string>, string[]] {\r\n    if (params[Section.Settings]) {\r\n      const zip = params[Section.Settings];\r\n      const s = zip.split(FIELDSEP);\r\n      const index = 10; // Index of expensive field\r\n      if (s.length > index) {\r\n        // Remove expensive field\r\n        const val = s.splice(index, 1);\r\n        const expensive = this.parseBool(val[0]);\r\n        if (expensive) {\r\n          warnings.push(MigrationWarning.ExpensiveDeprecation);\r\n        }\r\n      }\r\n      params[Section.Settings] = this.zipFields(s);\r\n    }\r\n    params[Section.Version] = ZipVersion.Version5;\r\n    return [params, warnings];\r\n  }\r\n\r\n  displayWarnings(warnings: string[]): void {\r\n    if (warnings.length) {\r\n      window.alert(warnings.join('\\r\\n'));\r\n    }\r\n  }\r\n\r\n  zipProducts(products: Product[], hash: ModHash): Zip {\r\n    const z = this.zipList(\r\n      products.map((obj) => {\r\n        const r = Rational.fromString(obj.rate).toString();\r\n        const t = this.zipDiffNumber(obj.rateType, RateType.Items);\r\n\r\n        return {\r\n          bare: this.zipFields([\r\n            obj.itemId,\r\n            r,\r\n            t,\r\n            this.zipTruthyString(obj.viaId),\r\n          ]),\r\n          hash: this.zipFields([\r\n            this.zipTruthyNString(obj.itemId, hash.items),\r\n            r,\r\n            t,\r\n            this.zipTruthyNString(\r\n              obj.viaId,\r\n              obj.rateType === RateType.Factories ? hash.recipes : hash.items\r\n            ),\r\n          ]),\r\n        };\r\n      })\r\n    );\r\n\r\n    return {\r\n      bare: `${Section.Products}=${z.bare}`,\r\n      hash: `${Section.Products}${z.hash}`,\r\n    };\r\n  }\r\n\r\n  unzipProducts(params: Entities, hash?: ModHash): Products.ProductsState {\r\n    const list = params[Section.Products].split(LISTSEP);\r\n    const ids: string[] = [];\r\n    const entities: Entities<Product> = {};\r\n    let index = 0;\r\n    for (const product of list) {\r\n      const s = product.split(FIELDSEP);\r\n      let i = 0;\r\n      const id = index.toString();\r\n      let obj: Product;\r\n\r\n      if (hash) {\r\n        obj = {\r\n          id,\r\n          itemId: this.parseNString(s[i++], hash.items) ?? '',\r\n          rate: s[i++],\r\n          rateType: Number(s[i++]) | RateType.Items,\r\n        };\r\n        obj.viaId = this.parseNString(\r\n          s[i++],\r\n          obj.rateType === RateType.Factories ? hash.recipes : hash.items\r\n        );\r\n      } else {\r\n        obj = {\r\n          id,\r\n          itemId: s[i++],\r\n          rate: s[i++],\r\n          rateType: Number(s[i++]) | RateType.Items,\r\n          viaId: this.parseString(s[i++]),\r\n        };\r\n      }\r\n\r\n      Object.keys(obj)\r\n        .filter((k) => (obj as Record<string, any>)[k] === undefined)\r\n        .forEach((k) => {\r\n          delete (obj as Record<string, any>)[k];\r\n        });\r\n\r\n      ids.push(id);\r\n      entities[id] = obj;\r\n      index++;\r\n    }\r\n    return { ids, index, entities };\r\n  }\r\n\r\n  zipItems(partial: Zip, state: Items.ItemsState, hash: ModHash): void {\r\n    const z = this.zipList(\r\n      Object.keys(state).map((i) => {\r\n        const obj = state[i];\r\n        const g = this.zipTruthyBool(obj.ignore);\r\n\r\n        return {\r\n          bare: this.zipFields([\r\n            i,\r\n            g,\r\n            this.zipTruthyString(obj.beltId),\r\n            this.zipTruthyString(obj.wagonId),\r\n            this.zipTruthyString(obj.recipeId),\r\n          ]),\r\n          hash: this.zipFields([\r\n            this.zipTruthyNString(i, hash.items),\r\n            g,\r\n            this.zipTruthyNString(obj.beltId, hash.belts),\r\n            this.zipTruthyNString(obj.wagonId, hash.wagons),\r\n            this.zipTruthyNString(obj.recipeId, hash.recipes),\r\n          ]),\r\n        };\r\n      })\r\n    );\r\n\r\n    if (z.bare.length) {\r\n      partial.bare += `&${Section.Items}=${z.bare}`;\r\n      partial.hash += `&${Section.Items}${z.hash}`;\r\n    }\r\n  }\r\n\r\n  unzipItems(params: Entities, hash?: ModHash): Items.ItemsState {\r\n    const list = params[Section.Items].split(LISTSEP);\r\n    const entities: Items.ItemsState = {};\r\n    for (const item of list) {\r\n      const s = item.split(FIELDSEP);\r\n      let i = 0;\r\n      let id: string;\r\n      let obj: ItemSettings;\r\n\r\n      if (hash) {\r\n        id = this.parseNString(s[i++], hash.items) ?? '';\r\n        obj = {\r\n          ignore: this.parseBool(s[i++]),\r\n          beltId: this.parseNString(s[i++], hash.belts),\r\n          wagonId: this.parseNString(s[i++], hash.wagons),\r\n          recipeId: this.parseNString(s[i++], hash.recipes),\r\n        };\r\n      } else {\r\n        id = s[i++];\r\n        obj = {\r\n          ignore: this.parseBool(s[i++]),\r\n          beltId: this.parseString(s[i++]),\r\n          wagonId: this.parseString(s[i++]),\r\n          recipeId: this.parseString(s[i++]),\r\n        };\r\n      }\r\n\r\n      Object.keys(obj)\r\n        .filter((k) => (obj as Record<string, any>)[k] === undefined)\r\n        .forEach((k) => {\r\n          delete (obj as Record<string, any>)[k];\r\n        });\r\n\r\n      entities[id] = obj;\r\n    }\r\n    return entities;\r\n  }\r\n\r\n  zipRecipes(partial: Zip, state: Recipes.RecipesState, hash: ModHash): void {\r\n    const z = this.zipList(\r\n      Object.keys(state).map((i) => {\r\n        const obj = state[i];\r\n\r\n        return {\r\n          bare: this.zipFields([\r\n            i,\r\n            this.zipTruthyString(obj.factoryId),\r\n            this.zipTruthyArray(obj.factoryModuleIds),\r\n            this.zipTruthyString(obj.beaconCount),\r\n            this.zipTruthyArray(obj.beaconModuleIds),\r\n            this.zipTruthyString(obj.beaconId),\r\n            this.zipTruthyNumber(obj.overclock),\r\n            this.zipTruthyString(obj.cost),\r\n            this.zipTruthyString(obj.beaconTotal),\r\n          ]),\r\n          hash: this.zipFields([\r\n            this.zipTruthyNString(i, hash.recipes),\r\n            this.zipTruthyNString(obj.factoryId, hash.factories),\r\n            this.zipTruthyNArray(obj.factoryModuleIds, hash.modules),\r\n            this.zipTruthyString(obj.beaconCount),\r\n            this.zipTruthyNArray(obj.beaconModuleIds, hash.modules),\r\n            this.zipTruthyNString(obj.beaconId, hash.beacons),\r\n            this.zipTruthyNumber(obj.overclock),\r\n            this.zipTruthyString(obj.cost),\r\n            this.zipTruthyString(obj.beaconTotal),\r\n          ]),\r\n        };\r\n      })\r\n    );\r\n\r\n    if (z.bare.length) {\r\n      partial.bare += `&${Section.Recipes}=${z.bare}`;\r\n      partial.hash += `&${Section.Recipes}${z.hash}`;\r\n    }\r\n  }\r\n\r\n  unzipRecipes(params: Entities, hash?: ModHash): Recipes.RecipesState {\r\n    const list = params[Section.Recipes].split(LISTSEP);\r\n    const entities: Recipes.RecipesState = {};\r\n    for (const recipe of list) {\r\n      const s = recipe.split(FIELDSEP);\r\n      let i = 0;\r\n      let id: string;\r\n      let obj: RecipeSettings;\r\n\r\n      if (hash) {\r\n        id = this.parseNString(s[i++], hash.recipes) ?? '';\r\n        obj = {\r\n          factoryId: this.parseNString(s[i++], hash.factories),\r\n          factoryModuleIds: this.parseNArray(s[i++], hash.modules),\r\n          beaconCount: this.parseString(s[i++]),\r\n          beaconModuleIds: this.parseNArray(s[i++], hash.modules),\r\n          beaconId: this.parseNString(s[i++], hash.beacons),\r\n          overclock: this.parseNumber(s[i++]),\r\n          cost: this.parseString(s[i++]),\r\n          beaconTotal: this.parseString(s[i++]),\r\n        };\r\n      } else {\r\n        id = s[i++];\r\n        obj = {\r\n          factoryId: this.parseString(s[i++]),\r\n          factoryModuleIds: this.parseArray(s[i++]),\r\n          beaconCount: this.parseString(s[i++]),\r\n          beaconModuleIds: this.parseArray(s[i++]),\r\n          beaconId: this.parseString(s[i++]),\r\n          overclock: this.parseNumber(s[i++]),\r\n          cost: this.parseString(s[i++]),\r\n          beaconTotal: this.parseString(s[i++]),\r\n        };\r\n      }\r\n\r\n      Object.keys(obj)\r\n        .filter((k) => (obj as Record<string, any>)[k] === undefined)\r\n        .forEach((k) => {\r\n          delete (obj as Record<string, any>)[k];\r\n        });\r\n\r\n      entities[id] = obj;\r\n    }\r\n    return entities;\r\n  }\r\n\r\n  zipFactories(\r\n    partial: Zip,\r\n    state: Factories.FactoriesState,\r\n    hash: ModHash\r\n  ): void {\r\n    const ids = state.ids ? ['', ...state.ids] : Object.keys(state.entities);\r\n    const z = this.zipList(\r\n      ids.map((i) => {\r\n        const obj = state.entities[i] || {};\r\n        let h = true;\r\n        if (i === '') {\r\n          i = state.ids == null ? '' : TRUE;\r\n          h = false;\r\n        }\r\n        return {\r\n          bare: this.zipFields([\r\n            i,\r\n            this.zipTruthyArray(obj.moduleRankIds),\r\n            this.zipTruthyString(obj.beaconCount),\r\n            this.zipTruthyString(obj.beaconModuleId),\r\n            this.zipTruthyString(obj.beaconId),\r\n            this.zipTruthyNumber(obj.overclock),\r\n          ]),\r\n          hash: this.zipFields([\r\n            h ? this.zipTruthyNString(i, hash.factories) : i,\r\n            this.zipTruthyNArray(obj.moduleRankIds, hash.modules),\r\n            this.zipTruthyString(obj.beaconCount),\r\n            this.zipTruthyNString(obj.beaconModuleId, hash.modules),\r\n            this.zipTruthyNString(obj.beaconId, hash.beacons),\r\n            this.zipTruthyNumber(obj.overclock),\r\n          ]),\r\n        };\r\n      })\r\n    );\r\n\r\n    if (z.bare.length) {\r\n      partial.bare += `&${Section.Factories}=${z.bare}`;\r\n      partial.hash += `&${Section.Factories}${z.hash}`;\r\n    }\r\n  }\r\n\r\n  unzipFactories(params: Entities, hash?: ModHash): Factories.FactoriesState {\r\n    const list = params[Section.Factories].split(LISTSEP);\r\n    let ids: string[] | undefined;\r\n    const entities: Entities<FactorySettings> = {};\r\n    let loadIds = false;\r\n    for (let z = 0; z < list.length; z++) {\r\n      const factory = list[z];\r\n      const s = factory.split(FIELDSEP);\r\n      let i = 0;\r\n      let id: string | undefined;\r\n      let obj: Partial<FactorySettings>;\r\n\r\n      if (hash) {\r\n        id = s[i++];\r\n        obj = {\r\n          moduleRankIds: this.parseNArray(s[i++], hash.modules),\r\n          beaconCount: this.parseString(s[i++]),\r\n          beaconModuleId: this.parseNString(s[i++], hash.modules),\r\n          beaconId: this.parseNString(s[i++], hash.beacons),\r\n          overclock: this.parseNumber(s[i++]),\r\n        };\r\n        if (z === 0 && id === TRUE) {\r\n          loadIds = true;\r\n          ids = [];\r\n          id = '';\r\n        } else {\r\n          if (id) {\r\n            id = this.parseNString(id, hash.factories);\r\n          }\r\n          if (loadIds && ids != null) {\r\n            ids.push(id ?? '');\r\n          }\r\n        }\r\n      } else {\r\n        id = s[i++];\r\n        obj = {\r\n          moduleRankIds: this.parseArray(s[i++]),\r\n          beaconCount: this.parseString(s[i++]),\r\n          beaconModuleId: this.parseString(s[i++]),\r\n          beaconId: this.parseString(s[i++]),\r\n          overclock: this.parseNumber(s[i++]),\r\n        };\r\n        if (z === 0 && id === TRUE) {\r\n          loadIds = true;\r\n          ids = [];\r\n          id = '';\r\n        } else if (loadIds && ids != null) {\r\n          ids.push(id);\r\n        }\r\n      }\r\n\r\n      Object.keys(obj)\r\n        .filter((k) => (obj as Record<string, any>)[k] === undefined)\r\n        .forEach((k) => {\r\n          delete (obj as Record<string, any>)[k];\r\n        });\r\n\r\n      if (Object.keys(obj).length) {\r\n        entities[id ?? ''] = obj;\r\n      }\r\n    }\r\n    return { ids, entities };\r\n  }\r\n\r\n  zipSettings(\r\n    partial: Zip,\r\n    state: Settings.SettingsState,\r\n    hash: ModHash\r\n  ): void {\r\n    const init = Settings.initialSettingsState;\r\n    const z: Zip = {\r\n      bare: this.zipFields([\r\n        this.zipDiffString(state.modId, init.modId),\r\n        this.zipDiffDisplayRate(state.displayRate, init.displayRate),\r\n        this.zipDiffNumber(state.preset, init.preset),\r\n        this.zipDiffArray(state.disabledRecipeIds, init.disabledRecipeIds),\r\n        this.zipDiffString(state.beltId, init.beltId),\r\n        this.zipDiffString(state.fuelId, init.fuelId),\r\n        this.zipDiffNumber(state.flowRate, init.flowRate),\r\n        this.zipDiffNumber(state.miningBonus, init.miningBonus),\r\n        this.zipDiffNumber(state.researchSpeed, init.researchSpeed),\r\n        this.zipDiffNumber(state.inserterCapacity, init.inserterCapacity),\r\n        this.zipDiffNumber(state.inserterTarget, init.inserterTarget),\r\n        this.zipDiffString(state.cargoWagonId, init.cargoWagonId),\r\n        this.zipDiffString(state.fluidWagonId, init.fluidWagonId),\r\n        this.zipDiffString(state.pipeId, init.pipeId),\r\n        this.zipDiffString(state.costFactor, init.costFactor),\r\n        this.zipDiffString(state.costFactory, init.costFactory),\r\n        this.zipDiffString(state.costInput, init.costInput),\r\n        this.zipDiffString(state.costIgnored, init.costIgnored),\r\n        this.zipDiffString(state.beaconReceivers, init.beaconReceivers),\r\n        this.zipDiffString(state.proliferatorSprayId, init.proliferatorSprayId),\r\n      ]),\r\n      hash: this.zipFields([\r\n        this.zipDiffDisplayRate(state.displayRate, init.displayRate),\r\n        this.zipDiffNumber(state.preset, init.preset),\r\n        this.zipDiffNArray(\r\n          state.disabledRecipeIds,\r\n          init.disabledRecipeIds,\r\n          hash.recipes\r\n        ),\r\n        this.zipDiffNString(state.beltId, init.beltId, hash.belts),\r\n        this.zipDiffNString(state.fuelId, init.fuelId, hash.fuels),\r\n        this.zipDiffNNumber(state.flowRate, init.flowRate),\r\n        this.zipDiffNNumber(state.miningBonus, init.miningBonus),\r\n        this.zipDiffNNumber(state.researchSpeed, init.researchSpeed),\r\n        this.zipDiffNumber(state.inserterCapacity, init.inserterCapacity),\r\n        this.zipDiffNumber(state.inserterTarget, init.inserterTarget),\r\n        this.zipDiffNString(state.cargoWagonId, init.cargoWagonId, hash.wagons),\r\n        this.zipDiffNString(state.fluidWagonId, init.fluidWagonId, hash.wagons),\r\n        this.zipDiffNString(state.pipeId, init.pipeId, hash.belts),\r\n        this.zipDiffString(state.costFactor, init.costFactor),\r\n        this.zipDiffString(state.costFactory, init.costFactory),\r\n        this.zipDiffString(state.costInput, init.costInput),\r\n        this.zipDiffString(state.costIgnored, init.costIgnored),\r\n        this.zipDiffString(state.beaconReceivers, init.beaconReceivers),\r\n        this.zipDiffNString(\r\n          state.proliferatorSprayId,\r\n          init.proliferatorSprayId,\r\n          hash.modules\r\n        ),\r\n      ]),\r\n    };\r\n\r\n    if (z.bare.length) {\r\n      partial.bare += `&${Section.Settings}=${encodeURIComponent(z.bare)}`;\r\n      partial.hash += `&${Section.Settings}${z.hash}`;\r\n    }\r\n  }\r\n\r\n  unzipSettings(\r\n    params: Entities,\r\n    hash?: ModHash\r\n  ): Partial<Settings.SettingsState> {\r\n    const zip = params[Section.Settings];\r\n    const s = zip.split(FIELDSEP);\r\n    let i = 0;\r\n    let obj: Partial<Settings.SettingsState>;\r\n\r\n    if (hash) {\r\n      obj = {\r\n        displayRate: this.parseDisplayRate(s[i++]),\r\n        preset: this.parseNumber(s[i++]),\r\n        disabledRecipeIds: this.parseNArray(s[i++], hash.recipes),\r\n        beltId: this.parseNString(s[i++], hash.belts),\r\n        fuelId: this.parseNString(s[i++], hash.fuels),\r\n        flowRate: this.parseNNumber(s[i++]),\r\n        miningBonus: this.parseNNumber(s[i++]),\r\n        researchSpeed: this.parseNNumber(s[i++]),\r\n        inserterCapacity: this.parseNumber(s[i++]),\r\n        inserterTarget: this.parseNumber(s[i++]),\r\n        cargoWagonId: this.parseNString(s[i++], hash.wagons),\r\n        fluidWagonId: this.parseNString(s[i++], hash.wagons),\r\n        pipeId: this.parseNString(s[i++], hash.belts),\r\n        costFactor: this.parseString(s[i++]),\r\n        costFactory: this.parseString(s[i++]),\r\n        costInput: this.parseString(s[i++]),\r\n        costIgnored: this.parseString(s[i++]),\r\n        beaconReceivers: this.parseString(s[i++]),\r\n        proliferatorSprayId: this.parseNString(s[i++], hash.modules),\r\n      };\r\n    } else {\r\n      obj = {\r\n        modId: this.parseString(s[i++]),\r\n        displayRate: this.parseDisplayRate(s[i++]),\r\n        preset: this.parseNumber(s[i++]),\r\n        disabledRecipeIds: this.parseArray(s[i++]),\r\n        beltId: this.parseString(s[i++]),\r\n        fuelId: this.parseString(s[i++]),\r\n        flowRate: this.parseNumber(s[i++]),\r\n        miningBonus: this.parseNumber(s[i++]),\r\n        researchSpeed: this.parseNumber(s[i++]),\r\n        inserterCapacity: this.parseNumber(s[i++]),\r\n        inserterTarget: this.parseNumber(s[i++]),\r\n        cargoWagonId: this.parseString(s[i++]),\r\n        fluidWagonId: this.parseString(s[i++]),\r\n        pipeId: this.parseString(s[i++]),\r\n        costFactor: this.parseString(s[i++]),\r\n        costFactory: this.parseString(s[i++]),\r\n        costInput: this.parseString(s[i++]),\r\n        costIgnored: this.parseString(s[i++]),\r\n        beaconReceivers: this.parseString(s[i++]),\r\n        proliferatorSprayId: this.parseString(s[i++]),\r\n      };\r\n    }\r\n\r\n    Object.keys(obj)\r\n      .filter((k) => (obj as Record<string, any>)[k] === undefined)\r\n      .forEach((k) => {\r\n        delete (obj as Record<string, any>)[k];\r\n      });\r\n\r\n    return obj;\r\n  }\r\n\r\n  zipList(list: Zip[]): Zip {\r\n    return {\r\n      bare: encodeURIComponent(list.map((i) => i.bare).join(LISTSEP)),\r\n      hash: list.map((i) => i.hash).join(LISTSEP),\r\n    };\r\n  }\r\n\r\n  zipFields(fields: string[]): string {\r\n    return fields.join(FIELDSEP).replace(/\\**$/, '');\r\n  }\r\n\r\n  zipTruthyString(value: string | undefined): string {\r\n    return value == null ? '' : value;\r\n  }\r\n\r\n  zipTruthyNumber(value: number | undefined): string {\r\n    return value == null ? '' : value.toString();\r\n  }\r\n\r\n  zipTruthyBool(value: boolean | undefined): string {\r\n    return value == null ? '' : value ? TRUE : FALSE;\r\n  }\r\n\r\n  zipTruthyArray(value: string[] | undefined): string {\r\n    return value == null ? '' : value.length ? value.join(ARRAYSEP) : EMPTY;\r\n  }\r\n\r\n  zipTruthyNString(value: string | undefined, hash: string[]): string {\r\n    return value == null ? '' : this.getId(hash.indexOf(value));\r\n  }\r\n\r\n  zipTruthyNArray(value: string[] | undefined, hash: string[]): string {\r\n    return value == null\r\n      ? ''\r\n      : value.length\r\n      ? value.map((v) => this.getId(hash.indexOf(v))).join(ARRAYSEP)\r\n      : EMPTY;\r\n  }\r\n\r\n  zipDiffString(\r\n    value: string | null | undefined,\r\n    init: string | null | undefined\r\n  ): string {\r\n    return value === init ? '' : value == null ? NULL : value;\r\n  }\r\n\r\n  zipDiffNumber(value: number | undefined, init: number | undefined): string {\r\n    return value === init ? '' : value == null ? NULL : value.toString();\r\n  }\r\n\r\n  zipDiffDisplayRate(\r\n    value: DisplayRate | undefined,\r\n    init: DisplayRate | undefined\r\n  ): string {\r\n    if (value === init) {\r\n      return '';\r\n    }\r\n    switch (value) {\r\n      case DisplayRate.PerSecond:\r\n        return '0';\r\n      case DisplayRate.PerMinute:\r\n        return '1';\r\n      case DisplayRate.PerHour:\r\n        return '2';\r\n      default:\r\n        return NULL;\r\n    }\r\n  }\r\n\r\n  zipDiffBool(value: boolean | undefined, init: boolean | undefined): string {\r\n    return value === init ? '' : value == null ? NULL : value ? TRUE : FALSE;\r\n  }\r\n\r\n  zipDiffArray(\r\n    value: string[] | undefined,\r\n    init: string[] | undefined\r\n  ): string {\r\n    const zVal =\r\n      value != null\r\n        ? value.length > 0\r\n          ? [...value].sort().join(ARRAYSEP)\r\n          : EMPTY\r\n        : NULL;\r\n    const zInit =\r\n      init != null\r\n        ? init.length > 0\r\n          ? [...init].sort().join(ARRAYSEP)\r\n          : EMPTY\r\n        : NULL;\r\n    return zVal === zInit ? '' : zVal;\r\n  }\r\n\r\n  zipDiffRank(value: string[] | undefined, init: string[] | undefined): string {\r\n    const zVal = value ? (value.length ? value.join(ARRAYSEP) : EMPTY) : NULL;\r\n    const zInit = init ? (init.length ? init.join(ARRAYSEP) : EMPTY) : NULL;\r\n    return zVal === zInit ? '' : zVal;\r\n  }\r\n\r\n  zipDiffNString(\r\n    value: string | undefined,\r\n    init: string | undefined,\r\n    hash: string[]\r\n  ): string {\r\n    return value === init\r\n      ? ''\r\n      : value == null\r\n      ? NULL\r\n      : this.getId(hash.indexOf(value));\r\n  }\r\n\r\n  zipDiffNNumber(value: number | undefined, init: number | undefined): string {\r\n    return value === init ? '' : value == null ? NULL : this.getId(value);\r\n  }\r\n\r\n  zipDiffNArray(\r\n    value: string[] | undefined,\r\n    init: string[] | undefined,\r\n    hash: string[]\r\n  ): string {\r\n    const zVal =\r\n      value != null\r\n        ? value.length > 0\r\n          ? value\r\n              .map((v) => this.getId(hash.indexOf(v)))\r\n              .sort()\r\n              .join(ARRAYSEP)\r\n          : EMPTY\r\n        : NULL;\r\n    const zInit =\r\n      init != null\r\n        ? init.length > 0\r\n          ? init\r\n              .map((v) => this.getId(hash.indexOf(v)))\r\n              .sort()\r\n              .join(ARRAYSEP)\r\n          : EMPTY\r\n        : NULL;\r\n    return zVal === zInit ? '' : zVal;\r\n  }\r\n\r\n  zipDiffNRank(\r\n    value: string[] | undefined,\r\n    init: string[] | undefined,\r\n    hash: string[]\r\n  ): string {\r\n    const zVal = value\r\n      ? value.length\r\n        ? value.map((v) => this.getId(hash.indexOf(v))).join(ARRAYSEP)\r\n        : EMPTY\r\n      : NULL;\r\n    const zInit = init\r\n      ? init.length\r\n        ? init.map((v) => this.getId(hash.indexOf(v))).join(ARRAYSEP)\r\n        : EMPTY\r\n      : NULL;\r\n    return zVal === zInit ? '' : zVal;\r\n  }\r\n\r\n  parseString(value: string | undefined): string | undefined {\r\n    if (!value?.length || value === NULL) {\r\n      return undefined;\r\n    }\r\n    return value;\r\n  }\r\n\r\n  parseBool(value: string | undefined): boolean | undefined {\r\n    if (!value?.length || value === NULL) {\r\n      return undefined;\r\n    }\r\n    return value === TRUE;\r\n  }\r\n\r\n  parseNumber(value: string | undefined): number | undefined {\r\n    if (!value?.length || value === NULL) {\r\n      return undefined;\r\n    }\r\n    return Number(value);\r\n  }\r\n\r\n  parseDisplayRate(value: string | undefined): DisplayRate | undefined {\r\n    if (!value?.length || value === NULL) {\r\n      return undefined;\r\n    }\r\n    switch (value) {\r\n      case '0':\r\n        return DisplayRate.PerSecond;\r\n      case '1':\r\n        return DisplayRate.PerMinute;\r\n      case '2':\r\n        return DisplayRate.PerHour;\r\n      default:\r\n        return undefined;\r\n    }\r\n  }\r\n\r\n  parseArray(value: string | undefined): string[] | undefined {\r\n    if (!value?.length || value === NULL) {\r\n      return undefined;\r\n    }\r\n    return value === EMPTY ? [] : value.split(ARRAYSEP);\r\n  }\r\n\r\n  parseNString(value: string | undefined, hash: string[]): string | undefined {\r\n    const v = this.parseString(value);\r\n    if (v == null) {\r\n      return v;\r\n    }\r\n    return hash[this.getN(v)];\r\n  }\r\n\r\n  parseNNumber(value: string | undefined): number | undefined {\r\n    if (!value?.length || value === NULL) {\r\n      return undefined;\r\n    }\r\n    return this.getN(value);\r\n  }\r\n\r\n  parseNArray(value: string | undefined, hash: string[]): string[] | undefined {\r\n    const v = this.parseArray(value);\r\n    if (v == null) {\r\n      return v;\r\n    }\r\n    return v.map((a) => hash[this.getN(a)]);\r\n  }\r\n\r\n  getId(n: number): string {\r\n    if (n / MAX >= 1) {\r\n      return this.getId(Math.floor(n / MAX)) + this.getId(n % MAX);\r\n    } else {\r\n      return BASE64ABC[n];\r\n    }\r\n  }\r\n\r\n  getN(id: string): number {\r\n    const n = INVERT[id[0]];\r\n    if (id.length > 1) {\r\n      id = id.substring(1);\r\n      return n * Math.pow(MAX, id.length) + this.getN(id);\r\n    } else {\r\n      return n;\r\n    }\r\n  }\r\n\r\n  getBase64Code(charCode: number): number {\r\n    if (charCode >= this.base64codes.length) {\r\n      throw new Error('Unable to parse base64 string.');\r\n    }\r\n    const code = this.base64codes[charCode];\r\n    if (code === 255) {\r\n      throw new Error('Unable to parse base64 string.');\r\n    }\r\n    return code;\r\n  }\r\n\r\n  bytesToBase64(bytes: Uint8Array): string {\r\n    let result = '';\r\n    let i: number;\r\n    const l = bytes.length;\r\n    for (i = 2; i < l; i += 3) {\r\n      result += BASE64ABC[bytes[i - 2] >> 2];\r\n      result += BASE64ABC[((bytes[i - 2] & 0x03) << 4) | (bytes[i - 1] >> 4)];\r\n      result += BASE64ABC[((bytes[i - 1] & 0x0f) << 2) | (bytes[i] >> 6)];\r\n      result += BASE64ABC[bytes[i] & 0x3f];\r\n    }\r\n    if (i === l + 1) {\r\n      // 1 octet yet to write\r\n      result += BASE64ABC[bytes[i - 2] >> 2];\r\n      result += BASE64ABC[(bytes[i - 2] & 0x03) << 4];\r\n      result += '__';\r\n    }\r\n    if (i === l) {\r\n      // 2 octets yet to write\r\n      result += BASE64ABC[bytes[i - 2] >> 2];\r\n      result += BASE64ABC[((bytes[i - 2] & 0x03) << 4) | (bytes[i - 1] >> 4)];\r\n      result += BASE64ABC[(bytes[i - 1] & 0x0f) << 2];\r\n      result += '_';\r\n    }\r\n    return result;\r\n  }\r\n\r\n  inflateSafe(str: string): string {\r\n    try {\r\n      return this.inflate(str);\r\n    } catch {\r\n      console.warn(\r\n        'Router failed to parse url, checking for missing trailing characters...'\r\n      );\r\n    }\r\n    try {\r\n      return this.inflateMend(str, '-');\r\n    } catch {}\r\n    try {\r\n      return this.inflateMend(str, '.');\r\n    } catch {}\r\n    return this.inflateMend(str, '_');\r\n  }\r\n\r\n  inflateMend(str: string, char: string): string {\r\n    const z = this.inflate(str + char);\r\n    if (!z) throw new Error('Failed to parse, generated empty string');\r\n    console.warn(`Router mended url by appending '${char}'`);\r\n    return z;\r\n  }\r\n\r\n  inflate(str: string): string {\r\n    return inflate(this.base64ToBytes(str), { to: 'string' });\r\n  }\r\n\r\n  base64ToBytes(str: string): Uint8Array {\r\n    if (str.length % 4 !== 0) {\r\n      throw new Error('Unable to parse base64 string.');\r\n    }\r\n    const index = str.indexOf('_');\r\n    if (index !== -1 && index < str.length - 2) {\r\n      throw new Error('Unable to parse base64 string.');\r\n    }\r\n    const missingOctets = str.endsWith('__') ? 2 : str.endsWith('_') ? 1 : 0;\r\n    const n = str.length;\r\n    const result = new Uint8Array(3 * (n / 4));\r\n    let buffer: number;\r\n    for (let i = 0, j = 0; i < n; i += 4, j += 3) {\r\n      buffer =\r\n        (this.getBase64Code(str.charCodeAt(i)) << 18) |\r\n        (this.getBase64Code(str.charCodeAt(i + 1)) << 12) |\r\n        (this.getBase64Code(str.charCodeAt(i + 2)) << 6) |\r\n        this.getBase64Code(str.charCodeAt(i + 3));\r\n      result[j] = buffer >> 16;\r\n      result[j + 1] = (buffer >> 8) & 0xff;\r\n      result[j + 2] = buffer & 0xff;\r\n    }\r\n    return result.subarray(0, result.length - missingOctets);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Meta } from '@angular/platform-browser';\r\nimport { Store } from '@ngrx/store';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { GoogleAnalyticsService } from 'ngx-google-analytics';\r\nimport { combineLatest } from 'rxjs';\r\nimport { filter, first } from 'rxjs/operators';\r\n\r\nimport { environment } from 'src/environments';\r\nimport { FuelType, gameInfo, ModHash } from '~/models';\r\nimport { LabState, Preferences, Products, Settings } from '~/store';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class StateService {\r\n  constructor(\r\n    private meta: Meta,\r\n    private gaSvc: GoogleAnalyticsService,\r\n    private store: Store<LabState>,\r\n    private translateSvc: TranslateService\r\n  ) {}\r\n\r\n  initialize(): void {\r\n    this.gaSvc.event('version', environment.version);\r\n\r\n    this.store.select(Settings.getGame).subscribe((game) => {\r\n      this.gaSvc.event('set_game', game);\r\n      this.meta.updateTag({\r\n        name: 'description',\r\n        content: `A feature-rich production calculator for ${gameInfo[game].meta} and similar games.\r\nDetermine resource and factory requirements for your desired output products.`,\r\n      });\r\n    });\r\n\r\n    this.store.select(Preferences.getLanguage).subscribe((lang) => {\r\n      this.translateSvc.use(lang);\r\n      this.gaSvc.event('set_lang', lang);\r\n    });\r\n\r\n    this.store.select(Settings.getModId).subscribe((modId) => {\r\n      this.gaSvc.event('set_mod_id', modId);\r\n    });\r\n\r\n    this.store.select(Products.checkViaState).subscribe((s) => {\r\n      for (const product of s.products) {\r\n        if (\r\n          product.viaId &&\r\n          product.viaId !== product.itemId &&\r\n          product.rate.nonzero() &&\r\n          s.rates[product.id].isZero()\r\n        ) {\r\n          // Reset invalid viaId\r\n          // This normally occurs when a chosen viaId no longer appears in the result steps\r\n          // Usually due to some parent item/recipe being ignored or recipe disabled\r\n          this.store.dispatch(new Products.ResetViaAction(product.id));\r\n        }\r\n      }\r\n    });\r\n\r\n    // Used only in development to update hash files\r\n    // istanbul ignore next\r\n    if (environment.debug) {\r\n      this.checkHash();\r\n    }\r\n  }\r\n\r\n  // Used only in development to update hash files\r\n  // istanbul ignore next\r\n  checkHash(): void {\r\n    combineLatest([\r\n      this.store.select(Settings.getModId),\r\n      this.store.select(Settings.getDataset),\r\n    ])\r\n      .pipe(\r\n        filter(\r\n          ([modId, data]) => data.categoryIds.length > 0 && data.hash != null\r\n        ),\r\n        first()\r\n      )\r\n      .subscribe(([modId, data]) => {\r\n        console.log(modId);\r\n        const oldDisabled = data.defaults?.disabledRecipeIds ?? [];\r\n        const neededRecipes = Object.keys(data.itemRecipeId).map(\r\n          (i) => data.itemRecipeId[i]\r\n        );\r\n        const suggestedDisabled = data.complexRecipeIds.filter(\r\n          (i) => neededRecipes.indexOf(i) === -1 && !data.itemEntities[i]\r\n        );\r\n        if (JSON.stringify(oldDisabled) !== JSON.stringify(suggestedDisabled)) {\r\n          console.log(\r\n            `Suggested disabled recipes (${suggestedDisabled.length}):`\r\n          );\r\n          console.log(JSON.stringify(suggestedDisabled));\r\n        } else {\r\n          console.log('No suggested changes to default disabled recipes');\r\n        }\r\n        if (data.hash) {\r\n          const hash: ModHash = {\r\n            items: [...data.hash.items],\r\n            beacons: [...data.hash.beacons],\r\n            belts: [...data.hash.belts],\r\n            fuels: [...data.hash.fuels],\r\n            wagons: [...data.hash.wagons],\r\n            factories: [...data.hash.factories],\r\n            modules: [...data.hash.modules],\r\n            recipes: [...data.hash.recipes],\r\n          };\r\n          const old = JSON.stringify(hash);\r\n          for (const id of [...data.itemIds]\r\n            .sort()\r\n            .filter((i) => hash.items.indexOf(i) === -1)) {\r\n            hash.items.push(id);\r\n          }\r\n          for (const id of [...data.beaconIds]\r\n            .sort()\r\n            .filter((i) => hash.beacons.indexOf(i) === -1)) {\r\n            hash.beacons.push(id);\r\n          }\r\n          for (const id of [...data.beltIds, ...data.pipeIds]\r\n            .sort()\r\n            .filter((i) => hash.belts.indexOf(i) === -1)) {\r\n            hash.belts.push(id);\r\n          }\r\n          if (data.fuelIds[FuelType.Chemical]) {\r\n            for (const id of [...data.fuelIds[FuelType.Chemical]]\r\n              .sort()\r\n              .filter((i) => hash.fuels.indexOf(i) === -1)) {\r\n              hash.fuels.push(id);\r\n            }\r\n          }\r\n          for (const id of [...data.cargoWagonIds, ...data.fluidWagonIds]\r\n            .sort()\r\n            .filter((i) => hash.wagons.indexOf(i) === -1)) {\r\n            hash.wagons.push(id);\r\n          }\r\n          for (const id of [...data.factoryIds]\r\n            .sort()\r\n            .filter((i) => hash.factories.indexOf(i) === -1)) {\r\n            hash.factories.push(id);\r\n          }\r\n          for (const id of [...data.moduleIds]\r\n            .sort()\r\n            .filter((i) => hash.modules.indexOf(i) === -1)) {\r\n            hash.modules.push(id);\r\n          }\r\n          for (const id of [...data.recipeIds]\r\n            .sort()\r\n            .filter((i) => hash.recipes.indexOf(i) === -1)) {\r\n            hash.recipes.push(id);\r\n          }\r\n          if (old === JSON.stringify(hash)) {\r\n            console.log('No change in hash');\r\n          } else {\r\n            console.log('New hash:');\r\n            console.log(JSON.stringify(hash));\r\n          }\r\n        }\r\n        if (data.defaults) {\r\n          const filteredDisabledRecipeIds =\r\n            data.defaults.disabledRecipeIds.filter((a) =>\r\n              data.complexRecipeIds.some((b) => b === a)\r\n            );\r\n          if (\r\n            filteredDisabledRecipeIds.length !==\r\n            data.defaults.disabledRecipeIds.length\r\n          ) {\r\n            console.log(\r\n              `Filtered disabled recipes (${filteredDisabledRecipeIds.length}):`\r\n            );\r\n            console.log(JSON.stringify(filteredDisabledRecipeIds));\r\n          } else {\r\n            console.log('No unrecognized disabled recipes');\r\n          }\r\n        }\r\n        const invalidRecipes: string[] = [];\r\n        for (const id of data.recipeIds) {\r\n          if (!data.recipeEntities[id].producers?.length) {\r\n            invalidRecipes.push(id);\r\n          }\r\n        }\r\n        if (invalidRecipes.length) {\r\n          console.log(\r\n            `Found recipes with no producers: (${invalidRecipes.length}):`\r\n          );\r\n          console.log(JSON.stringify(invalidRecipes));\r\n        }\r\n      });\r\n  }\r\n}\r\n","import { DOCUMENT } from '@angular/common';\r\nimport { Inject, Injectable } from '@angular/core';\r\nimport { Store } from '@ngrx/store';\r\nimport { combineLatest, fromEvent, map, Observable, startWith } from 'rxjs';\r\n\r\nimport { Theme } from '~/models';\r\nimport { LabState, Preferences, Settings } from '~/store';\r\nimport { BrowserUtility } from '~/utilities';\r\n\r\nconst LAB_ICON_STYLE_ID = 'lab-icon-css';\r\nconst LAB_THEME_STYLE_ID = 'lab-theme-css';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ThemeService {\r\n  head = this.document.getElementsByTagName('head')[0];\r\n  theme$: Observable<Theme.Light | Theme.Dark>;\r\n\r\n  constructor(\r\n    @Inject(DOCUMENT) private document: Document,\r\n    private store: Store<LabState>\r\n  ) {\r\n    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');\r\n    const prefersDark$ = fromEvent<MediaQueryList>(prefersDark, 'change').pipe(\r\n      startWith(prefersDark),\r\n      map((list) => list.matches)\r\n    );\r\n\r\n    this.theme$ = combineLatest([\r\n      this.store.select(Preferences.getTheme),\r\n      prefersDark$,\r\n    ]).pipe(\r\n      map(([theme, prefersDark]) => {\r\n        if (theme === Theme.System) {\r\n          // Don't need to test media query specifically\r\n          // istanbul ignore next\r\n          return prefersDark ? Theme.Dark : Theme.Light;\r\n        }\r\n\r\n        return theme;\r\n      })\r\n    );\r\n  }\r\n\r\n  initialize(): void {\r\n    this.store.select(Settings.getDataset).subscribe((data) => {\r\n      // Generate .lab-icon::before css rules stylesheet\r\n      const old = this.document.getElementById(LAB_ICON_STYLE_ID);\r\n      if (old) {\r\n        this.head.removeChild(old);\r\n      }\r\n      const style = this.document.createElement('style');\r\n      style.id = LAB_ICON_STYLE_ID;\r\n      let css = '';\r\n      data.iconIds.forEach((i) => {\r\n        const icon = data.iconEntities[i];\r\n        css += `.${i}::before { background-image: url(\"${icon.file}\"); background-position: ${icon.position}; } `;\r\n      });\r\n      data.itemIds\r\n        .filter((i) => data.itemEntities[i].icon)\r\n        .forEach((i) => {\r\n          const icon = data.iconEntities[data.itemEntities[i].icon!];\r\n          css += `.${i}.item::before { background-image: url(\"${icon.file}\"); background-position: ${icon.position}; } `;\r\n        });\r\n      data.recipeIds\r\n        .filter((i) => data.recipeEntities[i].icon)\r\n        .forEach((i) => {\r\n          const icon = data.iconEntities[data.recipeEntities[i].icon!];\r\n          css += `.${i}.recipe::before { background-image: url(\"${icon.file}\"); background-position: ${icon.position}; } `;\r\n        });\r\n      data.categoryIds\r\n        .filter((i) => data.categoryEntities[i].icon)\r\n        .forEach((i) => {\r\n          const icon = data.iconEntities[data.categoryEntities[i].icon!];\r\n          css += `.${i}.category::before { background-image: url(\"${icon.file}\"); background-position: ${icon.position}; } `;\r\n        });\r\n      style.innerText = css;\r\n      this.head.appendChild(style);\r\n    });\r\n\r\n    this.theme$.subscribe((theme) => {\r\n      const themeLink = this.document.getElementById(\r\n        LAB_THEME_STYLE_ID\r\n      ) as HTMLLinkElement | null;\r\n      if (themeLink) {\r\n        const href =\r\n          theme === Theme.Dark ? 'theme-dark.css' : 'theme-light.css';\r\n        if (!themeLink.href.endsWith(href)) {\r\n          // Need to switch theme, href has changed\r\n          // Create a temporary link tag to load the new style sheet\r\n          // Leave old href in place and wait for the new sheet to load\r\n          const tempLink = this.document.createElement('link');\r\n          tempLink.rel = 'stylesheet';\r\n          tempLink.href = href;\r\n          tempLink.onload = (): void => {\r\n            // New style sheet has loaded, update the main themeLink and delete the temporary link\r\n            themeLink.href = href;\r\n            this.head.removeChild(tempLink);\r\n          };\r\n          this.head.appendChild(tempLink);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Used to set up the initial theme without loading the full store.\r\n   * Helps to prevent flashing that can occur if UI loads light theme and swaps to dark at runtime.\r\n   * Unsafe to inject the full store in the app initializer because WASM may not be loaded yet.\r\n   */\r\n  static appInitTheme(): void {\r\n    const state = BrowserUtility.storedState;\r\n    const theme =\r\n      state?.preferencesState?.theme ??\r\n      Preferences.initialPreferencesState.theme;\r\n\r\n    if (theme === Theme.Light) return; // No action required\r\n\r\n    if (\r\n      theme === Theme.Dark ||\r\n      window.matchMedia('(prefers-color-scheme: dark)').matches\r\n    ) {\r\n      // Need to switch to dark theme before app starts\r\n      const themeLink = window.document.getElementById(\r\n        LAB_THEME_STYLE_ID\r\n      ) as HTMLLinkElement | null;\r\n      if (themeLink) {\r\n        themeLink.href = 'theme-dark.css';\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { KeyValue } from '@angular/common';\r\nimport { Injectable } from '@angular/core';\r\n\r\nimport { Rational } from '~/models';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class TrackService {\r\n  trackById<T extends boolean | number | string = string>(\r\n    i: number,\r\n    obj: { id: T }\r\n  ): T {\r\n    return obj.id;\r\n  }\r\n\r\n  trackByKey<T>(i: number, r: KeyValue<string, T>): string {\r\n    return r.key;\r\n  }\r\n\r\n  sortByValue(\r\n    a: KeyValue<string, Rational>,\r\n    b: KeyValue<string, Rational>\r\n  ): number {\r\n    return b.value.sub(a.value).toNumber();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Actions, createEffect } from '@ngrx/effects';\r\nimport { GoogleAnalyticsService } from 'ngx-google-analytics';\r\nimport { tap } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class AnalyticsEffects {\r\n  logEvent$ = createEffect(\r\n    () =>\r\n      this.actions$.pipe(\r\n        tap((action) => {\r\n          this.gaSvc.event('action', action.type);\r\n        })\r\n      ),\r\n    { dispatch: false }\r\n  );\r\n\r\n  constructor(\r\n    private gaSvc: GoogleAnalyticsService,\r\n    private actions$: Actions\r\n  ) {}\r\n}\r\n","import { Action } from '@ngrx/store';\r\n\r\nimport { DatasetsState } from './datasets';\r\nimport { FactoriesState } from './factories';\r\nimport { ItemsState } from './items';\r\nimport { ProductsState } from './products';\r\nimport { RecipesState } from './recipes';\r\nimport { SettingsState } from './settings';\r\n\r\nexport interface PartialState {\r\n  datasetsState?: DatasetsState;\r\n  productsState?: ProductsState;\r\n  itemsState?: ItemsState;\r\n  recipesState?: RecipesState;\r\n  factoriesState?: FactoriesState;\r\n  settingsState?: Partial<SettingsState>;\r\n}\r\n\r\nexport enum AppActionType {\r\n  LOAD = '[App] Load',\r\n  RESET = '[App] Reset',\r\n}\r\n\r\nexport class LoadAction implements Action {\r\n  readonly type = AppActionType.LOAD;\r\n  constructor(public payload: PartialState) {}\r\n}\r\n\r\nexport class ResetAction implements Action {\r\n  readonly type = AppActionType.RESET;\r\n}\r\n\r\nexport type AppAction = LoadAction | ResetAction;\r\n","import { Action } from '@ngrx/store';\r\n\r\nimport { IdPayload, ModData, ModHash, ModI18n } from 'src/app/models';\r\n\r\nexport interface DatasetPayload {\r\n  data: IdPayload<ModData> | null;\r\n  hash: IdPayload<ModHash> | null;\r\n  i18n: IdPayload<ModI18n> | null;\r\n}\r\n\r\nexport const enum DatasetsActionType {\r\n  LOAD_MOD = '[Datasets] Load Mod',\r\n}\r\n\r\nexport class LoadModAction implements Action {\r\n  readonly type = DatasetsActionType.LOAD_MOD;\r\n  constructor(public payload: DatasetPayload) {}\r\n}\r\n\r\nexport type DatasetsAction = LoadModAction;\r\n","import { Injectable } from '@angular/core';\r\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\r\nimport { filter, map, switchMap } from 'rxjs/operators';\r\n\r\nimport { DataService } from '~/services';\r\nimport * as App from '../app.actions';\r\nimport * as Products from '../products';\r\nimport * as Settings from '../settings';\r\n\r\n@Injectable()\r\nexport class DatasetsEffects {\r\n  appLoad$ = createEffect(() =>\r\n    this.actions$.pipe(\r\n      ofType(App.AppActionType.LOAD),\r\n      switchMap((a: App.LoadAction) => {\r\n        const id =\r\n          a.payload.settingsState?.modId || Settings.initialSettingsState.modId;\r\n        return this.dataSvc.requestData(id).pipe(\r\n          filter(() => !a.payload.productsState),\r\n          map(([data]) => new Products.ResetAction(data.items[0].id))\r\n        );\r\n      })\r\n    )\r\n  );\r\n\r\n  appReset$ = createEffect(() =>\r\n    this.actions$.pipe(\r\n      ofType(App.AppActionType.RESET),\r\n      switchMap(() =>\r\n        this.dataSvc\r\n          .requestData(Settings.initialSettingsState.modId)\r\n          .pipe(map(([data]) => new Products.ResetAction(data.items[0].id)))\r\n      )\r\n    )\r\n  );\r\n\r\n  setModId$ = createEffect(() =>\r\n    this.actions$.pipe(\r\n      ofType(Settings.SettingsActionType.SET_MOD),\r\n      switchMap((a: Settings.SetModAction) =>\r\n        this.dataSvc\r\n          .requestData(a.payload)\r\n          .pipe(map(([data]) => new Products.ResetAction(data.items[0].id)))\r\n      )\r\n    )\r\n  );\r\n\r\n  constructor(private actions$: Actions, private dataSvc: DataService) {}\r\n}\r\n","import { data } from 'src/data';\r\nimport { AppData, Entities, ModData, ModHash, ModI18n } from '~/models';\r\nimport { DatasetsAction, DatasetsActionType } from './datasets.actions';\r\n\r\nexport interface DatasetsState extends AppData {\r\n  dataEntities: Entities<ModData>;\r\n  hashEntities: Entities<ModHash>;\r\n  i18nEntities: Entities<ModI18n>;\r\n}\r\n\r\nexport const initialDatasetsState: DatasetsState = {\r\n  ...data,\r\n  dataEntities: {},\r\n  hashEntities: {},\r\n  i18nEntities: {},\r\n};\r\n\r\nexport function datasetsReducer(\r\n  state: DatasetsState = initialDatasetsState,\r\n  action: DatasetsAction\r\n): DatasetsState {\r\n  switch (action.type) {\r\n    case DatasetsActionType.LOAD_MOD:\r\n      return {\r\n        ...state,\r\n        ...{\r\n          dataEntities: action.payload.data\r\n            ? {\r\n                ...state.dataEntities,\r\n                ...{ [action.payload.data.id]: action.payload.data.value },\r\n              }\r\n            : state.dataEntities,\r\n          hashEntities: action.payload.hash\r\n            ? {\r\n                ...state.hashEntities,\r\n                ...{ [action.payload.hash.id]: action.payload.hash.value },\r\n              }\r\n            : state.hashEntities,\r\n          i18nEntities: action.payload.i18n\r\n            ? {\r\n                ...state.i18nEntities,\r\n                ...{ [action.payload.i18n.id]: action.payload.i18n.value },\r\n              }\r\n            : state.i18nEntities,\r\n        },\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { createSelector } from '@ngrx/store';\r\n\r\nimport { Entities, Mod, ModInfo } from '~/models';\r\nimport { LabState } from '../';\r\nimport { DatasetsState } from './datasets.reducer';\r\n\r\n/* Base selector functions */\r\nexport const datasetsState = (state: LabState): DatasetsState =>\r\n  state.datasetsState;\r\n\r\nexport const getAppData = createSelector(datasetsState, (state) => state.app);\r\nexport const getModSets = createSelector(datasetsState, (state) => state.mods);\r\nexport const getDataEntities = createSelector(\r\n  datasetsState,\r\n  (state) => state.dataEntities\r\n);\r\nexport const getI18nEntities = createSelector(\r\n  datasetsState,\r\n  (state) => state.i18nEntities\r\n);\r\nexport const getHashEntities = createSelector(\r\n  datasetsState,\r\n  (state) => state.hashEntities\r\n);\r\n\r\n/* Complex selectors */\r\nexport const getModInfoEntities = createSelector(getModSets, (mods) =>\r\n  mods.reduce((e: Entities<ModInfo>, m) => {\r\n    e[m.id] = m;\r\n    return e;\r\n  }, {})\r\n);\r\n\r\nexport const getModEntities = createSelector(\r\n  getModSets,\r\n  getDataEntities,\r\n  (mods, entities) =>\r\n    mods.reduce((e: Entities<Mod>, m) => {\r\n      if (entities[m.id]) {\r\n        e[m.id] = { ...m, ...entities[m.id] };\r\n      }\r\n      return e;\r\n    }, {})\r\n);\r\n","export * from './datasets.actions';\r\nexport * from './datasets.reducer';\r\nexport * from './datasets.selectors';\r\n","import { Action } from '@ngrx/store';\r\n\r\nimport { DefaultIdPayload, DefaultPayload } from '~/models';\r\n\r\nexport const enum FactoriesActionType {\r\n  ADD = '[Factories] Add',\r\n  REMOVE = '[Factories] Remove',\r\n  RAISE = '[Factories] Raise',\r\n  LOWER = '[Factories] Lower',\r\n  SET_FACTORY = '[Factories] Set Factory',\r\n  SET_MODULE_RANK = '[Factories] Set Module Rank',\r\n  SET_BEACON_COUNT = '[Factories] Set Beacon Count',\r\n  SET_BEACON = '[Factories] Set Beacon',\r\n  SET_BEACON_MODULE = '[Factories] Set Beacon Module',\r\n  SET_OVERCLOCK = '[Factories] Set Overclock',\r\n}\r\n\r\nexport class AddAction implements Action {\r\n  readonly type = FactoriesActionType.ADD;\r\n  constructor(public payload: DefaultPayload<string, string[]>) {}\r\n}\r\n\r\nexport class RemoveAction implements Action {\r\n  readonly type = FactoriesActionType.REMOVE;\r\n  constructor(public payload: DefaultPayload<string, string[]>) {}\r\n}\r\n\r\nexport class RaiseAction implements Action {\r\n  readonly type = FactoriesActionType.RAISE;\r\n  constructor(public payload: DefaultPayload<string, string[]>) {}\r\n}\r\n\r\nexport class LowerAction implements Action {\r\n  readonly type = FactoriesActionType.LOWER;\r\n  constructor(public payload: DefaultPayload<string, string[]>) {}\r\n}\r\n\r\nexport class SetFactoryAction implements Action {\r\n  readonly type = FactoriesActionType.SET_FACTORY;\r\n  constructor(public payload: DefaultIdPayload<string, string[]>) {}\r\n}\r\n\r\nexport class SetModuleRankAction implements Action {\r\n  readonly type = FactoriesActionType.SET_MODULE_RANK;\r\n  constructor(public payload: DefaultIdPayload<string[]>) {}\r\n}\r\n\r\nexport class SetBeaconCountAction implements Action {\r\n  readonly type = FactoriesActionType.SET_BEACON_COUNT;\r\n  constructor(public payload: DefaultIdPayload<string>) {}\r\n}\r\n\r\nexport class SetBeaconAction implements Action {\r\n  readonly type = FactoriesActionType.SET_BEACON;\r\n  constructor(public payload: DefaultIdPayload) {}\r\n}\r\n\r\nexport class SetBeaconModuleAction implements Action {\r\n  readonly type = FactoriesActionType.SET_BEACON_MODULE;\r\n  constructor(public payload: DefaultIdPayload) {}\r\n}\r\n\r\nexport class SetOverclockAction implements Action {\r\n  readonly type = FactoriesActionType.SET_OVERCLOCK;\r\n  constructor(public payload: DefaultIdPayload<number>) {}\r\n}\r\n\r\nexport type FactoriesAction =\r\n  | AddAction\r\n  | RemoveAction\r\n  | RaiseAction\r\n  | LowerAction\r\n  | SetFactoryAction\r\n  | SetModuleRankAction\r\n  | SetBeaconCountAction\r\n  | SetBeaconAction\r\n  | SetBeaconModuleAction\r\n  | SetOverclockAction;\r\n","import { Injectable } from '@angular/core';\r\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\r\nimport { Action, Store } from '@ngrx/store';\r\nimport { combineLatest, first, switchMap } from 'rxjs';\r\n\r\nimport { RecipeUtility } from '~/utilities';\r\nimport { LabState } from '../';\r\nimport * as Recipes from '../recipes';\r\nimport * as Settings from '../settings';\r\nimport { FactoriesActionType } from './factories.actions';\r\n\r\n@Injectable()\r\nexport class FactoriesEffects {\r\n  /** Resets recipe settings that are invalidated by changes to factory settings */\r\n  resetRecipeSettings$ = createEffect(() =>\r\n    this.actions$.pipe(\r\n      ofType(\r\n        FactoriesActionType.ADD,\r\n        FactoriesActionType.REMOVE,\r\n        FactoriesActionType.RAISE,\r\n        FactoriesActionType.SET_FACTORY\r\n      ),\r\n      switchMap(() =>\r\n        combineLatest([\r\n          this.store.select(Recipes.recipesState),\r\n          this.store.select(Recipes.getRecipeSettings),\r\n          this.store.select(Settings.getDataset),\r\n        ]).pipe(first())\r\n      ),\r\n      switchMap(([rawSettings, recipeSettings, data]) => {\r\n        const effects: Action[] = [];\r\n        // Look for recipe settings with module effects specified\r\n        for (const i of Object.keys(rawSettings)) {\r\n          const r = rawSettings[i];\r\n          if (\r\n            r &&\r\n            (r.factoryModuleIds != null ||\r\n              r.beaconCount != null ||\r\n              r.beaconId != null ||\r\n              r.beaconModuleIds != null)\r\n          ) {\r\n            // Check that these recipe settings are still valid\r\n            const factoryId = recipeSettings[i].factoryId;\r\n            if (factoryId) {\r\n              const factory = data.factoryEntities[factoryId];\r\n              const recipe = data.recipeEntities[i];\r\n              if (\r\n                !RecipeUtility.allowsModules(recipe, factory) ||\r\n                (r.factoryModuleIds &&\r\n                  r.factoryModuleIds.length !== factory.modules)\r\n              ) {\r\n                // Factory does not support module effects, reset these settings\r\n                effects.push(new Recipes.ResetRecipeModulesAction(i));\r\n              }\r\n            }\r\n          }\r\n        }\r\n        return effects;\r\n      })\r\n    )\r\n  );\r\n\r\n  constructor(private actions$: Actions, private store: Store<LabState>) {}\r\n}\r\n","import { Entities, FactorySettings } from '~/models';\r\nimport { StoreUtility } from '~/utilities';\r\nimport * as App from '../app.actions';\r\nimport * as Settings from '../settings';\r\nimport { FactoriesAction, FactoriesActionType } from './factories.actions';\r\n\r\nexport type FactoriesState = {\r\n  ids?: string[];\r\n  entities: Entities<FactorySettings>;\r\n};\r\n\r\nexport const initialFactoriesState: FactoriesState = {\r\n  entities: {},\r\n};\r\n\r\nexport function factoriesReducer(\r\n  state: FactoriesState = initialFactoriesState,\r\n  action:\r\n    | FactoriesAction\r\n    | App.AppAction\r\n    | Settings.SetModAction\r\n    | Settings.SetPresetAction\r\n): FactoriesState {\r\n  switch (action.type) {\r\n    case App.AppActionType.LOAD:\r\n      return { ...initialFactoriesState, ...action.payload.factoriesState };\r\n    case App.AppActionType.RESET:\r\n    case Settings.SettingsActionType.SET_MOD:\r\n    case Settings.SettingsActionType.SET_PRESET:\r\n      return initialFactoriesState;\r\n    case FactoriesActionType.ADD: {\r\n      const value = [\r\n        ...(state.ids ?? action.payload.def ?? []),\r\n        action.payload.value,\r\n      ];\r\n      const ids = StoreUtility.compareRank(value, action.payload.def);\r\n      return { ...state, ...{ ids } };\r\n    }\r\n    case FactoriesActionType.REMOVE: {\r\n      const value = (state.ids ?? action.payload.def ?? []).filter(\r\n        (i) => i !== action.payload.value\r\n      );\r\n      const ids = StoreUtility.compareRank(value, action.payload.def);\r\n      const newState = {\r\n        ...state,\r\n        ...{ ids, entities: { ...state.entities } },\r\n      };\r\n      delete newState.entities[action.payload.value];\r\n      return newState;\r\n    }\r\n    case FactoriesActionType.RAISE: {\r\n      const value = [...(state.ids ?? action.payload.def ?? [])];\r\n      const i = value.indexOf(action.payload.value);\r\n      if (i !== -1 && i > 0) {\r\n        value.splice(i - 1, 0, value.splice(i, 1)[0]);\r\n        const ids = StoreUtility.compareRank(value, action.payload.def);\r\n        return { ...state, ...{ ids } };\r\n      }\r\n      return state;\r\n    }\r\n    case FactoriesActionType.LOWER: {\r\n      const value = [...(state.ids ?? action.payload.def ?? [])];\r\n      const i = value.indexOf(action.payload.value);\r\n      if (i !== -1 && i < value.length - 1) {\r\n        value.splice(i + 1, 0, value.splice(i, 1)[0]);\r\n        const ids = StoreUtility.compareRank(value, action.payload.def);\r\n        return { ...state, ...{ ids } };\r\n      }\r\n      return state;\r\n    }\r\n    case FactoriesActionType.SET_FACTORY: {\r\n      const value = [...(state.ids ?? action.payload.def ?? [])];\r\n      const i = value.indexOf(action.payload.id);\r\n      if (i !== -1) {\r\n        value[i] = action.payload.value;\r\n        const ids = StoreUtility.compareRank(value, action.payload.def);\r\n        const newState = {\r\n          ...state,\r\n          ...{ ids, entities: { ...state.entities } },\r\n        };\r\n        if (newState.entities[action.payload.id]) {\r\n          newState.entities[action.payload.value] =\r\n            newState.entities[action.payload.id];\r\n          delete newState.entities[action.payload.id];\r\n        }\r\n        return newState;\r\n      }\r\n      return state;\r\n    }\r\n    case FactoriesActionType.SET_MODULE_RANK: {\r\n      const entities = StoreUtility.compareReset(\r\n        state.entities,\r\n        'moduleRankIds',\r\n        action.payload,\r\n        true\r\n      );\r\n      return { ...state, ...{ entities } };\r\n    }\r\n    case FactoriesActionType.SET_BEACON_COUNT: {\r\n      const entities = StoreUtility.compareReset(\r\n        state.entities,\r\n        'beaconCount',\r\n        action.payload\r\n      );\r\n      return { ...state, ...{ entities } };\r\n    }\r\n    case FactoriesActionType.SET_BEACON: {\r\n      const entities = StoreUtility.compareReset(\r\n        state.entities,\r\n        'beaconId',\r\n        action.payload\r\n      );\r\n      return { ...state, ...{ entities } };\r\n    }\r\n    case FactoriesActionType.SET_BEACON_MODULE: {\r\n      const entities = StoreUtility.compareReset(\r\n        state.entities,\r\n        'beaconModuleId',\r\n        action.payload\r\n      );\r\n      return { ...state, ...{ entities } };\r\n    }\r\n    case FactoriesActionType.SET_OVERCLOCK: {\r\n      const entities = StoreUtility.compareReset(\r\n        state.entities,\r\n        'overclock',\r\n        action.payload\r\n      );\r\n      return { ...state, ...{ entities } };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { createSelector } from '@ngrx/store';\r\nimport { SelectItem } from 'primeng/api';\r\n\r\nimport { Entities, FactorySettings, Game } from '~/models';\r\nimport { LabState } from '../';\r\nimport * as Settings from '../settings';\r\nimport { FactoriesState } from './factories.reducer';\r\n\r\n/* Base selector functions */\r\nexport const factoriesState = (state: LabState): FactoriesState =>\r\n  state.factoriesState;\r\n\r\n/* Complex selectors */\r\nexport const getFactories = createSelector(\r\n  factoriesState,\r\n  Settings.getDefaults,\r\n  Settings.getDataset,\r\n  (state, defaults, data): FactoriesState => {\r\n    const ids = state.ids || defaults?.factoryRankIds || [];\r\n\r\n    const entities: Entities<FactorySettings> = {};\r\n    const def: FactorySettings = { ...state.entities[''] };\r\n    def.moduleRankIds = def.moduleRankIds || defaults?.moduleRankIds || [];\r\n    if (data.game === Game.Factorio) {\r\n      def.beaconCount = def.beaconCount || defaults?.beaconCount;\r\n    }\r\n    def.beaconId = def.beaconId || defaults?.beaconId;\r\n    def.beaconModuleId = def.beaconModuleId || defaults?.beaconModuleId;\r\n    if (data.game === Game.Satisfactory) {\r\n      // Default = 100%\r\n      def.overclock = def.overclock || 100;\r\n    }\r\n    entities[''] = def;\r\n\r\n    for (const id of data.factoryIds.filter((i) => data.itemEntities[i])) {\r\n      const s: FactorySettings = { ...state.entities[id] };\r\n      const factory = data.factoryEntities[id];\r\n\r\n      if (factory.modules) {\r\n        s.moduleRankIds = s.moduleRankIds || def.moduleRankIds;\r\n        s.beaconCount = s.beaconCount != null ? s.beaconCount : def.beaconCount;\r\n        s.beaconId = s.beaconId || def.beaconId;\r\n        s.beaconModuleId = s.beaconModuleId || def.beaconModuleId;\r\n      }\r\n\r\n      s.overclock = s.overclock || def.overclock;\r\n\r\n      entities[id] = s;\r\n    }\r\n\r\n    return { ids, entities };\r\n  }\r\n);\r\n\r\nexport const getFactoryOptions = createSelector(\r\n  getFactories,\r\n  Settings.getDataset,\r\n  (factories, data) =>\r\n    data.factoryIds.map(\r\n      (f): SelectItem => ({\r\n        label: data.itemEntities[f].name,\r\n        value: f,\r\n        disabled: (factories.ids ?? []).indexOf(f) !== -1,\r\n      })\r\n    )\r\n);\r\n\r\nexport const getFactoryRows = createSelector(getFactories, (factories) => [\r\n  '',\r\n  ...(factories.ids ?? []),\r\n]);\r\n","export * from './factories.actions';\r\nexport * from './factories.reducer';\r\nexport * from './factories.selectors';\r\n","import { ActionReducerMap, MetaReducer } from '@ngrx/store';\r\nimport { storeFreeze } from 'ngrx-store-freeze';\r\n\r\nimport { environment } from 'src/environments/environment';\r\nimport * as App from './app.actions';\r\nimport * as Datasets from './datasets';\r\nimport * as Factories from './factories';\r\nimport * as Items from './items';\r\nimport * as Preferences from './preferences';\r\nimport * as Products from './products';\r\nimport * as Recipes from './recipes';\r\nimport * as Settings from './settings';\r\nimport { storageMetaReducer } from './storage.reducer';\r\n\r\nexport interface LabState {\r\n  datasetsState: Datasets.DatasetsState;\r\n  productsState: Products.ProductsState;\r\n  itemsState: Items.ItemsState;\r\n  recipesState: Recipes.RecipesState;\r\n  factoriesState: Factories.FactoriesState;\r\n  settingsState: Settings.SettingsState;\r\n  preferencesState: Preferences.PreferencesState;\r\n}\r\n\r\nexport const reducers: ActionReducerMap<LabState, any> = {\r\n  datasetsState: Datasets.datasetsReducer,\r\n  productsState: Products.productsReducer,\r\n  itemsState: Items.itemsReducer,\r\n  recipesState: Recipes.recipesReducer,\r\n  factoriesState: Factories.factoriesReducer,\r\n  settingsState: Settings.settingsReducer,\r\n  preferencesState: Preferences.preferencesReducer,\r\n};\r\n\r\n/* No need to test without storeFreeze, ignore that branch here. */\r\nexport const metaReducers: MetaReducer<LabState>[] = environment.testing\r\n  ? [storeFreeze]\r\n  : /* istanbul ignore next */\r\n  environment.production\r\n  ? [storageMetaReducer]\r\n  : [storeFreeze, storageMetaReducer];\r\n\r\nexport {\r\n  App,\r\n  Datasets,\r\n  Factories,\r\n  Items,\r\n  Preferences,\r\n  Products,\r\n  Recipes,\r\n  Settings,\r\n};\r\n","export * from './items.actions';\r\nexport * from './items.reducer';\r\nexport * from './items.selectors';\r\n","import { Action } from '@ngrx/store';\r\n\r\nimport { DefaultIdPayload } from '~/models';\r\n\r\nexport const enum ItemsActionType {\r\n  IGNORE_ITEM = '[Items] Ignore Item',\r\n  SET_BELT = '[Items] Set Belt',\r\n  SET_WAGON = '[Items] Set Wagon',\r\n  SET_RECIPE = '[Items] Set Recipe',\r\n  RESET_ITEM = '[Items] Reset Item',\r\n  RESET_IGNORES = '[Items] Reset Ignores',\r\n  RESET_BELTS = '[Items] Reset Belts',\r\n  RESET_WAGONS = '[Items] Reset Wagon',\r\n}\r\n\r\nexport class IgnoreItemAction implements Action {\r\n  readonly type = ItemsActionType.IGNORE_ITEM;\r\n  constructor(public payload: string) {}\r\n}\r\n\r\nexport class SetBeltAction implements Action {\r\n  readonly type = ItemsActionType.SET_BELT;\r\n  constructor(public payload: DefaultIdPayload) {}\r\n}\r\n\r\nexport class SetWagonAction implements Action {\r\n  readonly type = ItemsActionType.SET_WAGON;\r\n  constructor(public payload: DefaultIdPayload) {}\r\n}\r\n\r\nexport class SetRecipeAction implements Action {\r\n  readonly type = ItemsActionType.SET_RECIPE;\r\n  constructor(public payload: DefaultIdPayload<string | undefined>) {}\r\n}\r\n\r\nexport class ResetItemAction implements Action {\r\n  readonly type = ItemsActionType.RESET_ITEM;\r\n  constructor(public payload: string) {}\r\n}\r\n\r\nexport class ResetIgnoresAction implements Action {\r\n  readonly type = ItemsActionType.RESET_IGNORES;\r\n}\r\n\r\nexport class ResetBeltsAction implements Action {\r\n  readonly type = ItemsActionType.RESET_BELTS;\r\n}\r\n\r\nexport class ResetWagonsAction implements Action {\r\n  readonly type = ItemsActionType.RESET_WAGONS;\r\n}\r\n\r\nexport type ItemsAction =\r\n  | IgnoreItemAction\r\n  | SetBeltAction\r\n  | SetWagonAction\r\n  | SetRecipeAction\r\n  | ResetItemAction\r\n  | ResetIgnoresAction\r\n  | ResetBeltsAction\r\n  | ResetWagonsAction;\r\n","import { Entities, ItemSettings } from '~/models';\r\nimport { StoreUtility } from '~/utilities';\r\nimport * as App from '../app.actions';\r\nimport * as Settings from '../settings';\r\nimport { ItemsAction, ItemsActionType } from './items.actions';\r\n\r\nexport type ItemsState = Entities<ItemSettings>;\r\n\r\nexport const initialItemsState: ItemsState = {};\r\n\r\nexport function itemsReducer(\r\n  state: ItemsState = initialItemsState,\r\n  action: ItemsAction | App.AppAction | Settings.SetModAction\r\n): ItemsState {\r\n  switch (action.type) {\r\n    case App.AppActionType.LOAD:\r\n      return { ...initialItemsState, ...action.payload.itemsState };\r\n    case App.AppActionType.RESET:\r\n    case Settings.SettingsActionType.SET_MOD:\r\n      return initialItemsState;\r\n    case ItemsActionType.IGNORE_ITEM:\r\n      return StoreUtility.compareReset(state, 'ignore', {\r\n        id: action.payload,\r\n        value: !state[action.payload]?.ignore,\r\n        def: false,\r\n      });\r\n    case ItemsActionType.SET_BELT:\r\n      return StoreUtility.compareReset(state, 'beltId', action.payload);\r\n    case ItemsActionType.SET_WAGON:\r\n      return StoreUtility.compareReset(state, 'wagonId', action.payload);\r\n    case ItemsActionType.SET_RECIPE:\r\n      return StoreUtility.compareReset(state, 'recipeId', action.payload);\r\n    case ItemsActionType.RESET_ITEM: {\r\n      const newState = { ...state };\r\n      delete newState[action.payload];\r\n      return newState;\r\n    }\r\n    case ItemsActionType.RESET_IGNORES:\r\n      return StoreUtility.resetField(state, 'ignore');\r\n    case ItemsActionType.RESET_BELTS:\r\n      return StoreUtility.resetField(state, 'beltId');\r\n    case ItemsActionType.RESET_WAGONS:\r\n      return StoreUtility.resetField(state, 'wagonId');\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { createSelector } from '@ngrx/store';\r\n\r\nimport { Entities, ItemId, ItemSettings } from '~/models';\r\nimport { LabState } from '../';\r\nimport * as Settings from '../settings';\r\nimport { ItemsState } from './items.reducer';\r\n\r\n/* Base selector functions */\r\nexport const itemsState = (state: LabState): ItemsState => state.itemsState;\r\n\r\n/* Complex selectors */\r\nexport const getItemSettings = createSelector(\r\n  itemsState,\r\n  Settings.getDataset,\r\n  Settings.getSettings,\r\n  (state, data, settings) => {\r\n    const value: Entities<ItemSettings> = {};\r\n    if (data?.itemIds?.length) {\r\n      for (const item of data.itemIds.map((i) => data.itemEntities[i])) {\r\n        const itemSettings: ItemSettings = state[item.id]\r\n          ? { ...state[item.id] }\r\n          : { ignore: false };\r\n\r\n        // Belt (or Pipe)\r\n        if (!itemSettings.beltId) {\r\n          if (item.stack) {\r\n            itemSettings.beltId = settings.beltId;\r\n          } else if (settings.pipeId) {\r\n            itemSettings.beltId = settings.pipeId;\r\n          } else {\r\n            itemSettings.beltId = ItemId.Pipe;\r\n          }\r\n        }\r\n\r\n        if (!itemSettings.wagonId) {\r\n          itemSettings.wagonId = item.stack\r\n            ? settings.cargoWagonId\r\n            : settings.fluidWagonId;\r\n        }\r\n\r\n        value[item.id] = itemSettings;\r\n      }\r\n    }\r\n    return value;\r\n  }\r\n);\r\n\r\nexport const getItemsModified = createSelector(itemsState, (state) => ({\r\n  ignore: Object.keys(state).some((id) => state[id].ignore != null),\r\n  belts: Object.keys(state).some((id) => state[id].beltId != null),\r\n  wagons: Object.keys(state).some((id) => state[id].wagonId != null),\r\n}));\r\n","export * from './preferences.actions';\r\nexport * from './preferences.reducer';\r\nexport * from './preferences.selectors';\r\n","import { Action } from '@ngrx/store';\r\n\r\nimport {\r\n  ColumnSettings,\r\n  Entities,\r\n  IdPayload,\r\n  Language,\r\n  PowerUnit,\r\n  SimplexType,\r\n  Theme,\r\n} from '~/models';\r\n\r\nexport const enum PreferencesActionType {\r\n  SAVE_STATE = '[Preferences] Save State',\r\n  REMOVE_STATE = '[Preferences] Remove State',\r\n  SET_COLUMNS = '[Preferences] Set Columns',\r\n  SET_SIMPLEX_TYPE = '[Preferences] Set Simplex Type',\r\n  SET_LANGUAGE = '[Preferences] Set Display Language',\r\n  SET_POWER_UNIT = '[Preferences] Set Power Unit',\r\n  SET_THEME = '[Preferences] Set Theme',\r\n}\r\n\r\nexport class SaveStateAction implements Action {\r\n  readonly type = PreferencesActionType.SAVE_STATE;\r\n  constructor(public payload: IdPayload) {}\r\n}\r\n\r\nexport class RemoveStateAction implements Action {\r\n  readonly type = PreferencesActionType.REMOVE_STATE;\r\n  constructor(public payload: string) {}\r\n}\r\n\r\nexport class SetColumnsAction implements Action {\r\n  readonly type = PreferencesActionType.SET_COLUMNS;\r\n  constructor(public payload: Entities<ColumnSettings>) {}\r\n}\r\n\r\nexport class SetSimplexTypeAction implements Action {\r\n  readonly type = PreferencesActionType.SET_SIMPLEX_TYPE;\r\n  constructor(public payload: SimplexType) {}\r\n}\r\n\r\nexport class SetLanguageAction implements Action {\r\n  readonly type = PreferencesActionType.SET_LANGUAGE;\r\n  constructor(public payload: Language) {}\r\n}\r\n\r\nexport class SetPowerUnitAction implements Action {\r\n  readonly type = PreferencesActionType.SET_POWER_UNIT;\r\n  constructor(public payload: PowerUnit) {}\r\n}\r\n\r\nexport class SetThemeAction implements Action {\r\n  readonly type = PreferencesActionType.SET_THEME;\r\n  constructor(public payload: Theme) {}\r\n}\r\n\r\nexport type PreferencesAction =\r\n  | SaveStateAction\r\n  | RemoveStateAction\r\n  | SetColumnsAction\r\n  | SetSimplexTypeAction\r\n  | SetLanguageAction\r\n  | SetPowerUnitAction\r\n  | SetThemeAction;\r\n","import {\r\n  allColumns,\r\n  Column,\r\n  ColumnSettings,\r\n  Entities,\r\n  Language,\r\n  PowerUnit,\r\n  SimplexType,\r\n  Theme,\r\n} from '~/models';\r\nimport * as App from '../app.actions';\r\nimport {\r\n  PreferencesAction,\r\n  PreferencesActionType,\r\n} from './preferences.actions';\r\n\r\nexport type ColumnsState = Entities<ColumnSettings>;\r\n\r\nexport interface PreferencesState {\r\n  states: Entities<string>;\r\n  columns: ColumnsState;\r\n  simplexType: SimplexType;\r\n  language: Language;\r\n  powerUnit: PowerUnit;\r\n  theme: Theme;\r\n}\r\n\r\nexport const initialColumnsState: ColumnsState = allColumns.reduce(\r\n  (e: ColumnsState, c) => {\r\n    e[c] = { show: true, precision: 1 };\r\n    return e;\r\n  },\r\n  {}\r\n);\r\n\r\nexport const initialPreferencesState: PreferencesState = {\r\n  states: {},\r\n  columns: initialColumnsState,\r\n  simplexType: SimplexType.JsBigIntRational,\r\n  language: Language.English,\r\n  powerUnit: PowerUnit.Auto,\r\n  theme: Theme.System,\r\n};\r\n\r\nexport function preferencesReducer(\r\n  state: PreferencesState = initialPreferencesState,\r\n  action: PreferencesAction | App.AppAction\r\n): PreferencesState {\r\n  switch (action.type) {\r\n    case App.AppActionType.RESET:\r\n      return initialPreferencesState;\r\n    case PreferencesActionType.SAVE_STATE: {\r\n      const states = {\r\n        ...state.states,\r\n        ...{ [action.payload.id]: action.payload.value },\r\n      };\r\n      return { ...state, ...{ states } };\r\n    }\r\n    case PreferencesActionType.REMOVE_STATE: {\r\n      const states = { ...state.states };\r\n      delete states[action.payload];\r\n      return { ...state, ...{ states } };\r\n    }\r\n    case PreferencesActionType.SET_COLUMNS:\r\n      return {\r\n        ...state,\r\n        ...{\r\n          columns: action.payload,\r\n          powerUnit: action.payload[Column.Power].show\r\n            ? state.powerUnit\r\n            : PowerUnit.Auto,\r\n        },\r\n      };\r\n    case PreferencesActionType.SET_SIMPLEX_TYPE:\r\n      return { ...state, ...{ simplexType: action.payload } };\r\n    case PreferencesActionType.SET_LANGUAGE:\r\n      return { ...state, ...{ language: action.payload } };\r\n    case PreferencesActionType.SET_POWER_UNIT:\r\n      return { ...state, ...{ powerUnit: action.payload } };\r\n    case PreferencesActionType.SET_THEME:\r\n      return { ...state, ...{ theme: action.payload } };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { createSelector } from '@ngrx/store';\r\nimport { SelectItem } from 'primeng/api';\r\n\r\nimport { LabState } from '../';\r\nimport { PreferencesState } from './preferences.reducer';\r\n\r\n/* Base selector functions */\r\nexport const preferencesState = (state: LabState): PreferencesState =>\r\n  state.preferencesState;\r\n\r\nexport const getStates = createSelector(\r\n  preferencesState,\r\n  (state) => state.states\r\n);\r\nexport const getColumns = createSelector(\r\n  preferencesState,\r\n  (state) => state.columns\r\n);\r\nexport const getSimplexType = createSelector(\r\n  preferencesState,\r\n  (state) => state.simplexType\r\n);\r\nexport const getPowerUnit = createSelector(\r\n  preferencesState,\r\n  (state) => state.powerUnit\r\n);\r\nexport const getLanguage = createSelector(\r\n  preferencesState,\r\n  (state) => state.language\r\n);\r\nexport const getTheme = createSelector(\r\n  preferencesState,\r\n  (state) => state.theme\r\n);\r\n\r\n/** Complex selectors */\r\nexport const getSavedStates = createSelector(getStates, (states) =>\r\n  Object.keys(states).map(\r\n    (i): SelectItem => ({\r\n      label: i,\r\n      value: i,\r\n    })\r\n  )\r\n);\r\n","export * from './products.actions';\r\nexport * from './products.reducer';\r\nexport * from './products.selectors';\r\n","import { Action } from '@ngrx/store';\r\n\r\nimport { IdPayload, RateType } from '~/models';\r\n\r\nexport const enum ProductsActionType {\r\n  RESET = '[Products] Reset',\r\n  ADD = '[Products] Add',\r\n  REMOVE = '[Products] Remove',\r\n  SET_ITEM = '[Products] Set Item',\r\n  SET_RATE = '[Products] Set Rate',\r\n  SET_RATE_TYPE = '[Products] Set Rate Type',\r\n  SET_VIA = '[Products] Set Via',\r\n  RESET_VIA = '[Products] Reset Via',\r\n  ADJUST_DISPLAY_RATE = '[Products] Adjust Display Rate',\r\n}\r\n\r\nexport class ResetAction implements Action {\r\n  readonly type = ProductsActionType.RESET;\r\n  constructor(public payload: string) {}\r\n}\r\n\r\nexport class AddAction implements Action {\r\n  readonly type = ProductsActionType.ADD;\r\n  constructor(public payload: string) {}\r\n}\r\n\r\nexport class RemoveAction implements Action {\r\n  readonly type = ProductsActionType.REMOVE;\r\n  constructor(public payload: string) {}\r\n}\r\n\r\nexport class SetItemAction implements Action {\r\n  readonly type = ProductsActionType.SET_ITEM;\r\n  constructor(public payload: IdPayload) {}\r\n}\r\n\r\nexport class SetRateAction implements Action {\r\n  readonly type = ProductsActionType.SET_RATE;\r\n  constructor(public payload: IdPayload<string>) {}\r\n}\r\n\r\nexport class SetRateTypeAction implements Action {\r\n  readonly type = ProductsActionType.SET_RATE_TYPE;\r\n  constructor(public payload: IdPayload<RateType>) {}\r\n}\r\n\r\nexport class SetViaAction implements Action {\r\n  readonly type = ProductsActionType.SET_VIA;\r\n  constructor(public payload: IdPayload) {}\r\n}\r\n\r\nexport class ResetViaAction implements Action {\r\n  readonly type = ProductsActionType.RESET_VIA;\r\n  constructor(public payload: string) {}\r\n}\r\n\r\nexport class AdjustDisplayRateAction implements Action {\r\n  readonly type = ProductsActionType.ADJUST_DISPLAY_RATE;\r\n  constructor(public payload: string) {}\r\n}\r\n\r\nexport type ProductsAction =\r\n  | ResetAction\r\n  | AddAction\r\n  | RemoveAction\r\n  | SetItemAction\r\n  | SetRateAction\r\n  | SetRateTypeAction\r\n  | SetViaAction\r\n  | ResetViaAction\r\n  | AdjustDisplayRateAction;\r\n","import { Injectable } from '@angular/core';\r\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\r\nimport { map } from 'rxjs/operators';\r\n\r\nimport { displayRateInfo } from '~/models';\r\nimport * as Settings from '../settings';\r\nimport { AdjustDisplayRateAction } from './products.actions';\r\n\r\n@Injectable()\r\nexport class ProductsEffects {\r\n  adjustDisplayRate$ = createEffect(() =>\r\n    this.actions$.pipe(\r\n      ofType(Settings.SettingsActionType.SET_DISPLAY_RATE),\r\n      map((a: Settings.SetDisplayRateAction) => {\r\n        const factor = displayRateInfo[a.payload.value].value.div(\r\n          displayRateInfo[a.payload.prev].value\r\n        );\r\n        return new AdjustDisplayRateAction(factor.toString());\r\n      })\r\n    )\r\n  );\r\n\r\n  constructor(private actions$: Actions) {}\r\n}\r\n","import { Entities, Product, RateType, Rational } from '~/models';\r\nimport { StoreUtility } from '~/utilities';\r\nimport * as App from '../app.actions';\r\nimport * as Settings from '../settings';\r\nimport { ProductsAction, ProductsActionType } from './products.actions';\r\n\r\nexport interface ProductsState {\r\n  ids: string[];\r\n  entities: Entities<Product>;\r\n  index: number;\r\n}\r\n\r\nexport const initialProductsState: ProductsState = {\r\n  ids: [],\r\n  entities: {},\r\n  index: 0,\r\n};\r\n\r\nexport function productsReducer(\r\n  state: ProductsState = initialProductsState,\r\n  action: ProductsAction | App.AppAction | Settings.SetModAction\r\n): ProductsState {\r\n  switch (action.type) {\r\n    case App.AppActionType.LOAD:\r\n      return action.payload.productsState\r\n        ? action.payload.productsState\r\n        : initialProductsState;\r\n    case App.AppActionType.RESET:\r\n    case Settings.SettingsActionType.SET_MOD:\r\n      return initialProductsState;\r\n    case ProductsActionType.RESET: {\r\n      const id = '0';\r\n      return {\r\n        ids: [id],\r\n        entities: {\r\n          [id]: {\r\n            id,\r\n            itemId: action.payload,\r\n            rate: '60',\r\n            rateType: RateType.Items,\r\n          },\r\n        },\r\n        index: 1,\r\n      };\r\n    }\r\n    case ProductsActionType.ADD: {\r\n      let rate = '60';\r\n      let rateType = RateType.Items;\r\n      if (state.ids.length > 0) {\r\n        // Use rate and rate type from last product in list\r\n        const id = state.ids[state.ids.length - 1];\r\n        rate = state.entities[id].rate;\r\n        rateType = state.entities[id].rateType;\r\n      }\r\n      return {\r\n        ...state,\r\n        ...{\r\n          ids: [...state.ids, state.index.toString()],\r\n          entities: {\r\n            ...state.entities,\r\n            ...{\r\n              [state.index]: {\r\n                id: state.index.toString(),\r\n                itemId: action.payload,\r\n                rate,\r\n                rateType,\r\n              },\r\n            },\r\n          },\r\n          index: state.index + 1,\r\n        },\r\n      };\r\n    }\r\n    case ProductsActionType.REMOVE: {\r\n      const newEntities = { ...state.entities };\r\n      delete newEntities[action.payload];\r\n      return {\r\n        ...state,\r\n        ...{\r\n          ids: state.ids.filter((i) => i !== action.payload),\r\n          entities: newEntities,\r\n        },\r\n      };\r\n    }\r\n    case ProductsActionType.SET_ITEM: {\r\n      const entities = StoreUtility.assignValue(\r\n        state.entities,\r\n        'itemId',\r\n        action.payload\r\n      );\r\n      if (entities[action.payload.id].rateType === RateType.Factories) {\r\n        entities[action.payload.id].rateType = RateType.Items;\r\n      }\r\n      return {\r\n        ...state,\r\n        ...{\r\n          entities: StoreUtility.resetFields(\r\n            entities,\r\n            ['viaId'],\r\n            action.payload.id\r\n          ),\r\n        },\r\n      };\r\n    }\r\n    case ProductsActionType.SET_RATE:\r\n      return {\r\n        ...state,\r\n        ...{\r\n          entities: StoreUtility.assignValue(\r\n            state.entities,\r\n            'rate',\r\n            action.payload\r\n          ),\r\n        },\r\n      };\r\n    case ProductsActionType.SET_RATE_TYPE:\r\n      return {\r\n        ...state,\r\n        ...{\r\n          entities: StoreUtility.resetFields(\r\n            StoreUtility.assignValue(\r\n              state.entities,\r\n              'rateType',\r\n              action.payload\r\n            ),\r\n            ['viaId'],\r\n            action.payload.id\r\n          ),\r\n        },\r\n      };\r\n    case ProductsActionType.SET_VIA:\r\n      return {\r\n        ...state,\r\n        ...{\r\n          entities: StoreUtility.assignValue(\r\n            state.entities,\r\n            'viaId',\r\n            action.payload\r\n          ),\r\n        },\r\n      };\r\n    case ProductsActionType.RESET_VIA:\r\n      return {\r\n        ...state,\r\n        ...{\r\n          entities: StoreUtility.resetFields(\r\n            state.entities,\r\n            ['viaId'],\r\n            action.payload\r\n          ),\r\n        },\r\n      };\r\n    case ProductsActionType.ADJUST_DISPLAY_RATE: {\r\n      const factor = Rational.fromString(action.payload);\r\n      const newEntities = { ...state.entities };\r\n      for (const id of state.ids.filter(\r\n        (i) =>\r\n          state.entities[i].rateType === RateType.Items ||\r\n          state.entities[i].rateType === RateType.Wagons\r\n      )) {\r\n        const rate = Rational.fromString(state.entities[id].rate)\r\n          .mul(factor)\r\n          .toString();\r\n        newEntities[id] = { ...state.entities[id], ...{ rate } };\r\n      }\r\n      return {\r\n        ...state,\r\n        ...{ entities: newEntities },\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { createSelector } from '@ngrx/store';\r\nimport { SelectItem } from 'primeng/api';\r\n\r\nimport {\r\n  Column,\r\n  Entities,\r\n  Game,\r\n  ItemId,\r\n  PowerUnit,\r\n  precisionColumns,\r\n  RateType,\r\n  Rational,\r\n  RationalProduct,\r\n  Step,\r\n  StepDetail,\r\n  StepDetailTab,\r\n} from '~/models';\r\nimport { RateUtility, RecipeUtility, SimplexUtility } from '~/utilities';\r\nimport { LabState } from '../';\r\nimport * as Factories from '../factories';\r\nimport * as Items from '../items';\r\nimport * as Preferences from '../preferences';\r\nimport * as Recipes from '../recipes';\r\nimport * as Settings from '../settings';\r\nimport { ProductsState } from './products.reducer';\r\n\r\n/* Base selector functions */\r\nexport const productsState = (state: LabState): ProductsState =>\r\n  state.productsState;\r\n\r\nexport const getIds = createSelector(productsState, (state) => state.ids);\r\nexport const getEntities = createSelector(\r\n  productsState,\r\n  (state) => state.entities\r\n);\r\n\r\n/* Complex selectors */\r\nexport const getBaseProducts = createSelector(\r\n  getIds,\r\n  getEntities,\r\n  Settings.getDataset,\r\n  (ids, entities, data) =>\r\n    ids.map((i) => entities[i]).filter((p) => data.itemEntities[p.itemId])\r\n);\r\n\r\nexport const getProductSteps = createSelector(\r\n  getBaseProducts,\r\n  Items.getItemSettings,\r\n  Settings.getDisabledRecipeIds,\r\n  Settings.getSimplexModifiers,\r\n  Recipes.getAdjustedDataset,\r\n  (products, itemSettings, disabledRecipeIds, adj, data) =>\r\n    products?.reduce((e: Entities<[string, Rational][]>, p) => {\r\n      e[p.id] = SimplexUtility.getSteps(\r\n        p.itemId,\r\n        itemSettings,\r\n        disabledRecipeIds,\r\n        adj.costInput,\r\n        adj.costIgnored,\r\n        adj.simplexType,\r\n        data,\r\n        p.rateType === RateType.Factories\r\n      );\r\n      return e;\r\n    }, {})\r\n);\r\n\r\nexport const getProducts = createSelector(\r\n  getBaseProducts,\r\n  getProductSteps,\r\n  Settings.getDataset,\r\n  (products, productSteps, data) =>\r\n    products?.map((p) => RecipeUtility.adjustProduct(p, productSteps, data))\r\n);\r\n\r\nexport const getViaOptions = createSelector(\r\n  getProducts,\r\n  getProductSteps,\r\n  Settings.getDataset,\r\n  (products, productSteps, data) =>\r\n    products.reduce((e: Entities<SelectItem[]>, p) => {\r\n      if (productSteps[p.id]) {\r\n        e[p.id] = productSteps[p.id]\r\n          .map((r) => r[0])\r\n          .map(\r\n            (r): SelectItem => ({\r\n              label:\r\n                p.rateType === RateType.Factories\r\n                  ? data.recipeEntities[r].name\r\n                  : data.itemEntities[r].name,\r\n              value: r,\r\n            })\r\n          );\r\n      }\r\n      return e;\r\n    }, {})\r\n);\r\n\r\nexport const getRationalProducts = createSelector(getProducts, (products) =>\r\n  products.map((p) => new RationalProduct(p))\r\n);\r\n\r\nexport const getProductsBy = createSelector(getRationalProducts, (products) =>\r\n  products.reduce((e: Entities<RationalProduct[]>, p) => {\r\n    if (!e[p.rateType]) {\r\n      e[p.rateType] = [];\r\n    }\r\n    e[p.rateType] = [...e[p.rateType], p];\r\n    return e;\r\n  }, {})\r\n);\r\n\r\nexport const getProductsByItems = createSelector(\r\n  getProductsBy,\r\n  (products) => products[RateType.Items]\r\n);\r\n\r\nexport const getProductsByBelts = createSelector(\r\n  getProductsBy,\r\n  (products) => products[RateType.Belts]\r\n);\r\n\r\nexport const getProductsByWagons = createSelector(\r\n  getProductsBy,\r\n  (products) => products[RateType.Wagons]\r\n);\r\n\r\nexport const getProductsByFactories = createSelector(\r\n  getProductsBy,\r\n  (products) => products[RateType.Factories]\r\n);\r\n\r\nexport const getNormalizedRatesByItems = createSelector(\r\n  getProductsByItems,\r\n  getProductSteps,\r\n  Settings.getDisplayRateInfo,\r\n  (products, productSteps, dispRateInfo) =>\r\n    products?.reduce((e: Entities<Rational>, p) => {\r\n      const rate = p.rate.div(dispRateInfo.value);\r\n      if (p.viaId === p.itemId) {\r\n        e[p.id] = rate;\r\n      } else {\r\n        const via = RecipeUtility.getProductStepData(productSteps, p);\r\n        if (via) {\r\n          e[p.id] = rate.div(via[1]);\r\n        } else {\r\n          e[p.id] = Rational.zero;\r\n        }\r\n      }\r\n      return e;\r\n    }, {})\r\n);\r\n\r\nexport const getNormalizedRatesByBelts = createSelector(\r\n  getProductsByBelts,\r\n  getProductSteps,\r\n  Items.getItemSettings,\r\n  Settings.getBeltSpeed,\r\n  (products, productSteps, itemSettings, beltSpeed) =>\r\n    products?.reduce((e: Entities<Rational>, p) => {\r\n      if (p.viaId === p.itemId) {\r\n        const id = itemSettings[p.itemId].beltId;\r\n        if (id) {\r\n          e[p.id] = p.rate.mul(beltSpeed[id]);\r\n        }\r\n      } else {\r\n        const via = RecipeUtility.getProductStepData(productSteps, p);\r\n        if (via) {\r\n          const id = itemSettings[via[0]].beltId;\r\n          if (id) {\r\n            e[p.id] = p.rate.mul(beltSpeed[id]).div(via[1]);\r\n          }\r\n        } else {\r\n          e[p.id] = Rational.zero;\r\n        }\r\n      }\r\n      return e;\r\n    }, {})\r\n);\r\n\r\nexport const getNormalizedRatesByWagons = createSelector(\r\n  getProductsByWagons,\r\n  getProductSteps,\r\n  Items.getItemSettings,\r\n  Settings.getDisplayRateInfo,\r\n  Settings.getDataset,\r\n  (products, productSteps, itemSettings, dispRateInfo, data) =>\r\n    products?.reduce((e: Entities<Rational>, p) => {\r\n      if (p.viaId === p.itemId) {\r\n        e[p.id] = p.rate.div(dispRateInfo.value);\r\n        const wagonId = itemSettings[p.itemId].wagonId;\r\n        if (wagonId) {\r\n          const item = data.itemEntities[p.itemId];\r\n          const wagon = data.itemEntities[wagonId];\r\n          if (item.stack && wagon.cargoWagon) {\r\n            e[p.id] = e[p.id].mul(item.stack.mul(wagon.cargoWagon.size));\r\n          } else if (wagon.fluidWagon) {\r\n            e[p.id] = e[p.id].mul(wagon.fluidWagon.capacity);\r\n          }\r\n        }\r\n      } else {\r\n        const via = RecipeUtility.getProductStepData(productSteps, p);\r\n        if (via) {\r\n          e[p.id] = p.rate.div(dispRateInfo.value);\r\n          const wagonId = itemSettings[via[0]].wagonId;\r\n          if (wagonId) {\r\n            const item = data.itemEntities[via[0]];\r\n            const wagon = data.itemEntities[wagonId];\r\n            if (item.stack && wagon.cargoWagon) {\r\n              e[p.id] = e[p.id].mul(item.stack.mul(wagon.cargoWagon.size));\r\n            } else if (wagon.fluidWagon) {\r\n              e[p.id] = e[p.id].mul(wagon.fluidWagon.capacity);\r\n            }\r\n          }\r\n          e[p.id] = e[p.id].div(via[1]);\r\n        } else {\r\n          e[p.id] = Rational.zero;\r\n        }\r\n      }\r\n      return e;\r\n    }, {})\r\n);\r\n\r\nexport const getNormalizedRatesByFactories = createSelector(\r\n  getProductsByFactories,\r\n  getProductSteps,\r\n  Recipes.getRationalRecipeSettings,\r\n  Items.getItemSettings,\r\n  Settings.getAdjustmentData,\r\n  Recipes.getAdjustedDataset,\r\n  (products, productSteps, recipeSettings, itemSettings, adj, data) =>\r\n    products?.reduce((e: Entities<Rational>, p) => {\r\n      let recipeId = data.itemRecipeId[p.itemId];\r\n      if (recipeId && p.viaId === recipeId) {\r\n        const recipe = data.recipeR[recipeId];\r\n        e[p.id] = p.rate.div(recipe.time);\r\n        if (recipe.out) {\r\n          e[p.id] = e[p.id].mul(recipe.out[p.itemId]);\r\n        }\r\n        if (recipe.adjustProd && recipe.productivity) {\r\n          e[p.id] = e[p.id].div(recipe.productivity);\r\n        }\r\n      } else {\r\n        const via = RecipeUtility.getProductStepData(productSteps, p);\r\n        if (via) {\r\n          recipeId = via[0];\r\n          e[p.id] = p.rate.div(via[1]);\r\n        } else {\r\n          e[p.id] = Rational.zero;\r\n        }\r\n      }\r\n\r\n      return e;\r\n    }, {})\r\n);\r\n\r\nexport const getNormalizedRates = createSelector(\r\n  getNormalizedRatesByItems,\r\n  getNormalizedRatesByBelts,\r\n  getNormalizedRatesByWagons,\r\n  getNormalizedRatesByFactories,\r\n  (byItems, byBelts, byWagons, byFactories) => ({\r\n    ...byItems,\r\n    ...byBelts,\r\n    ...byWagons,\r\n    ...byFactories,\r\n  })\r\n);\r\n\r\nexport const getNormalizedSteps = createSelector(\r\n  getProducts,\r\n  getNormalizedRates,\r\n  Items.getItemSettings,\r\n  Recipes.getAdjustedDataset,\r\n  (products, rates, itemSettings, data) => {\r\n    const steps: Step[] = [];\r\n    for (const product of products) {\r\n      RateUtility.addStepsFor(\r\n        product.itemId,\r\n        rates[product.id],\r\n        steps,\r\n        itemSettings,\r\n        data\r\n      );\r\n    }\r\n    return steps;\r\n  }\r\n);\r\n\r\nexport const getMatrixResult = createSelector(\r\n  getNormalizedSteps,\r\n  Items.getItemSettings,\r\n  Settings.getDisabledRecipeIds,\r\n  Settings.getSimplexModifiers,\r\n  Recipes.getAdjustedDataset,\r\n  (steps, itemSettings, disabledRecipeIds, adj, data) =>\r\n    SimplexUtility.solve(\r\n      RateUtility.copy(steps),\r\n      itemSettings,\r\n      disabledRecipeIds,\r\n      adj.costInput,\r\n      adj.costIgnored,\r\n      adj.simplexType,\r\n      data\r\n    )\r\n);\r\n\r\nexport const getNormalizedStepsWithBelts = createSelector(\r\n  getMatrixResult,\r\n  Items.getItemSettings,\r\n  Recipes.getRecipeSettings,\r\n  Settings.getBeltSpeed,\r\n  Recipes.getAdjustedDataset,\r\n  (result, itemSettings, recipeSettings, beltSpeed, data) =>\r\n    RateUtility.calculateBelts(\r\n      RateUtility.copy(result.steps),\r\n      itemSettings,\r\n      recipeSettings,\r\n      beltSpeed,\r\n      data\r\n    )\r\n);\r\n\r\nexport const getNormalizedStepsWithOutputs = createSelector(\r\n  getNormalizedStepsWithBelts,\r\n  Recipes.getAdjustedDataset,\r\n  (steps, data) => RateUtility.calculateOutputs(RateUtility.copy(steps), data)\r\n);\r\n\r\nexport const getNormalizedStepsWithBeacons = createSelector(\r\n  getNormalizedStepsWithOutputs,\r\n  Settings.getRationalBeaconReceivers,\r\n  Recipes.getRationalRecipeSettings,\r\n  Recipes.getAdjustedDataset,\r\n  (steps, beaconReceivers, recipeSettings, data) =>\r\n    RateUtility.calculateBeacons(\r\n      RateUtility.copy(steps),\r\n      beaconReceivers,\r\n      recipeSettings,\r\n      data\r\n    )\r\n);\r\n\r\nexport const getSteps = createSelector(\r\n  getNormalizedStepsWithBeacons,\r\n  Settings.getDisplayRateInfo,\r\n  (steps, dispRateInfo) =>\r\n    RateUtility.sortHierarchy(\r\n      RateUtility.displayRate(RateUtility.copy(steps), dispRateInfo)\r\n    )\r\n);\r\n\r\nexport const checkViaState = createSelector(\r\n  getRationalProducts,\r\n  getNormalizedRates,\r\n  (products, rates) => ({ products, rates })\r\n);\r\n\r\nexport const getZipState = createSelector(\r\n  productsState,\r\n  Items.itemsState,\r\n  Recipes.recipesState,\r\n  Factories.factoriesState,\r\n  Settings.settingsState,\r\n  (products, items, recipes, factories, settings) => ({\r\n    products,\r\n    items,\r\n    recipes,\r\n    factories,\r\n    settings,\r\n  })\r\n);\r\n\r\nexport const getStepsModified = createSelector(\r\n  getSteps,\r\n  Items.itemsState,\r\n  Recipes.recipesState,\r\n  (steps, itemSettings, recipeSettings) => ({\r\n    items: steps.reduce((e: Entities<boolean>, s) => {\r\n      if (s.itemId) {\r\n        e[s.itemId] = itemSettings[s.itemId] != null;\r\n      }\r\n      return e;\r\n    }, {}),\r\n    recipes: steps.reduce((e: Entities<boolean>, s) => {\r\n      if (s.recipeId) {\r\n        e[s.recipeId] = recipeSettings[s.recipeId] != null;\r\n      }\r\n      return e;\r\n    }, {}),\r\n  })\r\n);\r\n\r\nexport const getTotals = createSelector(\r\n  getSteps,\r\n  Items.getItemSettings,\r\n  Recipes.getRecipeSettings,\r\n  Recipes.getAdjustedDataset,\r\n  (steps, itemSettings, recipeSettings, data) => {\r\n    const belts: Entities<Rational> = {};\r\n    const wagons: Entities<Rational> = {};\r\n    const factories: Entities<Rational> = {};\r\n    const beacons: Entities<Rational> = {};\r\n    let power = Rational.zero;\r\n    let pollution = Rational.zero;\r\n\r\n    for (const step of steps) {\r\n      if (step.itemId != null) {\r\n        // Total Belts\r\n        if (step.belts?.nonzero()) {\r\n          const belt = itemSettings[step.itemId].beltId;\r\n          if (belt != null) {\r\n            if (!belts.hasOwnProperty(belt)) {\r\n              belts[belt] = Rational.zero;\r\n            }\r\n            belts[belt] = belts[belt].add(step.belts.ceil());\r\n          }\r\n        }\r\n\r\n        // Total Wagons\r\n        if (step.wagons?.nonzero()) {\r\n          const wagon = itemSettings[step.itemId].wagonId;\r\n          if (wagon != null) {\r\n            if (!wagons.hasOwnProperty(wagon)) {\r\n              wagons[wagon] = Rational.zero;\r\n            }\r\n            wagons[wagon] = wagons[wagon].add(step.wagons.ceil());\r\n          }\r\n        }\r\n      }\r\n\r\n      if (step.recipeId != null) {\r\n        // Total Factories\r\n        if (step.factories?.nonzero()) {\r\n          const recipe = data.recipeEntities[step.recipeId];\r\n          // Don't include silos from launch recipes\r\n          if (!recipe.part) {\r\n            let factory = recipeSettings[step.recipeId].factoryId;\r\n            if (\r\n              data.game === Game.DysonSphereProgram &&\r\n              factory === ItemId.MiningDrill\r\n            ) {\r\n              // Use recipe id (vein type) in place of mining drill for DSP mining\r\n              factory = step.recipeId;\r\n            }\r\n            if (factory != null) {\r\n              if (!factories.hasOwnProperty(factory)) {\r\n                factories[factory] = Rational.zero;\r\n              }\r\n              factories[factory] = factories[factory].add(\r\n                step.factories.ceil()\r\n              );\r\n            }\r\n          }\r\n        }\r\n\r\n        // Total Beacons\r\n        if (step.beacons?.nonzero()) {\r\n          const beacon = recipeSettings[step.recipeId].beaconId;\r\n          if (beacon != null) {\r\n            if (!beacons.hasOwnProperty(beacon)) {\r\n              beacons[beacon] = Rational.zero;\r\n            }\r\n            beacons[beacon] = beacons[beacon].add(step.beacons.ceil());\r\n          }\r\n        }\r\n      }\r\n\r\n      // Total Power\r\n      if (step.power != null) {\r\n        power = power.add(step.power);\r\n      }\r\n\r\n      // Total Pollution\r\n      if (step.pollution != null) {\r\n        pollution = pollution.add(step.pollution);\r\n      }\r\n    }\r\n\r\n    return { belts, wagons, factories, beacons, power, pollution };\r\n  }\r\n);\r\n\r\nexport const getStepDetails = createSelector(\r\n  getSteps,\r\n  Recipes.getAdjustedDataset,\r\n  Settings.getDisabledRecipeIds,\r\n  (steps, data, disabledRecipeIds) =>\r\n    steps.reduce((e: Entities<StepDetail>, s) => {\r\n      const tabs: StepDetailTab[] = [];\r\n      let outputs: Step[] = [];\r\n      const recipeIds: string[] = [];\r\n      const defaultableRecipeIds: string[] = [];\r\n      if (s.itemId != null) {\r\n        const itemId = s.itemId; // Store null-checked id\r\n        tabs.push(StepDetailTab.Item);\r\n        outputs = steps\r\n          .filter((a) => a.outputs?.[itemId] != null)\r\n          .sort((a, b) =>\r\n            b.outputs![itemId].sub(a.outputs![itemId]).toNumber()\r\n          );\r\n      }\r\n      if (s.recipeId != null) {\r\n        tabs.push(StepDetailTab.Recipe);\r\n      }\r\n      if (s.factories?.nonzero()) {\r\n        tabs.push(StepDetailTab.Factory);\r\n      }\r\n      if (s.itemId != null) {\r\n        for (const recipe of data.complexRecipeIds.map(\r\n          (r) => data.recipeR[r]\r\n        )) {\r\n          if (recipe.produces(s.itemId)) {\r\n            recipeIds.push(recipe.id);\r\n            if (\r\n              disabledRecipeIds.indexOf(recipe.id) === -1 &&\r\n              recipe.producesOnly(s.itemId)\r\n            ) {\r\n              defaultableRecipeIds.push(recipe.id);\r\n            }\r\n          }\r\n        }\r\n        if (recipeIds.length) {\r\n          tabs.push(StepDetailTab.Recipes);\r\n        }\r\n      }\r\n\r\n      e[s.id] = {\r\n        tabs: tabs.map((t) => ({ label: t })),\r\n        outputs,\r\n        recipeIds,\r\n        defaultableRecipeIds,\r\n      };\r\n\r\n      return e;\r\n    }, {})\r\n);\r\n\r\nexport const getStepByItemEntities = createSelector(getSteps, (steps) =>\r\n  steps.reduce((e: Entities<Step>, s) => {\r\n    if (s.itemId != null) {\r\n      e[s.itemId] = s;\r\n    }\r\n    return e;\r\n  }, {})\r\n);\r\n\r\nexport const getStepTree = createSelector(getSteps, (steps) => {\r\n  const tree: Entities<boolean[]> = {};\r\n  const indents: Entities<number> = {};\r\n  for (const step of steps) {\r\n    let indent: boolean[] = [];\r\n    if (step.parents) {\r\n      const keys = Object.keys(step.parents);\r\n      if (keys.length === 1 && indents[keys[0]] != null) {\r\n        indent = new Array(indents[keys[0]] + 1).fill(false);\r\n      }\r\n    }\r\n    if (step.recipeId) {\r\n      indents[step.recipeId] = indent.length;\r\n    }\r\n    tree[step.id] = indent;\r\n  }\r\n\r\n  for (let i = 0; i < steps.length; i++) {\r\n    const step = steps[i];\r\n    if (tree[step.id].length) {\r\n      for (let j = i + 1; j < steps.length; j++) {\r\n        const next = steps[j];\r\n        if (tree[next.id]) {\r\n          if (tree[next.id].length === tree[step.id].length) {\r\n            for (let k = i; k < j; k++) {\r\n              const trail = steps[k];\r\n              if (tree[trail.id]) {\r\n                tree[trail.id][tree[step.id].length - 1] = true;\r\n              }\r\n            }\r\n            break;\r\n          } else if (tree[next.id].length < tree[step.id].length) {\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return tree;\r\n});\r\n\r\nexport const getEffectivePrecision = createSelector(\r\n  getSteps,\r\n  Settings.getColumnsState,\r\n  (steps, columns) => {\r\n    const effPrecision: Entities<number | null> = {};\r\n    effPrecision[Column.Surplus] = effPrecFrom(\r\n      steps,\r\n      columns[Column.Items].precision,\r\n      (s) => s.surplus\r\n    );\r\n\r\n    for (const i of precisionColumns.filter((i) => columns[i].show)) {\r\n      effPrecision[i] = effPrecFrom(steps, columns[i].precision, (s) =>\r\n        i === Column.Items\r\n          ? (s.items || Rational.zero).sub(s.surplus || Rational.zero)\r\n          : (s as Record<string, any>)[i.toLowerCase()]\r\n      );\r\n    }\r\n\r\n    return effPrecision;\r\n  }\r\n);\r\n\r\nexport const getEffectivePowerUnit = createSelector(\r\n  getSteps,\r\n  Preferences.getPowerUnit,\r\n  (steps, powerUnit) => {\r\n    if (powerUnit === PowerUnit.Auto) {\r\n      let minPower: Rational | undefined;\r\n      for (const step of steps) {\r\n        if (step.power != null) {\r\n          if (minPower == null || step.power.lt(minPower)) {\r\n            minPower = step.power;\r\n          }\r\n        }\r\n      }\r\n      minPower = minPower ?? Rational.zero;\r\n      if (minPower.lt(Rational.thousand)) {\r\n        return PowerUnit.kW;\r\n      } else if (minPower.lt(Rational.million)) {\r\n        return PowerUnit.MW;\r\n      } else {\r\n        return PowerUnit.GW;\r\n      }\r\n    } else {\r\n      return powerUnit;\r\n    }\r\n  }\r\n);\r\n\r\nexport function effPrecFrom(\r\n  steps: Step[],\r\n  precision: number | null,\r\n  fn: (step: Step) => Rational | undefined\r\n): number | null {\r\n  if (precision == null) {\r\n    return precision;\r\n  }\r\n  let max = 0;\r\n  for (const step of steps) {\r\n    const dec = fn(step)?.toDecimals() ?? 0;\r\n    if (dec >= precision) {\r\n      return precision;\r\n    } else if (dec > max) {\r\n      max = dec;\r\n    }\r\n  }\r\n  return max;\r\n}\r\n","export * from './recipes.actions';\r\nexport * from './recipes.reducer';\r\nexport * from './recipes.selectors';\r\n","import { Action } from '@ngrx/store';\r\n\r\nimport { DefaultIdPayload, IdPayload } from '~/models';\r\n\r\nexport const enum RecipesActionType {\r\n  SET_FACTORY = '[Recipes] Set Factory',\r\n  SET_FACTORY_MODULES = '[Recipes] Set Modules',\r\n  SET_BEACON_COUNT = '[Recipes] Set Beacon Count',\r\n  SET_BEACON = '[Recipes] Set Beacon',\r\n  SET_BEACON_MODULES = '[Recipes] Set Beacon Modules',\r\n  SET_BEACON_TOTAL = '[Recipes] Set Beacon Total',\r\n  SET_OVERCLOCK = '[Recipes] Set Overclock',\r\n  SET_COST = '[Recipes] Set Cost',\r\n  RESET_RECIPE = '[Recipes] Reset Recipe',\r\n  RESET_RECIPE_MODULES = '[Recipes] Reset Recipe Modules',\r\n  RESET_FACTORIES = '[Recipes] Reset Factories',\r\n  RESET_BEACONS = '[Recipes] Reset Beacons',\r\n  RESET_COST = '[Recipes] Reset Cost',\r\n}\r\n\r\nexport class SetFactoryAction implements Action {\r\n  readonly type = RecipesActionType.SET_FACTORY;\r\n  constructor(public payload: DefaultIdPayload) {}\r\n}\r\n\r\nexport class SetFactoryModulesAction implements Action {\r\n  readonly type = RecipesActionType.SET_FACTORY_MODULES;\r\n  constructor(public payload: DefaultIdPayload<string[]>) {}\r\n}\r\n\r\nexport class SetBeaconCountAction implements Action {\r\n  readonly type = RecipesActionType.SET_BEACON_COUNT;\r\n  constructor(public payload: DefaultIdPayload) {}\r\n}\r\n\r\nexport class SetBeaconAction implements Action {\r\n  readonly type = RecipesActionType.SET_BEACON;\r\n  constructor(public payload: DefaultIdPayload) {}\r\n}\r\n\r\nexport class SetBeaconModulesAction implements Action {\r\n  readonly type = RecipesActionType.SET_BEACON_MODULES;\r\n  constructor(public payload: DefaultIdPayload<string[]>) {}\r\n}\r\n\r\nexport class SetBeaconTotalAction implements Action {\r\n  readonly type = RecipesActionType.SET_BEACON_TOTAL;\r\n  constructor(public payload: IdPayload) {}\r\n}\r\n\r\nexport class SetOverclockAction implements Action {\r\n  readonly type = RecipesActionType.SET_OVERCLOCK;\r\n  constructor(public payload: DefaultIdPayload<number>) {}\r\n}\r\n\r\nexport class SetCostAction implements Action {\r\n  readonly type = RecipesActionType.SET_COST;\r\n  constructor(public payload: IdPayload<string | undefined>) {}\r\n}\r\n\r\nexport class ResetRecipeAction implements Action {\r\n  readonly type = RecipesActionType.RESET_RECIPE;\r\n  constructor(public payload: string) {}\r\n}\r\n\r\nexport class ResetRecipeModulesAction implements Action {\r\n  readonly type = RecipesActionType.RESET_RECIPE_MODULES;\r\n  constructor(public payload: string) {}\r\n}\r\n\r\nexport class ResetFactoriesAction implements Action {\r\n  readonly type = RecipesActionType.RESET_FACTORIES;\r\n}\r\n\r\nexport class ResetBeaconsAction implements Action {\r\n  readonly type = RecipesActionType.RESET_BEACONS;\r\n}\r\n\r\nexport class ResetCostAction implements Action {\r\n  readonly type = RecipesActionType.RESET_COST;\r\n}\r\n\r\nexport type RecipesAction =\r\n  | SetFactoryAction\r\n  | SetFactoryModulesAction\r\n  | SetBeaconCountAction\r\n  | SetBeaconAction\r\n  | SetBeaconModulesAction\r\n  | SetBeaconTotalAction\r\n  | SetOverclockAction\r\n  | SetCostAction\r\n  | ResetRecipeAction\r\n  | ResetRecipeModulesAction\r\n  | ResetFactoriesAction\r\n  | ResetBeaconsAction\r\n  | ResetCostAction;\r\n","import { DefaultIdPayload, Entities, RecipeSettings } from '~/models';\r\nimport { StoreUtility } from '~/utilities';\r\nimport * as App from '../app.actions';\r\nimport * as Settings from '../settings';\r\nimport { RecipesAction, RecipesActionType } from './recipes.actions';\r\n\r\nexport type RecipesState = Entities<RecipeSettings>;\r\n\r\nexport const initialRecipesState: RecipesState = {};\r\n\r\nexport function recipesReducer(\r\n  state: RecipesState = initialRecipesState,\r\n  action: RecipesAction | App.AppAction | Settings.SetModAction\r\n): RecipesState {\r\n  switch (action.type) {\r\n    case App.AppActionType.LOAD:\r\n      return { ...initialRecipesState, ...action.payload.recipesState };\r\n    case App.AppActionType.RESET:\r\n    case Settings.SettingsActionType.SET_MOD:\r\n      return initialRecipesState;\r\n    case RecipesActionType.SET_FACTORY:\r\n      return StoreUtility.resetFields(\r\n        StoreUtility.compareReset(state, 'factoryId', action.payload),\r\n        ['factoryModuleIds', 'beaconCount', 'beaconId', 'beaconModuleIds'],\r\n        action.payload.id\r\n      );\r\n    case RecipesActionType.SET_FACTORY_MODULES:\r\n      return StoreUtility.compareReset(\r\n        state,\r\n        'factoryModuleIds',\r\n        action.payload\r\n      );\r\n    case RecipesActionType.SET_BEACON_COUNT:\r\n      return StoreUtility.compareReset(state, 'beaconCount', action.payload);\r\n    case RecipesActionType.SET_BEACON:\r\n      return StoreUtility.resetField(\r\n        StoreUtility.compareReset(state, 'beaconId', action.payload),\r\n        'beaconModuleIds',\r\n        action.payload.id\r\n      );\r\n    case RecipesActionType.SET_BEACON_MODULES:\r\n      return StoreUtility.compareReset(\r\n        state,\r\n        'beaconModuleIds',\r\n        action.payload\r\n      );\r\n    case RecipesActionType.SET_BEACON_TOTAL:\r\n      return StoreUtility.assignValue(state, 'beaconTotal', action.payload);\r\n    case RecipesActionType.SET_OVERCLOCK:\r\n      return StoreUtility.compareReset(state, 'overclock', action.payload);\r\n    case RecipesActionType.SET_COST:\r\n      return StoreUtility.compareReset(\r\n        state,\r\n        'cost',\r\n        action.payload as DefaultIdPayload\r\n      );\r\n    case RecipesActionType.RESET_RECIPE: {\r\n      const newState = { ...state };\r\n      delete newState[action.payload];\r\n      return newState;\r\n    }\r\n    case RecipesActionType.RESET_RECIPE_MODULES:\r\n      return StoreUtility.resetFields(\r\n        state,\r\n        [\r\n          'factoryModuleIds',\r\n          'beaconCount',\r\n          'beaconId',\r\n          'beaconModuleIds',\r\n          'beaconTotal',\r\n        ],\r\n        action.payload\r\n      );\r\n    case RecipesActionType.RESET_FACTORIES:\r\n      return StoreUtility.resetFields(state, [\r\n        'factoryId',\r\n        'overclock',\r\n        'factoryModuleIds',\r\n        'beaconCount',\r\n        'beaconId',\r\n        'beaconModuleIds',\r\n        'beaconTotal',\r\n      ]);\r\n    case RecipesActionType.RESET_BEACONS:\r\n      return StoreUtility.resetFields(state, [\r\n        'beaconCount',\r\n        'beaconId',\r\n        'beaconModuleIds',\r\n        'beaconTotal',\r\n      ]);\r\n    case RecipesActionType.RESET_COST:\r\n      return StoreUtility.resetFields(state, ['cost']);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { createSelector } from '@ngrx/store';\r\n\r\nimport {\r\n  Entities,\r\n  Rational,\r\n  RationalRecipeSettings,\r\n  RecipeSettings,\r\n} from '~/models';\r\nimport { RecipeUtility } from '~/utilities';\r\nimport { LabState } from '../';\r\nimport * as Factories from '../factories';\r\nimport * as Items from '../items';\r\nimport * as Settings from '../settings';\r\nimport { RecipesState } from './recipes.reducer';\r\n\r\n/* Base selector functions */\r\nexport const recipesState = (state: LabState): RecipesState =>\r\n  state.recipesState;\r\n\r\n/* Complex selectors */\r\nexport const getRecipeSettings = createSelector(\r\n  recipesState,\r\n  Factories.getFactories,\r\n  Settings.getDataset,\r\n  (state, factories, data) => {\r\n    const value: Entities<RecipeSettings> = {};\r\n    if (data?.recipeIds?.length) {\r\n      for (const recipe of data.recipeIds.map((i) => data.recipeEntities[i])) {\r\n        const s: RecipeSettings = { ...state[recipe.id] };\r\n\r\n        if (!s.factoryId) {\r\n          s.factoryId = RecipeUtility.bestMatch(\r\n            recipe.producers,\r\n            factories.ids ?? []\r\n          );\r\n        }\r\n\r\n        const factory = data.factoryEntities[s.factoryId];\r\n        const def = factories.entities[s.factoryId];\r\n        if (factory != null && RecipeUtility.allowsModules(recipe, factory)) {\r\n          if (!s.factoryModuleIds) {\r\n            s.factoryModuleIds = RecipeUtility.defaultModules(\r\n              data.recipeModuleIds[recipe.id],\r\n              def.moduleRankIds ?? [],\r\n              factory.modules ?? 0\r\n            );\r\n          }\r\n\r\n          if (s.beaconCount == null) {\r\n            s.beaconCount = def.beaconCount;\r\n          }\r\n\r\n          s.beaconId = s.beaconId || def.beaconId;\r\n          if (s.beaconId) {\r\n            const beacon = data.beaconEntities[s.beaconId];\r\n            if (beacon && !s.beaconModuleIds) {\r\n              s.beaconModuleIds = new Array(beacon.modules).fill(\r\n                def.beaconModuleId\r\n              );\r\n            }\r\n          }\r\n        } else {\r\n          // Factory doesn't support modules, remove any\r\n          delete s.factoryModuleIds;\r\n          delete s.beaconCount;\r\n          delete s.beaconId;\r\n          delete s.beaconModuleIds;\r\n        }\r\n\r\n        if (\r\n          s.beaconTotal &&\r\n          (!s.beaconCount || Rational.fromString(s.beaconCount).isZero())\r\n        ) {\r\n          // No actual beacons, ignore the total beacons\r\n          delete s.beaconTotal;\r\n        }\r\n\r\n        s.overclock = s.overclock || def?.overclock;\r\n\r\n        value[recipe.id] = s;\r\n      }\r\n    }\r\n\r\n    return value;\r\n  }\r\n);\r\n\r\nexport const getRationalRecipeSettings = createSelector(\r\n  getRecipeSettings,\r\n  (recipeSettings) =>\r\n    Object.keys(recipeSettings).reduce(\r\n      (e: Entities<RationalRecipeSettings>, i) => {\r\n        e[i] = new RationalRecipeSettings(recipeSettings[i]);\r\n        return e;\r\n      },\r\n      {}\r\n    )\r\n);\r\n\r\nexport const getSrc = createSelector(\r\n  Settings.getFuelId,\r\n  Settings.getRationalMiningBonus,\r\n  Settings.getResearchFactor,\r\n  Settings.getDataset,\r\n  (fuelId, miningBonus, researchSpeed, data) => ({\r\n    fuelId,\r\n    miningBonus,\r\n    researchSpeed,\r\n    data,\r\n  })\r\n);\r\n\r\nexport const getAdjustedDataset = createSelector(\r\n  getRationalRecipeSettings,\r\n  Items.getItemSettings,\r\n  Settings.getDisabledRecipeIds,\r\n  Settings.getAdjustmentData,\r\n  (recipeSettings, itemSettings, disabledRecipeIds, adj) =>\r\n    RecipeUtility.adjustDataset(\r\n      recipeSettings,\r\n      itemSettings,\r\n      disabledRecipeIds,\r\n      adj.fuelId,\r\n      adj.proliferatorSprayId,\r\n      adj.miningBonus,\r\n      adj.researchSpeed,\r\n      adj.costFactor,\r\n      adj.costFactory,\r\n      adj.data\r\n    )\r\n);\r\n\r\nexport const getRecipesModified = createSelector(recipesState, (state) => ({\r\n  factories: Object.keys(state).some(\r\n    (id) => state[id].factoryId || state[id].factoryModuleIds\r\n  ),\r\n  overclock: Object.keys(state).some((id) => state[id].overclock),\r\n  beacons: Object.keys(state).some(\r\n    (id) =>\r\n      state[id].beaconId ||\r\n      state[id].beaconModuleIds ||\r\n      state[id].beaconCount ||\r\n      state[id].beaconTotal\r\n  ),\r\n  cost: Object.keys(state).some((id) => state[id].cost),\r\n}));\r\n","export * from './settings.actions';\r\nexport * from './settings.reducer';\r\nexport * from './settings.selectors';\r\n","import { Action } from '@ngrx/store';\r\n\r\nimport {\r\n  DefaultPayload,\r\n  DisplayRate,\r\n  InserterCapacity,\r\n  InserterTarget,\r\n  Preset,\r\n  PreviousPayload,\r\n  ResearchSpeed,\r\n} from '~/models';\r\n\r\nexport const enum SettingsActionType {\r\n  SET_PRESET = '[Settings] Set Preset',\r\n  SET_MOD = '[Settings] Set Mod',\r\n  SET_DISABLED_RECIPES = '[Settings] Set Disabled Recipes',\r\n  SET_BEACON_RECEIVERS = '[Settings] Set Beacon Receivers',\r\n  SET_BELT = '[Settings] Set Belt',\r\n  SET_PIPE = '[Settings] Set Pipe',\r\n  SET_FUEL = '[Settings] Set Fuel',\r\n  SET_FLOW_RATE = '[Settings] Set Flow Rate',\r\n  SET_CARGO_WAGON = '[Settings] Set Cargo Wagon',\r\n  SET_FLUID_WAGON = '[Settings] Set Fluid Wagon',\r\n  SET_DISPLAY_RATE = '[Settings] Set Display Rate',\r\n  SET_MINING_BONUS = '[Settings] Set Mining Bonus',\r\n  SET_RESEARCH_SPEED = '[Settings] Set Research Speed',\r\n  SET_INSERTER_TARGET = '[Settings] Set Inserter Target',\r\n  SET_INSERTER_CAPACITY = '[Settings] Set Inserter Capacity',\r\n  SET_COST_FACTOR = '[Settings] Set Cost Factor',\r\n  SET_COST_FACTORY = '[Settings] Set Factory Cost',\r\n  SET_COST_INPUT = '[Settings] Set Input Cost',\r\n  SET_COST_IGNORED = '[Settings] Set Ignored Cost',\r\n  SET_PROLIFERATOR_SPRAY = '[Settings] Set Proliferator Spray',\r\n  RESET_COST = '[Settings] Reset Cost Modifiers',\r\n}\r\n\r\nexport class SetPresetAction implements Action {\r\n  readonly type = SettingsActionType.SET_PRESET;\r\n  constructor(public payload: Preset) {}\r\n}\r\n\r\nexport class SetModAction implements Action {\r\n  readonly type = SettingsActionType.SET_MOD;\r\n  constructor(public payload: string) {}\r\n}\r\n\r\nexport class SetDisabledRecipesAction implements Action {\r\n  readonly type = SettingsActionType.SET_DISABLED_RECIPES;\r\n  constructor(public payload: DefaultPayload<string[]>) {}\r\n}\r\n\r\nexport class SetBeaconReceiversAction implements Action {\r\n  readonly type = SettingsActionType.SET_BEACON_RECEIVERS;\r\n  constructor(public payload: string | null) {}\r\n}\r\n\r\nexport class SetBeltAction implements Action {\r\n  readonly type = SettingsActionType.SET_BELT;\r\n  constructor(public payload: DefaultPayload) {}\r\n}\r\n\r\nexport class SetPipeAction implements Action {\r\n  readonly type = SettingsActionType.SET_PIPE;\r\n  constructor(public payload: DefaultPayload) {}\r\n}\r\n\r\nexport class SetFuelAction implements Action {\r\n  readonly type = SettingsActionType.SET_FUEL;\r\n  constructor(public payload: DefaultPayload) {}\r\n}\r\n\r\nexport class SetFlowRateAction implements Action {\r\n  readonly type = SettingsActionType.SET_FLOW_RATE;\r\n  constructor(public payload: number) {}\r\n}\r\n\r\nexport class SetCargoWagonAction implements Action {\r\n  readonly type = SettingsActionType.SET_CARGO_WAGON;\r\n  constructor(public payload: DefaultPayload) {}\r\n}\r\n\r\nexport class SetFluidWagonAction implements Action {\r\n  readonly type = SettingsActionType.SET_FLUID_WAGON;\r\n  constructor(public payload: DefaultPayload) {}\r\n}\r\n\r\nexport class SetDisplayRateAction implements Action {\r\n  readonly type = SettingsActionType.SET_DISPLAY_RATE;\r\n  constructor(public payload: PreviousPayload<DisplayRate>) {}\r\n}\r\n\r\nexport class SetMiningBonusAction implements Action {\r\n  readonly type = SettingsActionType.SET_MINING_BONUS;\r\n  constructor(public payload: number) {}\r\n}\r\n\r\nexport class SetResearchSpeedAction implements Action {\r\n  readonly type = SettingsActionType.SET_RESEARCH_SPEED;\r\n  constructor(public payload: ResearchSpeed) {}\r\n}\r\n\r\nexport class SetInserterTargetAction implements Action {\r\n  readonly type = SettingsActionType.SET_INSERTER_TARGET;\r\n  constructor(public payload: InserterTarget) {}\r\n}\r\n\r\nexport class SetInserterCapacityAction implements Action {\r\n  readonly type = SettingsActionType.SET_INSERTER_CAPACITY;\r\n  constructor(public payload: InserterCapacity) {}\r\n}\r\n\r\nexport class SetCostFactorAction implements Action {\r\n  readonly type = SettingsActionType.SET_COST_FACTOR;\r\n  constructor(public payload: string) {}\r\n}\r\n\r\nexport class SetCostFactoryAction implements Action {\r\n  readonly type = SettingsActionType.SET_COST_FACTORY;\r\n  constructor(public payload: string) {}\r\n}\r\n\r\nexport class SetCostInputAction implements Action {\r\n  readonly type = SettingsActionType.SET_COST_INPUT;\r\n  constructor(public payload: string) {}\r\n}\r\n\r\nexport class SetCostIgnoredAction implements Action {\r\n  readonly type = SettingsActionType.SET_COST_IGNORED;\r\n  constructor(public payload: string) {}\r\n}\r\n\r\nexport class SetProliferatorSprayAction implements Action {\r\n  readonly type = SettingsActionType.SET_PROLIFERATOR_SPRAY;\r\n  constructor(public payload: string) {}\r\n}\r\n\r\nexport class ResetCostAction implements Action {\r\n  readonly type = SettingsActionType.RESET_COST;\r\n}\r\n\r\nexport type SettingsAction =\r\n  | SetPresetAction\r\n  | SetModAction\r\n  | SetDisabledRecipesAction\r\n  | SetBeaconReceiversAction\r\n  | SetBeltAction\r\n  | SetPipeAction\r\n  | SetFuelAction\r\n  | SetFlowRateAction\r\n  | SetCargoWagonAction\r\n  | SetFluidWagonAction\r\n  | SetDisplayRateAction\r\n  | SetMiningBonusAction\r\n  | SetResearchSpeedAction\r\n  | SetInserterTargetAction\r\n  | SetInserterCapacityAction\r\n  | SetCostFactorAction\r\n  | SetCostFactoryAction\r\n  | SetCostInputAction\r\n  | SetCostIgnoredAction\r\n  | SetProliferatorSprayAction\r\n  | ResetCostAction;\r\n","import {\r\n  DisplayRate,\r\n  InserterCapacity,\r\n  InserterTarget,\r\n  ItemId,\r\n  Preset,\r\n  ResearchSpeed,\r\n} from '~/models';\r\nimport { StoreUtility } from '~/utilities';\r\nimport * as App from '../app.actions';\r\nimport { SettingsAction, SettingsActionType } from './settings.actions';\r\n\r\nexport interface SettingsState {\r\n  modId: string;\r\n  disabledRecipeIds?: string[];\r\n  displayRate: DisplayRate;\r\n  preset: Preset;\r\n  beaconReceivers: string | null;\r\n  beltId?: string;\r\n  pipeId?: string;\r\n  fuelId?: string;\r\n  cargoWagonId?: string;\r\n  fluidWagonId?: string;\r\n  flowRate: number;\r\n  miningBonus: number;\r\n  researchSpeed: ResearchSpeed;\r\n  inserterTarget: InserterTarget;\r\n  inserterCapacity: InserterCapacity;\r\n  costFactor: string;\r\n  costFactory: string;\r\n  costInput: string;\r\n  costIgnored: string;\r\n  proliferatorSprayId: string;\r\n}\r\n\r\nexport const initialSettingsState: SettingsState = {\r\n  modId: '1.1',\r\n  displayRate: DisplayRate.PerMinute,\r\n  preset: Preset.Minimum,\r\n  beaconReceivers: null,\r\n  flowRate: 1500,\r\n  miningBonus: 0,\r\n  researchSpeed: ResearchSpeed.Speed6,\r\n  inserterTarget: InserterTarget.ExpressTransportBelt,\r\n  inserterCapacity: InserterCapacity.Capacity7,\r\n  costFactor: '1',\r\n  costFactory: '1',\r\n  costInput: '1000000',\r\n  costIgnored: '0',\r\n  proliferatorSprayId: ItemId.Module,\r\n};\r\n\r\nexport function settingsReducer(\r\n  state: SettingsState = initialSettingsState,\r\n  action: SettingsAction | App.AppAction\r\n): SettingsState {\r\n  switch (action.type) {\r\n    case App.AppActionType.LOAD:\r\n      return action.payload.settingsState\r\n        ? { ...initialSettingsState, ...action.payload.settingsState }\r\n        : initialSettingsState;\r\n    case App.AppActionType.RESET:\r\n      return initialSettingsState;\r\n    case SettingsActionType.SET_PRESET:\r\n      return { ...state, ...{ preset: action.payload } };\r\n    case SettingsActionType.SET_MOD:\r\n      const newState = {\r\n        ...state,\r\n        ...{\r\n          modId: action.payload,\r\n          preset: Preset.Minimum,\r\n          beaconReceivers: null,\r\n          miningBonus: 0,\r\n          researchSpeed: ResearchSpeed.Speed6,\r\n        },\r\n      };\r\n      delete newState.disabledRecipeIds;\r\n      delete newState.beltId;\r\n      delete newState.pipeId;\r\n      delete newState.fuelId;\r\n      delete newState.cargoWagonId;\r\n      delete newState.fluidWagonId;\r\n      return newState;\r\n    case SettingsActionType.SET_DISABLED_RECIPES:\r\n      return {\r\n        ...state,\r\n        ...{\r\n          disabledRecipeIds: StoreUtility.compareValues(action.payload),\r\n        },\r\n      };\r\n    case SettingsActionType.SET_BEACON_RECEIVERS:\r\n      return { ...state, ...{ beaconReceivers: action.payload } };\r\n    case SettingsActionType.SET_BELT:\r\n      return {\r\n        ...state,\r\n        ...{ beltId: StoreUtility.compareValue(action.payload) },\r\n      };\r\n    case SettingsActionType.SET_PIPE:\r\n      return {\r\n        ...state,\r\n        ...{ pipeId: StoreUtility.compareValue(action.payload) },\r\n      };\r\n    case SettingsActionType.SET_FUEL:\r\n      return {\r\n        ...state,\r\n        ...{ fuelId: StoreUtility.compareValue(action.payload) },\r\n      };\r\n    case SettingsActionType.SET_FLOW_RATE:\r\n      return { ...state, ...{ flowRate: action.payload } };\r\n    case SettingsActionType.SET_CARGO_WAGON:\r\n      return {\r\n        ...state,\r\n        ...{ cargoWagonId: StoreUtility.compareValue(action.payload) },\r\n      };\r\n    case SettingsActionType.SET_FLUID_WAGON:\r\n      return {\r\n        ...state,\r\n        ...{ fluidWagonId: StoreUtility.compareValue(action.payload) },\r\n      };\r\n    case SettingsActionType.SET_DISPLAY_RATE:\r\n      return { ...state, ...{ displayRate: action.payload.value } };\r\n    case SettingsActionType.SET_MINING_BONUS:\r\n      return { ...state, ...{ miningBonus: action.payload } };\r\n    case SettingsActionType.SET_RESEARCH_SPEED:\r\n      return { ...state, ...{ researchSpeed: action.payload } };\r\n    case SettingsActionType.SET_INSERTER_TARGET:\r\n      return { ...state, ...{ inserterTarget: action.payload } };\r\n    case SettingsActionType.SET_INSERTER_CAPACITY:\r\n      return { ...state, ...{ inserterCapacity: action.payload } };\r\n    case SettingsActionType.SET_COST_FACTOR:\r\n      return { ...state, ...{ costFactor: action.payload } };\r\n    case SettingsActionType.SET_COST_FACTORY:\r\n      return { ...state, ...{ costFactory: action.payload } };\r\n    case SettingsActionType.SET_COST_INPUT:\r\n      return { ...state, ...{ costInput: action.payload } };\r\n    case SettingsActionType.SET_COST_IGNORED:\r\n      return { ...state, ...{ costIgnored: action.payload } };\r\n    case SettingsActionType.SET_PROLIFERATOR_SPRAY:\r\n      return { ...state, ...{ proliferatorSprayId: action.payload } };\r\n    case SettingsActionType.RESET_COST:\r\n      return {\r\n        ...state,\r\n        ...{\r\n          costFactor: initialSettingsState.costFactor,\r\n          costFactory: initialSettingsState.costFactory,\r\n          costInput: initialSettingsState.costInput,\r\n          costIgnored: initialSettingsState.costIgnored,\r\n        },\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { createSelector } from '@ngrx/store';\r\nimport { SelectItem } from 'primeng/api';\r\n\r\nimport { environment } from 'src/environments';\r\nimport {\r\n  Column,\r\n  columnOptions,\r\n  Dataset,\r\n  Defaults,\r\n  displayRateInfo,\r\n  Entities,\r\n  FuelType,\r\n  Game,\r\n  InserterData,\r\n  ItemId,\r\n  Preset,\r\n  presetOptions,\r\n  rateTypeOptions,\r\n  Rational,\r\n  RationalBeacon,\r\n  RationalBelt,\r\n  RationalCargoWagon,\r\n  RationalFactory,\r\n  RationalFluidWagon,\r\n  RationalFuel,\r\n  RationalItem,\r\n  RationalModule,\r\n  RationalRecipe,\r\n  researchSpeedFactor,\r\n  toBoolEntities,\r\n  toEntities,\r\n} from '~/models';\r\nimport { Options } from '~/models/options';\r\nimport { LabState } from '../';\r\nimport * as Datasets from '../datasets';\r\nimport * as Preferences from '../preferences';\r\nimport { initialSettingsState, SettingsState } from './settings.reducer';\r\n\r\n/* Base selector functions */\r\nexport const settingsState = (state: LabState): SettingsState =>\r\n  state.settingsState;\r\n\r\nexport const getPreset = createSelector(settingsState, (state) => state.preset);\r\nexport const getModId = createSelector(settingsState, (state) => state.modId);\r\nexport const getBeaconReceivers = createSelector(\r\n  settingsState,\r\n  (state) => state.beaconReceivers\r\n);\r\nexport const getFlowRate = createSelector(\r\n  settingsState,\r\n  (state) => state.flowRate\r\n);\r\nexport const getDisplayRate = createSelector(\r\n  settingsState,\r\n  (state) => state.displayRate\r\n);\r\nexport const getMiningBonus = createSelector(\r\n  settingsState,\r\n  (state) => state.miningBonus\r\n);\r\nexport const getResearchSpeed = createSelector(\r\n  settingsState,\r\n  (state) => state.researchSpeed\r\n);\r\nexport const getInserterTarget = createSelector(\r\n  settingsState,\r\n  (state) => state.inserterTarget\r\n);\r\nexport const getInserterCapacity = createSelector(\r\n  settingsState,\r\n  (state) => state.inserterCapacity\r\n);\r\nexport const getCostFactor = createSelector(\r\n  settingsState,\r\n  (state) => state.costFactor\r\n);\r\nexport const getCostFactory = createSelector(\r\n  settingsState,\r\n  (state) => state.costFactory\r\n);\r\nexport const getCostInput = createSelector(\r\n  settingsState,\r\n  (state) => state.costInput\r\n);\r\nexport const getCostIgnored = createSelector(\r\n  settingsState,\r\n  (state) => state.costIgnored\r\n);\r\nexport const getProliferatorSprayId = createSelector(\r\n  settingsState,\r\n  (state) => state.proliferatorSprayId\r\n);\r\n\r\n/* Complex selectors */\r\nexport const getMod = createSelector(\r\n  getModId,\r\n  Datasets.getModEntities,\r\n  (id, data) => data[id]\r\n);\r\n\r\nexport const getHash = createSelector(\r\n  getModId,\r\n  Datasets.getHashEntities,\r\n  (id, hashEntities) => hashEntities[id]\r\n);\r\n\r\nexport const getGame = createSelector(\r\n  getModId,\r\n  Datasets.getModInfoEntities,\r\n  (id, data) => data[id].game\r\n);\r\n\r\nexport const getColumnOptions = createSelector(getGame, (game) =>\r\n  columnOptions(game)\r\n);\r\n\r\nexport const getDisplayRateInfo = createSelector(\r\n  getDisplayRate,\r\n  (displayRate) => displayRateInfo[displayRate]\r\n);\r\n\r\nexport const getRateTypeOptions = createSelector(\r\n  getGame,\r\n  getDisplayRateInfo,\r\n  (game, dispRateInfo) => rateTypeOptions(dispRateInfo, game)\r\n);\r\n\r\nexport const getPresetOptions = createSelector(getGame, (game) =>\r\n  presetOptions(game)\r\n);\r\n\r\nexport const getModOptions = createSelector(\r\n  getGame,\r\n  Datasets.getModSets,\r\n  (game, modSets) =>\r\n    modSets\r\n      .filter((b) => b.game === game)\r\n      .map(\r\n        (m): SelectItem => ({\r\n          label: m.name,\r\n          value: m.id,\r\n        })\r\n      )\r\n);\r\n\r\nexport const getColumnsState = createSelector(\r\n  getGame,\r\n  Preferences.getColumns,\r\n  (game, col): Preferences.ColumnsState => {\r\n    switch (game) {\r\n      case Game.CaptainOfIndustry:\r\n        return {\r\n          ...Preferences.initialColumnsState,\r\n          ...col,\r\n          ...{\r\n            [Column.Wagons]: { ...col[Column.Wagons], ...{ show: false } },\r\n            [Column.Beacons]: { ...col[Column.Beacons], ...{ show: false } },\r\n            [Column.Power]: { ...col[Column.Power], ...{ show: false } },\r\n            [Column.Pollution]: {\r\n              ...col[Column.Pollution],\r\n              ...{ show: false },\r\n            },\r\n          },\r\n        };\r\n      case Game.DysonSphereProgram:\r\n        return {\r\n          ...Preferences.initialColumnsState,\r\n          ...col,\r\n          ...{\r\n            [Column.Wagons]: { ...col[Column.Wagons], ...{ show: false } },\r\n            [Column.Beacons]: { ...col[Column.Beacons], ...{ show: false } },\r\n            [Column.Pollution]: {\r\n              ...col[Column.Pollution],\r\n              ...{ show: false },\r\n            },\r\n          },\r\n        };\r\n      case Game.Satisfactory:\r\n        return {\r\n          ...Preferences.initialColumnsState,\r\n          ...col,\r\n          ...{\r\n            [Column.Beacons]: { ...col[Column.Beacons], ...{ show: false } },\r\n            [Column.Pollution]: {\r\n              ...col[Column.Pollution],\r\n              ...{ show: false },\r\n            },\r\n          },\r\n        };\r\n      default:\r\n        return {\r\n          ...Preferences.initialColumnsState,\r\n          ...col,\r\n        };\r\n    }\r\n  }\r\n);\r\n\r\nexport const getDefaults = createSelector(getPreset, getMod, (preset, base) => {\r\n  if (base) {\r\n    const m = base.defaults;\r\n    if (m) {\r\n      let moduleRank: string[] = [];\r\n      switch (base.game) {\r\n        case Game.Factorio: {\r\n          moduleRank = preset === Preset.Minimum ? [] : m.moduleRank;\r\n          break;\r\n        }\r\n        case Game.DysonSphereProgram: {\r\n          moduleRank = preset === Preset.Beacon8 ? m.moduleRank : [];\r\n          break;\r\n        }\r\n        case Game.Satisfactory: {\r\n          moduleRank = m.moduleRank;\r\n        }\r\n      }\r\n      const defaults: Defaults = {\r\n        beltId: preset === Preset.Minimum ? m.minBelt : m.maxBelt,\r\n        pipeId: preset === Preset.Minimum ? m.minPipe : m.maxPipe,\r\n        fuelId: m.fuel,\r\n        cargoWagonId: m.cargoWagon,\r\n        fluidWagonId: m.fluidWagon,\r\n        disabledRecipeIds: m.disabledRecipes,\r\n        factoryRankIds:\r\n          preset === Preset.Minimum ? m.minFactoryRank : m.maxFactoryRank,\r\n        moduleRankIds: moduleRank,\r\n        beaconCount:\r\n          preset < Preset.Beacon8 ? '0' : preset < Preset.Beacon12 ? '8' : '12',\r\n        beaconId: m.beacon,\r\n        beaconModuleId:\r\n          preset < Preset.Beacon8 ? ItemId.Module : m.beaconModule,\r\n      };\r\n      return defaults;\r\n    }\r\n  }\r\n  return null;\r\n});\r\n\r\nexport const getSettings = createSelector(\r\n  settingsState,\r\n  getDefaults,\r\n  (s, d) => ({\r\n    ...s,\r\n    ...{\r\n      beltId: s.beltId ?? d?.beltId,\r\n      pipeId: s.pipeId ?? d?.pipeId,\r\n      fuelId: s.fuelId ?? d?.fuelId,\r\n      cargoWagonId: s.cargoWagonId ?? d?.cargoWagonId,\r\n      fluidWagonId: s.fluidWagonId ?? d?.fluidWagonId,\r\n      disabledRecipeIds: s.disabledRecipeIds ?? d?.disabledRecipeIds ?? [],\r\n    },\r\n  })\r\n);\r\n\r\nexport const getFuelId = createSelector(getSettings, (s) => s.fuelId);\r\n\r\nexport const getDisabledRecipeIds = createSelector(\r\n  getSettings,\r\n  (s) => s.disabledRecipeIds\r\n);\r\n\r\nexport const getRationalMiningBonus = createSelector(getMiningBonus, (bonus) =>\r\n  Rational.fromNumber(bonus).div(Rational.hundred)\r\n);\r\n\r\nexport const getResearchFactor = createSelector(\r\n  getResearchSpeed,\r\n  (speed) => researchSpeedFactor[speed]\r\n);\r\n\r\nexport const getRationalBeaconReceivers = createSelector(\r\n  getBeaconReceivers,\r\n  (total) => (total ? Rational.fromString(total) : null)\r\n);\r\n\r\nexport const getRationalFlowRate = createSelector(getFlowRate, (rate) =>\r\n  Rational.fromNumber(rate)\r\n);\r\n\r\nexport const getRationalCostFactor = createSelector(getCostFactor, (cost) =>\r\n  Rational.fromString(cost)\r\n);\r\n\r\nexport const getRationalCostFactory = createSelector(getCostFactory, (cost) =>\r\n  Rational.fromString(cost)\r\n);\r\n\r\nexport const getRationalCostInput = createSelector(getCostInput, (cost) =>\r\n  Rational.fromString(cost)\r\n);\r\n\r\nexport const getRationalCostIgnored = createSelector(getCostIgnored, (cost) =>\r\n  Rational.fromString(cost)\r\n);\r\n\r\nexport const getSimplexModifiers = createSelector(\r\n  getRationalCostInput,\r\n  getRationalCostIgnored,\r\n  Preferences.getSimplexType,\r\n  (costInput, costIgnored, simplexType) => ({\r\n    costInput,\r\n    costIgnored,\r\n    simplexType,\r\n  })\r\n);\r\n\r\nexport const getI18n = createSelector(\r\n  getMod,\r\n  Datasets.getI18nEntities,\r\n  Preferences.getLanguage,\r\n  (base, i18n, lang) => (base ? i18n[`${base.id}-${lang}`] : null)\r\n);\r\n\r\nexport const getDataset = createSelector(\r\n  Datasets.getAppData,\r\n  getMod,\r\n  getI18n,\r\n  getHash,\r\n  getDefaults,\r\n  getGame,\r\n  (app, mod, i18n, hash, defaults, game) => {\r\n    // Map out entities with mods\r\n    const categoryEntities = getEntities(app.categories, mod?.categories ?? []);\r\n    const appIconPath = `data/${app.id}/icons.png`;\r\n    const modIconPath = `data/${mod?.id}/icons.png`;\r\n    const iconEntities = getEntities(\r\n      app.icons.map((i) => ({\r\n        ...i,\r\n        ...{ file: i.file ?? appIconPath },\r\n      })),\r\n\r\n      (mod?.icons ?? []).map((i) => ({\r\n        ...i,\r\n        ...{ file: i.file ?? modIconPath },\r\n      }))\r\n    );\r\n    const itemData = getEntities(app.items, mod?.items ?? []);\r\n    const recipeEntities = getEntities(app.recipes, mod?.recipes ?? []);\r\n    const limitations = getArrayEntities(\r\n      app.limitations,\r\n      mod?.limitations ?? []\r\n    );\r\n\r\n    // Apply localization\r\n    if (i18n) {\r\n      for (const i of Object.keys(i18n.categories).filter(\r\n        (i) => categoryEntities[i]\r\n      )) {\r\n        categoryEntities[i] = {\r\n          ...categoryEntities[i],\r\n          ...{\r\n            name: i18n.categories[i],\r\n          },\r\n        };\r\n      }\r\n      for (const i of Object.keys(i18n.items).filter((i) => itemData[i])) {\r\n        itemData[i] = {\r\n          ...itemData[i],\r\n          ...{\r\n            name: i18n.items[i],\r\n          },\r\n        };\r\n      }\r\n      for (const i of Object.keys(i18n.recipes).filter(\r\n        (i) => recipeEntities[i]\r\n      )) {\r\n        recipeEntities[i] = {\r\n          ...recipeEntities[i],\r\n          ...{\r\n            name: i18n.recipes[i],\r\n          },\r\n        };\r\n      }\r\n    }\r\n\r\n    // Convert to id arrays\r\n    let categoryIds = Object.keys(categoryEntities);\r\n    const iconIds = Object.keys(iconEntities);\r\n    const itemIds = Object.keys(itemData);\r\n    const recipeIds = Object.keys(recipeEntities);\r\n\r\n    // Generate temporary object arrays\r\n    const items = itemIds.map((i) => itemData[i]);\r\n    const recipes = recipeIds.map((r) => recipeEntities[r]);\r\n\r\n    // Filter for item types\r\n    const beaconIds = items\r\n      .filter((i) => i.beacon != null)\r\n      .sort((a, b) => a.beacon!.modules - b.beacon!.modules)\r\n      .map((i) => i.id);\r\n    const beltIds = items\r\n      .filter((i) => i.belt)\r\n      .sort((a, b) =>\r\n        /** Don't sort belts in DSP, leave based on stacks */\r\n        game === Game.DysonSphereProgram\r\n          ? 0\r\n          : Rational.fromJson(a.belt!.speed)\r\n              .sub(Rational.fromJson(b.belt!.speed))\r\n              .toNumber()\r\n      )\r\n      .map((i) => i.id);\r\n    const pipeIds = items\r\n      .filter((i) => i.pipe)\r\n      .sort((a, b) =>\r\n        Rational.fromJson(a.pipe!.speed)\r\n          .sub(Rational.fromJson(b.pipe!.speed))\r\n          .toNumber()\r\n      )\r\n      .map((i) => i.id);\r\n    const cargoWagonIds = items\r\n      .filter((i) => i.cargoWagon)\r\n      .sort((a, b) => a.cargoWagon!.size - b.cargoWagon!.size)\r\n      .map((i) => i.id);\r\n    const fluidWagonIds = items\r\n      .filter((i) => i.fluidWagon)\r\n      .sort((a, b) => a.fluidWagon!.capacity - b.fluidWagon!.capacity)\r\n      .map((i) => i.id);\r\n    const factoryIds = items.filter((i) => i.factory).map((i) => i.id);\r\n    const modules = items.filter((i) => i.module);\r\n    const moduleIds = modules.map((i) => i.id);\r\n    const beaconModuleIds = modules\r\n      .filter((i) => i.module!.productivity == null)\r\n      .map((i) => i.id);\r\n    const prodModuleIds = modules\r\n      .filter((i) => i.module!.productivity != null)\r\n      .map((i) => i.id);\r\n    const fuelIds = items\r\n      .filter((i) => i.fuel)\r\n      .sort((a, b) => a.fuel!.value - b.fuel!.value)\r\n      .reduce((e: Entities<string[]>, f) => {\r\n        const cat = f.fuel!.category;\r\n        if (!e[cat]) {\r\n          e[cat] = [];\r\n        }\r\n        e[cat].push(f.id);\r\n        return e;\r\n      }, {});\r\n\r\n    // Calculate missing implicit recipe icons\r\n    // For recipes with no icon, use icon of first output product\r\n    recipes\r\n      .filter((r) => !iconEntities[r.id] && !recipeEntities[r.id].icon)\r\n      .forEach((r) => {\r\n        recipeEntities[r.id] = {\r\n          ...recipeEntities[r.id],\r\n          ...{ icon: Object.keys(r.out)[0] },\r\n        };\r\n      });\r\n\r\n    // Calculate category item rows\r\n    const categoryItemRows: Entities<string[][]> = {};\r\n    for (const id of categoryIds) {\r\n      const rows: string[][] = [[]];\r\n      const rowItems = items\r\n        .filter((i) => i.category === id)\r\n        .sort((a, b) => a.row - b.row);\r\n      if (rowItems.length) {\r\n        let index = rowItems[0].row;\r\n        for (const item of rowItems) {\r\n          if (item.row > index) {\r\n            rows.push([]);\r\n            index = item.row;\r\n          }\r\n          rows[rows.length - 1].push(item.id);\r\n        }\r\n        categoryItemRows[id] = rows;\r\n      }\r\n    }\r\n    categoryIds = categoryIds.filter((c) => categoryItemRows[c]);\r\n\r\n    // Convert to rationals\r\n    const beaconEntities: Entities<RationalBeacon> = {};\r\n    const beltEntities: Entities<RationalBelt> = {};\r\n    const cargoWagonEntities: Entities<RationalCargoWagon> = {};\r\n    const fluidWagonEntities: Entities<RationalFluidWagon> = {};\r\n    const factoryEntities: Entities<RationalFactory> = {};\r\n    const moduleEntities: Entities<RationalModule> = {};\r\n    const fuelEntities: Entities<RationalFuel> = {};\r\n    const itemEntities = itemIds.reduce((e: Entities<RationalItem>, i) => {\r\n      const item = new RationalItem(itemData[i]);\r\n      if (item.beacon) {\r\n        beaconEntities[i] = item.beacon;\r\n      }\r\n      if (item.belt) {\r\n        beltEntities[i] = item.belt;\r\n      } else if (item.pipe) {\r\n        beltEntities[i] = item.pipe;\r\n      }\r\n      if (item.cargoWagon) {\r\n        cargoWagonEntities[i] = item.cargoWagon;\r\n      }\r\n      if (item.fluidWagon) {\r\n        fluidWagonEntities[i] = item.fluidWagon;\r\n      }\r\n      if (item.factory) {\r\n        factoryEntities[i] = item.factory;\r\n      }\r\n      if (item.module) {\r\n        moduleEntities[i] = item.module;\r\n      }\r\n      if (item.fuel) {\r\n        fuelEntities[i] = item.fuel;\r\n      }\r\n\r\n      e[i] = item;\r\n      return e;\r\n    }, {});\r\n    const recipeR = recipeIds.reduce((e: Entities<RationalRecipe>, r) => {\r\n      e[r] = new RationalRecipe(recipeEntities[r]);\r\n      return e;\r\n    }, {});\r\n\r\n    // Calculate item simple recipes\r\n    const recipeMatches = recipeIds.reduce(\r\n      (e: Entities<RationalRecipe[]>, r) => {\r\n        const recipe = recipeR[r];\r\n        const outputs = Object.keys(recipe.out);\r\n        for (const o of outputs.filter((i) => recipe.produces(i))) {\r\n          if (!e[o]) {\r\n            e[o] = [recipe];\r\n          } else {\r\n            e[o].push(recipe);\r\n          }\r\n        }\r\n        return e;\r\n      },\r\n      {}\r\n    );\r\n    const itemRecipeId = itemIds.reduce((e: Entities, i) => {\r\n      const matches = recipeMatches.hasOwnProperty(i) ? recipeMatches[i] : [];\r\n      if (matches.length === 1) {\r\n        e[i] = matches[0].id;\r\n      }\r\n      return e;\r\n    }, {});\r\n\r\n    // Calculate allowed modules for recipes\r\n    const recipeModuleIds = recipes.reduce((e: Entities<string[]>, r) => {\r\n      e[r.id] = modules\r\n        .filter(\r\n          (m) =>\r\n            m.module!.limitation == null ||\r\n            limitations[m.module!.limitation][r.id]\r\n        )\r\n        .map((m) => m.id);\r\n      return e;\r\n    }, {});\r\n\r\n    // Calculate complex recipes\r\n    const simpleRecipeIds = Object.keys(itemRecipeId).map(\r\n      (i) => itemRecipeId[i]\r\n    );\r\n    const complexRecipeIds = recipeIds\r\n      .filter(\r\n        (r) =>\r\n          simpleRecipeIds.indexOf(r) === -1 ||\r\n          Object.keys(recipeEntities[r].out).length > 1\r\n      )\r\n      .sort();\r\n\r\n    const dataset: Dataset = {\r\n      game,\r\n      version: mod?.version,\r\n      categoryIds,\r\n      categoryEntities,\r\n      categoryItemRows,\r\n      iconIds,\r\n      iconEntities,\r\n      itemIds,\r\n      itemEntities,\r\n      itemRecipeId,\r\n      beaconIds,\r\n      beaconEntities,\r\n      beltIds,\r\n      pipeIds,\r\n      beltEntities,\r\n      cargoWagonIds,\r\n      cargoWagonEntities,\r\n      fluidWagonIds,\r\n      fluidWagonEntities,\r\n      factoryIds,\r\n      factoryEntities,\r\n      moduleIds,\r\n      beaconModuleIds,\r\n      prodModuleIds,\r\n      moduleEntities,\r\n      fuelIds,\r\n      fuelEntities,\r\n      recipeIds,\r\n      complexRecipeIds,\r\n      recipeEntities,\r\n      recipeR,\r\n      recipeModuleIds,\r\n      hash,\r\n      defaults,\r\n    };\r\n    return dataset;\r\n  }\r\n);\r\n\r\nexport const getOptions = createSelector(\r\n  getDataset,\r\n  (data): Options => ({\r\n    items: getIdOptions(data.itemIds, data.itemEntities),\r\n    beacons: getIdOptions(data.beaconIds, data.itemEntities),\r\n    belts: getIdOptions(data.beltIds, data.itemEntities),\r\n    pipes: getIdOptions(data.pipeIds, data.itemEntities),\r\n    cargoWagons: getIdOptions(data.cargoWagonIds, data.itemEntities),\r\n    fluidWagons: getIdOptions(data.fluidWagonIds, data.itemEntities),\r\n    modules: getIdOptions(data.moduleIds, data.itemEntities, true),\r\n    beaconModules: getIdOptions(data.beaconModuleIds, data.itemEntities, true),\r\n    prodModules: getIdOptions(data.prodModuleIds, data.itemEntities, true),\r\n    chemicalFuels: getIdOptions(\r\n      data.fuelIds[FuelType.Chemical] ?? [],\r\n      data.itemEntities\r\n    ),\r\n    complexRecipes: getIdOptions(data.complexRecipeIds, data.recipeEntities),\r\n  })\r\n);\r\n\r\nexport const getBeltSpeed = createSelector(\r\n  getDataset,\r\n  getRationalFlowRate,\r\n  (data, flowRate) => {\r\n    const value: Entities<Rational> = { [ItemId.Pipe]: flowRate };\r\n    if (data.beltIds) {\r\n      for (const id of data.beltIds) {\r\n        value[id] = data.beltEntities[id].speed;\r\n      }\r\n    }\r\n    if (data.pipeIds) {\r\n      for (const id of data.pipeIds) {\r\n        value[id] = data.beltEntities[id].speed;\r\n      }\r\n    }\r\n    return value;\r\n  }\r\n);\r\n\r\nexport const getBeltSpeedTxt = createSelector(\r\n  getBeltSpeed,\r\n  getDisplayRateInfo,\r\n  (beltSpeed, dispRateInfo) =>\r\n    Object.keys(beltSpeed).reduce((e: Entities<string>, beltId) => {\r\n      const speed = beltSpeed[beltId].mul(dispRateInfo.value);\r\n      const speedTxt = Number(speed.toNumber().toFixed(2));\r\n      const rateTxt = dispRateInfo.label;\r\n      e[beltId] = speedTxt + rateTxt;\r\n      return e;\r\n    }, {})\r\n);\r\n\r\nexport const getAdjustmentData = createSelector(\r\n  getFuelId,\r\n  getProliferatorSprayId,\r\n  getRationalMiningBonus,\r\n  getResearchFactor,\r\n  getRationalCostFactor,\r\n  getRationalCostFactory,\r\n  getDataset,\r\n  (\r\n    fuelId,\r\n    proliferatorSprayId,\r\n    miningBonus,\r\n    researchSpeed,\r\n    costFactor,\r\n    costFactory,\r\n    data\r\n  ) => ({\r\n    fuelId,\r\n    proliferatorSprayId,\r\n    miningBonus,\r\n    researchSpeed,\r\n    costFactor,\r\n    costFactory,\r\n    data,\r\n  })\r\n);\r\n\r\nexport const getSettingsModified = createSelector(settingsState, (state) => ({\r\n  cost:\r\n    state.costFactor !== initialSettingsState.costFactor ||\r\n    state.costFactory !== initialSettingsState.costFactory ||\r\n    state.costInput !== initialSettingsState.costInput ||\r\n    state.costIgnored !== initialSettingsState.costIgnored,\r\n}));\r\n\r\nexport const getInserterData = createSelector(\r\n  getInserterTarget,\r\n  getInserterCapacity,\r\n  (target, capacity) => InserterData[target][capacity]\r\n);\r\n\r\nexport function getEntities<T extends { id: string }>(\r\n  app: T[],\r\n  mod: T[]\r\n): Entities<T> {\r\n  const entities = toEntities(app);\r\n  for (const i of mod) {\r\n    // Used only in development to validate data files\r\n    // istanbul ignore next\r\n    if (environment.debug && mod.filter((m) => m.id === i.id).length > 1) {\r\n      console.warn(`Duplicate id: ${i.id}`);\r\n    }\r\n    entities[i.id] = i;\r\n  }\r\n  return entities;\r\n}\r\n\r\nexport function getArrayEntities(\r\n  app: Entities<string[]>,\r\n  mod: Entities<string[]>\r\n): Entities<Entities<boolean>> {\r\n  let entities = reduceEntities(app);\r\n  entities = reduceEntities(mod, entities);\r\n  return entities;\r\n}\r\n\r\nexport function reduceEntities(\r\n  value: Entities<string[]>,\r\n  init: Entities<Entities<boolean>> = {}\r\n): Entities<Entities<boolean>> {\r\n  return Object.keys(value).reduce((e: Entities<Entities<boolean>>, x) => {\r\n    e[x] = toBoolEntities(value[x], init[x]);\r\n    return e;\r\n  }, init);\r\n}\r\n\r\nexport function getIdOptions(\r\n  ids: string[],\r\n  entities: Record<string, { name: string }>,\r\n  emptyModule = false\r\n): SelectItem[] {\r\n  const list = ids.map(\r\n    (i): SelectItem => ({ label: entities[i].name, value: i })\r\n  );\r\n  if (emptyModule) {\r\n    list.unshift({ label: 'None', value: ItemId.Module });\r\n  }\r\n\r\n  return list;\r\n}\r\n","import { Action, ActionReducer } from '@ngrx/store';\r\n\r\nimport { BrowserUtility } from '~/utilities';\r\nimport { LabState } from './';\r\n\r\nexport function storageMetaReducer(\r\n  reducer: ActionReducer<LabState, Action>\r\n): (state: LabState | undefined, action: Action) => LabState {\r\n  let onInit = true;\r\n  return function (state: LabState | undefined, action: Action): LabState {\r\n    const nextState = reducer(state, action);\r\n\r\n    if (onInit) {\r\n      onInit = false;\r\n      return BrowserUtility.mergeState(nextState);\r\n    }\r\n\r\n    BrowserUtility.saveState(nextState);\r\n\r\n    return nextState;\r\n  };\r\n}\r\n","import { STATE_KEY } from '~/models';\r\nimport { LabState } from '~/store';\r\n\r\nexport class BrowserUtility {\r\n  private static _storedState = BrowserUtility.loadState();\r\n  static get storedState(): Partial<LabState> | null {\r\n    return this._storedState;\r\n  }\r\n\r\n  static get search(): string {\r\n    return location.search.substring(1);\r\n  }\r\n\r\n  static get hash(): string {\r\n    return location.hash.substring(1);\r\n  }\r\n\r\n  static get href(): string {\r\n    return location.href;\r\n  }\r\n\r\n  static get zip(): string {\r\n    const hash = this.hash;\r\n    return this.search || (hash.length > 1 && hash[1] === '=' && hash) || '';\r\n  }\r\n\r\n  static loadState(): Partial<LabState> | null {\r\n    try {\r\n      const stored = localStorage.getItem(STATE_KEY);\r\n      if (stored) {\r\n        return JSON.parse(stored) as Partial<LabState>;\r\n      }\r\n    } catch (e) {\r\n      console.error('Failed to load state from local storage');\r\n      console.error(e);\r\n\r\n      // Delete local storage to repair\r\n      localStorage.removeItem(STATE_KEY);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  static mergeState(initial: LabState): LabState {\r\n    const state = BrowserUtility.storedState;\r\n    if (state) {\r\n      if (this.zip) {\r\n        return {\r\n          ...initial,\r\n          ...{\r\n            preferencesState: {\r\n              ...initial.preferencesState,\r\n              ...state.preferencesState,\r\n            },\r\n          },\r\n        };\r\n      } else {\r\n        const merge = { ...initial };\r\n        for (const key of Object.keys(merge) as (keyof LabState)[]) {\r\n          merge[key] = {\r\n            ...merge[key],\r\n            ...(state[key] as any),\r\n          };\r\n        }\r\n        return merge;\r\n      }\r\n    } else {\r\n      return initial;\r\n    }\r\n  }\r\n\r\n  static saveState(state: LabState): void {\r\n    const newState = { ...state } as Partial<LabState>;\r\n    delete newState.datasetsState;\r\n    localStorage.setItem(STATE_KEY, JSON.stringify(newState));\r\n  }\r\n}\r\n","import { saveAs } from 'file-saver';\r\n\r\nimport {\r\n  Column,\r\n  Dataset,\r\n  Entities,\r\n  ItemSettings,\r\n  Rational,\r\n  RecipeSettings,\r\n  Step,\r\n} from '~/models';\r\nimport { ColumnsState } from '~/store/preferences';\r\nimport { BrowserUtility } from './browser.utility';\r\nimport { RecipeUtility } from './recipe.utility';\r\n\r\nconst CSV_TYPE = 'text/csv;charset=UTF-8';\r\nconst CSV_EXTENSION = '.csv';\r\nconst JSON_TYPE = 'text/json;charset=UTF-8';\r\nconst JSON_EXTENSION = '.json';\r\n\r\nexport interface StepExport {\r\n  Item?: string;\r\n  Items?: string;\r\n  Surplus?: string;\r\n  Inputs?: string;\r\n  Outputs?: string;\r\n  Targets?: string;\r\n  Belts?: string;\r\n  Belt?: string;\r\n  Wagons?: string;\r\n  Wagon?: string;\r\n  Recipe?: string;\r\n  Factories?: string;\r\n  Factory?: string;\r\n  FactoryModules?: string;\r\n  Beacons?: string;\r\n  Beacon?: string;\r\n  BeaconModules?: string;\r\n  Power?: string;\r\n  Pollution?: string;\r\n}\r\n\r\nexport class ExportUtility {\r\n  static stepsToCsv(\r\n    steps: Step[],\r\n    columns: ColumnsState,\r\n    itemSettings: Entities<ItemSettings>,\r\n    recipeSettings: Entities<RecipeSettings>,\r\n    data: Dataset\r\n  ): void {\r\n    const json = steps.map((s) =>\r\n      this.stepToJson(s, steps, columns, itemSettings, recipeSettings, data)\r\n    );\r\n    const fields = Object.keys(json[0]) as (keyof StepExport)[];\r\n    const csv = json.map((row) => fields.map((f) => row[f]).join(','));\r\n    csv.unshift(fields.join(','));\r\n    csv.unshift(`\"${BrowserUtility.href}\"`);\r\n    this.saveAsCsv(csv.join('\\r\\n'));\r\n  }\r\n\r\n  /* Don't test dependencies (file-saver) */\r\n  /* istanbul ignore next */\r\n  static saveAsCsv(data: string): void {\r\n    saveAs(\r\n      new Blob([data], { type: CSV_TYPE }),\r\n      'factoriolab_list' + CSV_EXTENSION\r\n    );\r\n  }\r\n\r\n  /* Don't test dependencies (file-saver) */\r\n  /* istanbul ignore next */\r\n  static saveAsJson(data: string): void {\r\n    saveAs(\r\n      new Blob([data], { type: JSON_TYPE }),\r\n      'factoriolab_flow' + JSON_EXTENSION\r\n    );\r\n  }\r\n\r\n  static stepToJson(\r\n    step: Step,\r\n    steps: Step[],\r\n    columns: ColumnsState,\r\n    itemSettings: Entities<ItemSettings>,\r\n    recipeSettings: Entities<RecipeSettings>,\r\n    data: Dataset\r\n  ): StepExport {\r\n    const exp: StepExport = {};\r\n    if (step.itemId != null) {\r\n      exp.Item = step.itemId;\r\n      const settings = itemSettings[step.itemId];\r\n      if (step.items != null) {\r\n        exp.Items =\r\n          '=' + step.items.sub(step.surplus ?? Rational.zero).toString();\r\n      }\r\n      if (step.surplus != null) {\r\n        exp.Surplus = '=' + step.surplus.toString();\r\n      }\r\n      if (columns[Column.Belts].show) {\r\n        if (step.belts != null) {\r\n          exp.Belts = '=' + step.belts.toString();\r\n        }\r\n        exp.Belt = settings.beltId;\r\n      }\r\n      if (columns[Column.Wagons].show) {\r\n        if (step.wagons != null) {\r\n          exp.Wagons = '=' + step.wagons.toString();\r\n        }\r\n        exp.Wagon = settings.wagonId;\r\n      }\r\n    }\r\n    if (step.recipeId != null) {\r\n      const recipeId = step.recipeId; // Store non-null\r\n      exp.Recipe = step.recipeId;\r\n      const recipe = data.recipeR[step.recipeId];\r\n      const settings = recipeSettings[step.recipeId];\r\n      const inputs = Object.keys(recipe.in)\r\n        .map((i) => {\r\n          const inStep = steps.find((s) => s.itemId === i);\r\n          return [i, inStep?.parents?.[recipeId]?.toString()];\r\n        })\r\n        .filter((v) => v[1])\r\n        .map((v) => `${v[0]}:${v[1]}`)\r\n        .join(',');\r\n      if (inputs) {\r\n        exp.Inputs = `\"${inputs}\"`;\r\n      }\r\n      if (settings.factoryId != null) {\r\n        const factory = data.factoryEntities[settings.factoryId];\r\n        const allowsModules = RecipeUtility.allowsModules(recipe, factory);\r\n        if (columns[Column.Factories].show) {\r\n          if (step.factories != null) {\r\n            exp.Factories = '=' + step.factories.toString();\r\n          }\r\n          exp.Factory = settings.factoryId;\r\n          if (allowsModules && settings.factoryModuleIds != null) {\r\n            exp.FactoryModules = `\"${settings.factoryModuleIds.join(',')}\"`;\r\n          }\r\n        }\r\n        if (columns[Column.Beacons].show && allowsModules) {\r\n          exp.Beacons = settings.beaconCount;\r\n          exp.Beacon = settings.beaconId;\r\n          if (settings.beaconModuleIds != null) {\r\n            exp.BeaconModules = `\"${settings.beaconModuleIds.join(',')}\"`;\r\n          }\r\n        }\r\n        if (columns[Column.Power].show) {\r\n          if (step.power != null) {\r\n            exp.Power = '=' + step.power.toString();\r\n          }\r\n        }\r\n        if (columns[Column.Pollution].show) {\r\n          if (step.pollution != null) {\r\n            exp.Pollution = '=' + step.pollution.toString();\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (step.outputs != null) {\r\n      const outputs = step.outputs; // Store as non-null\r\n      const outputsStr = Object.keys(outputs)\r\n        .map((o) => `${o}:${outputs[o].toString()}`)\r\n        .join(',');\r\n      exp.Outputs = `\"${outputsStr}\"`;\r\n    }\r\n    if (step.parents != null) {\r\n      const parents = step.parents; // Store as non-null\r\n      const parentsStr = Object.keys(parents)\r\n        .map((p) => `${p}:${parents[p].toString()}`)\r\n        .join(',');\r\n      exp.Targets = `\"${parentsStr}\"`;\r\n    }\r\n    return exp;\r\n  }\r\n}\r\n","export * from './browser.utility';\r\nexport * from './export.utility';\r\nexport * from './rate.utility';\r\nexport * from './recipe.utility';\r\nexport * from './simplex.utility';\r\nexport * from './store.utility';\r\n","import {\r\n  Dataset,\r\n  DisplayRateInfo,\r\n  Entities,\r\n  ItemSettings,\r\n  Rational,\r\n  RationalRecipe,\r\n  RationalRecipeSettings,\r\n  RecipeSettings,\r\n  Step,\r\n} from '~/models';\r\nimport { ItemsState } from '~/store/items';\r\n\r\nconst ROOT_ID = '';\r\n\r\nexport class RateUtility {\r\n  static addStepsFor(\r\n    itemId: string,\r\n    rate: Rational,\r\n    steps: Step[],\r\n    itemSettings: ItemsState,\r\n    data: Dataset,\r\n    parentId?: string\r\n  ): void {\r\n    let recipe: RationalRecipe | null | undefined;\r\n\r\n    if (!itemSettings[itemId].ignore) {\r\n      recipe = data.recipeR[data.itemRecipeId[itemId]];\r\n\r\n      if (\r\n        recipe &&\r\n        (Object.keys(recipe.out).length > 1 || !recipe.produces(itemId))\r\n      ) {\r\n        // Ignore dedicated recipe if it has multiple outputs\r\n        // or does not produce a net-output of the item\r\n        recipe = null;\r\n      }\r\n    }\r\n\r\n    // Find existing step for this item\r\n    let step = steps.find((s) => s.itemId === itemId);\r\n\r\n    if (step != null) {\r\n      steps.push(steps.splice(steps.indexOf(step), 1)[0]);\r\n    } else {\r\n      // No existing step found, create a new one\r\n      step = {\r\n        id: steps.length.toString(),\r\n        itemId,\r\n        items: Rational.zero,\r\n      };\r\n\r\n      if (recipe) {\r\n        step.recipeId = recipe.id;\r\n      }\r\n\r\n      steps.push(step);\r\n    }\r\n\r\n    // Adjust for consumption instead of production if desired\r\n    if (recipe?.adjustProd) {\r\n      rate = rate.mul(recipe.productivity);\r\n    }\r\n\r\n    // Add items to the step\r\n    step.items = (step.items ?? Rational.zero).add(rate);\r\n\r\n    if (parentId != null) {\r\n      this.addParentValue(step, parentId, rate);\r\n    } else {\r\n      step.output = step.items;\r\n    }\r\n\r\n    if (recipe) {\r\n      // Calculate number of outputs from recipe\r\n      const out = recipe.out[itemId].sub(recipe.in[itemId] ?? Rational.zero);\r\n\r\n      // Calculate factories\r\n      step.factories = step.items.mul(recipe.time).div(out);\r\n\r\n      this.adjustPowerPollution(step, recipe);\r\n\r\n      // Recurse adding steps for ingredients\r\n      if (step.items.nonzero()) {\r\n        for (const ingredient of Object.keys(recipe.in)) {\r\n          const ingredientRate = rate.mul(recipe.in[ingredient]).div(out);\r\n          if (ingredient === itemId) {\r\n            this.addParentValue(step, recipe.id, ingredientRate);\r\n          } else {\r\n            RateUtility.addStepsFor(\r\n              ingredient,\r\n              ingredientRate,\r\n              steps,\r\n              itemSettings,\r\n              data,\r\n              recipe.id\r\n            );\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  static addParentValue(step: Step, parentId: string, rate: Rational): void {\r\n    if (!step.parents) {\r\n      step.parents = {};\r\n    }\r\n    if (step.parents[parentId]) {\r\n      step.parents[parentId] = step.parents[parentId].add(rate);\r\n    } else {\r\n      step.parents[parentId] = rate;\r\n    }\r\n  }\r\n\r\n  static adjustPowerPollution(step: Step, recipe: RationalRecipe): void {\r\n    if (step.factories?.nonzero() && !recipe.part) {\r\n      if (recipe.drain?.nonzero() || recipe.consumption?.nonzero()) {\r\n        // Reset power\r\n        step.power = Rational.zero;\r\n\r\n        // Calculate drain\r\n        if (recipe.drain?.nonzero()) {\r\n          step.power = step.power.add(step.factories.ceil().mul(recipe.drain));\r\n        }\r\n        // Calculate consumption\r\n        if (recipe.consumption?.nonzero()) {\r\n          step.power = step.power.add(step.factories.mul(recipe.consumption));\r\n        }\r\n      }\r\n\r\n      // Calculate pollution\r\n      if (recipe.pollution?.nonzero()) {\r\n        step.pollution = step.factories.mul(recipe.pollution);\r\n      }\r\n    }\r\n  }\r\n\r\n  static calculateBelts(\r\n    steps: Step[],\r\n    itemSettings: Entities<ItemSettings>,\r\n    recipeSettings: Entities<RecipeSettings>,\r\n    beltSpeed: Entities<Rational>,\r\n    data: Dataset\r\n  ): Step[] {\r\n    for (const step of steps) {\r\n      let noItems = false;\r\n      if (step.recipeId != null) {\r\n        const factoryId = recipeSettings[step.recipeId].factoryId;\r\n        if (factoryId != null) {\r\n          const factory = data.factoryEntities[factoryId];\r\n          const recipe = data.recipeEntities[step.recipeId];\r\n          // No belts/wagons on research rows or rocket part rows\r\n          noItems = !!(factory.research || (factory.silo && !recipe.part));\r\n        }\r\n      }\r\n      if (noItems) {\r\n        delete step.belts;\r\n        delete step.wagons;\r\n      } else if (step.itemId != null) {\r\n        const belt = itemSettings[step.itemId].beltId;\r\n        if (step.items != null && belt != null) {\r\n          step.belts = step.items.div(beltSpeed[belt]);\r\n        }\r\n        const wagon = itemSettings[step.itemId].wagonId;\r\n        if (step.items != null && wagon != null) {\r\n          const item = data.itemEntities[step.itemId];\r\n          if (item.stack) {\r\n            step.wagons = step.items.div(\r\n              data.cargoWagonEntities[wagon].size.mul(item.stack)\r\n            );\r\n          } else {\r\n            step.wagons = step.items.div(\r\n              data.fluidWagonEntities[wagon].capacity\r\n            );\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return steps;\r\n  }\r\n\r\n  static calculateOutputs(steps: Step[], data: Dataset): Step[] {\r\n    for (const step of steps) {\r\n      if (step.recipeId && step.factories?.nonzero()) {\r\n        const recipe = data.recipeR[step.recipeId];\r\n        const outputs: Entities<Rational> = {};\r\n        for (const id of Object.keys(recipe.out)) {\r\n          if (recipe.out[id].nonzero()) {\r\n            const val = recipe.out[id].mul(step.factories).div(recipe.time);\r\n            const outStep = steps.find((s) => s.itemId === id);\r\n            if (outStep?.items?.nonzero()) {\r\n              outputs[id] = val.div(outStep.items);\r\n            }\r\n          }\r\n        }\r\n        if (Object.keys(outputs).length > 0) {\r\n          step.outputs = outputs;\r\n        }\r\n      }\r\n    }\r\n    return steps;\r\n  }\r\n\r\n  static calculateBeacons(\r\n    steps: Step[],\r\n    beaconReceivers: Rational | null,\r\n    recipeSettings: Entities<RationalRecipeSettings>,\r\n    data: Dataset\r\n  ): Step[] {\r\n    if (beaconReceivers && beaconReceivers.nonzero()) {\r\n      for (const step of steps) {\r\n        if (\r\n          step.recipeId &&\r\n          step.factories?.nonzero() &&\r\n          !data.recipeEntities[step.recipeId].part &&\r\n          recipeSettings[step.recipeId].beaconCount?.nonzero()\r\n        ) {\r\n          const settings = recipeSettings[step.recipeId];\r\n          if (settings.beaconId != null) {\r\n            if (settings.beaconTotal != null) {\r\n              step.beacons = settings.beaconTotal;\r\n            } else if (settings.beaconCount != null) {\r\n              step.beacons = step.factories\r\n                .ceil()\r\n                .mul(settings.beaconCount)\r\n                .div(beaconReceivers);\r\n              if (step.beacons.lt(settings.beaconCount)) {\r\n                // Can't be less than beacon count\r\n                step.beacons = settings.beaconCount;\r\n              }\r\n            }\r\n\r\n            const beacon = data.beaconEntities[settings.beaconId];\r\n            if (beacon.usage?.nonzero() && step.beacons != null) {\r\n              step.power = (step.power ?? Rational.zero).add(\r\n                step.beacons.mul(beacon.usage)\r\n              );\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return steps;\r\n  }\r\n\r\n  static displayRate(steps: Step[], dispRateInfo: DisplayRateInfo): Step[] {\r\n    for (const step of steps) {\r\n      if (step.items) {\r\n        if (step.parents) {\r\n          for (const key of Object.keys(step.parents)) {\r\n            step.parents[key] = step.parents[key].div(step.items);\r\n          }\r\n        }\r\n        step.items = step.items.mul(dispRateInfo.value);\r\n      }\r\n      if (step.surplus) {\r\n        step.surplus = step.surplus.mul(dispRateInfo.value);\r\n      }\r\n      if (step.wagons) {\r\n        step.wagons = step.wagons.mul(dispRateInfo.value);\r\n      }\r\n      if (step.pollution) {\r\n        step.pollution = step.pollution.mul(dispRateInfo.value);\r\n      }\r\n      if (step.output) {\r\n        step.output = step.output.mul(dispRateInfo.value);\r\n      }\r\n    }\r\n    return steps;\r\n  }\r\n\r\n  static sortHierarchy(steps: Step[]): Step[] {\r\n    // Determine parents\r\n    const parents: Record<string, string> = {};\r\n    for (const step of steps) {\r\n      if (step.parents && Object.keys(step.parents).length === 1) {\r\n        const recipeId = Object.keys(step.parents)[0];\r\n        const parent = steps.find((s) => s.recipeId === recipeId);\r\n        if (parent) {\r\n          if (step.id === parent.id) {\r\n            parents[step.id] = ROOT_ID;\r\n          } else {\r\n            parents[step.id] = parent.id;\r\n          }\r\n        }\r\n      } else {\r\n        parents[step.id] = ROOT_ID;\r\n      }\r\n    }\r\n\r\n    // Set up hierarchy groups\r\n    const groups: Entities<Step[]> = {};\r\n    for (let i = 0; i < steps.length; i++) {\r\n      const s = steps[i];\r\n      const p = parents[s.id];\r\n      if (!groups[p]) {\r\n        groups[p] = [];\r\n      }\r\n      groups[p].push(s);\r\n    }\r\n\r\n    // Perform recursive sort\r\n    const sorted = this.sortRecursive(groups, ROOT_ID, []);\r\n\r\n    // Add back any steps left out (potentially circular loops)\r\n    sorted.push(...steps.filter((s) => sorted.indexOf(s) === -1));\r\n\r\n    return sorted;\r\n  }\r\n\r\n  static sortRecursive(\r\n    groups: Entities<Step[]>,\r\n    id: string,\r\n    result: Step[]\r\n  ): Step[] {\r\n    if (!groups[id]) {\r\n      return [];\r\n    }\r\n    const group = groups[id];\r\n    for (let i = 0; i < group.length; i++) {\r\n      const s = group[i];\r\n      result.push(s);\r\n      this.sortRecursive(groups, s.id, result);\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  static copy(steps: Step[]): Step[] {\r\n    return steps.map((s) =>\r\n      s.parents ? { ...s, ...{ parents: { ...s.parents } } } : { ...s }\r\n    );\r\n  }\r\n}\r\n","import {\r\n  Dataset,\r\n  EnergyType,\r\n  Entities,\r\n  FuelType,\r\n  ItemId,\r\n  ItemSettings,\r\n  Product,\r\n  RateType,\r\n  Rational,\r\n  RationalBelt,\r\n  RationalFactory,\r\n  RationalProduct,\r\n  RationalRecipe,\r\n  RationalRecipeSettings,\r\n  Recipe,\r\n} from '~/models';\r\n\r\nexport class RecipeUtility {\r\n  static MIN_FACTOR = new Rational(BigInt(1), BigInt(5));\r\n  static POLLUTION_FACTOR = new Rational(BigInt(60));\r\n\r\n  /** Determines what option to use based on preferred rank */\r\n  static bestMatch(options: string[], rank: string[]): string {\r\n    if (options.length > 1) {\r\n      for (const r of rank) {\r\n        if (options.indexOf(r) !== -1) {\r\n          // Return first matching option in rank list\r\n          return r;\r\n        }\r\n      }\r\n    }\r\n    return options[0];\r\n  }\r\n\r\n  /** Determines default array of modules for a given recipe */\r\n  static defaultModules(\r\n    allowedModuleIds: string[],\r\n    moduleRankIds: string[],\r\n    count: number\r\n  ): string[] {\r\n    const module = this.bestMatch(\r\n      [ItemId.Module, ...allowedModuleIds],\r\n      moduleRankIds\r\n    );\r\n    return new Array(count).fill(module);\r\n  }\r\n\r\n  static adjustRecipe(\r\n    recipeId: string,\r\n    fuelId: string | undefined,\r\n    proliferatorSprayId: string,\r\n    miningBonus: Rational,\r\n    researchFactor: Rational,\r\n    settings: RationalRecipeSettings,\r\n    itemSettings: Entities<ItemSettings>,\r\n    data: Dataset\r\n  ): RationalRecipe {\r\n    const recipe = new RationalRecipe(data.recipeEntities[recipeId]);\r\n    if (settings.factoryId != null) {\r\n      const factory = data.factoryEntities[settings.factoryId];\r\n\r\n      if (factory.speed != null) {\r\n        // Adjust for factory speed\r\n        recipe.time = recipe.time.div(factory.speed);\r\n      } else {\r\n        // Calculate based on belt speed\r\n        // Use minimum speed of all inputs/outputs in recipe\r\n        const ids = [\r\n          ...Object.keys(recipe.in).filter((i) => recipe.in[i].nonzero()),\r\n          ...Object.keys(recipe.out).filter((i) => recipe.out[i].nonzero()),\r\n        ];\r\n        const belts = ids\r\n          .map((i) => itemSettings[i].beltId)\r\n          .filter((b): b is string => b != null)\r\n          .map((beltId) => data.beltEntities[beltId]);\r\n        let minSpeed = Rational.zero;\r\n        for (const b of belts.filter((b): b is RationalBelt => b != null)) {\r\n          if (minSpeed.lt(b.speed)) {\r\n            minSpeed = b.speed;\r\n          }\r\n        }\r\n        recipe.time = recipe.time.div(minSpeed);\r\n      }\r\n\r\n      if (factory.research) {\r\n        // Adjust for research factor\r\n        recipe.time = recipe.time.div(researchFactor);\r\n      }\r\n\r\n      // Calculate factors\r\n      let speed = Rational.one;\r\n      let prod = Rational.one;\r\n      let consumption = Rational.one;\r\n      let pollution = Rational.one;\r\n\r\n      if (factory.mining) {\r\n        // Adjust for mining bonus\r\n        prod = prod.add(miningBonus);\r\n      }\r\n\r\n      const proliferatorSprays: Entities<Rational> = {};\r\n\r\n      // Modules\r\n      if (settings.factoryModuleIds && settings.factoryModuleIds.length) {\r\n        for (const id of settings.factoryModuleIds) {\r\n          const module = data.moduleEntities[id];\r\n          if (module) {\r\n            if (module.speed) {\r\n              speed = speed.add(module.speed);\r\n            }\r\n            if (module.productivity) {\r\n              prod = prod.add(module.productivity);\r\n            }\r\n            if (module.consumption) {\r\n              consumption = consumption.add(module.consumption);\r\n            }\r\n            if (module.pollution) {\r\n              pollution = pollution.add(module.pollution);\r\n            }\r\n            if (module.sprays) {\r\n              let sprays = module.sprays;\r\n              // If proliferator is applied to proliferator, apply productivity bonus to sprays\r\n              const pModule = data.moduleEntities[proliferatorSprayId];\r\n              if (pModule) {\r\n                sprays = sprays\r\n                  .mul(Rational.one.add(pModule.productivity ?? Rational.zero))\r\n                  .floor(); // DSP rounds down # of sprays\r\n              }\r\n              // Calculate amount of proliferator required for this recipe\r\n              const pId = module.proliferator;\r\n              if (pId) {\r\n                if (!proliferatorSprays[pId]) {\r\n                  proliferatorSprays[pId] = Rational.zero;\r\n                }\r\n                proliferatorSprays[pId] = proliferatorSprays[pId].add(sprays);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      // Beacons\r\n      const beaconModules = settings.beaconModuleIds?.filter(\r\n        (m) => m !== ItemId.Module && data.moduleEntities[m]\r\n      );\r\n      if (\r\n        beaconModules?.length &&\r\n        settings.beaconId &&\r\n        settings.beaconCount?.nonzero()\r\n      ) {\r\n        for (const id of beaconModules) {\r\n          const module = data.moduleEntities[id];\r\n          const beacon = data.beaconEntities[settings.beaconId];\r\n          const factor = settings.beaconCount.mul(beacon.effectivity);\r\n          if (module.speed) {\r\n            speed = speed.add(module.speed.mul(factor));\r\n          }\r\n          if (module.productivity) {\r\n            prod = prod.add(module.productivity.mul(factor));\r\n          }\r\n          if (module.consumption) {\r\n            consumption = consumption.add(module.consumption.mul(factor));\r\n          }\r\n          if (module.pollution) {\r\n            pollution = pollution.add(module.pollution.mul(factor));\r\n          }\r\n        }\r\n      }\r\n\r\n      // Check for speed, consumption, or pollution below minimum value (20%)\r\n      if (speed.lt(this.MIN_FACTOR)) {\r\n        speed = this.MIN_FACTOR;\r\n      }\r\n      if (consumption.lt(this.MIN_FACTOR)) {\r\n        consumption = this.MIN_FACTOR;\r\n      }\r\n      if (pollution.lt(this.MIN_FACTOR)) {\r\n        pollution = this.MIN_FACTOR;\r\n      }\r\n\r\n      // Overclock effects\r\n      let oc: Rational | undefined;\r\n      if (settings.overclock && !settings.overclock.eq(Rational.hundred)) {\r\n        if (factory.overclockFactor) {\r\n          const ratio = Rational.hundred.div(settings.overclock);\r\n          const factor = Math.pow(\r\n            ratio.toNumber(),\r\n            1 / factory.overclockFactor\r\n          );\r\n          oc = Rational.fromNumber(factor).reciprocal();\r\n        } else {\r\n          oc = settings.overclock.div(Rational.hundred);\r\n        }\r\n        speed = speed.mul(oc);\r\n      }\r\n\r\n      // Calculate module/beacon effects\r\n      // Speed\r\n      recipe.time = recipe.time.div(speed);\r\n\r\n      // Productivity\r\n      for (const outId of Object.keys(recipe.out)) {\r\n        if (recipe.catalyst?.[outId]) {\r\n          // Catalyst - only multiply prod by extra produced\r\n          const catalyst = recipe.catalyst[outId];\r\n          const affected = recipe.out[outId].sub(catalyst);\r\n          // Only change output if affected amount > 0\r\n          if (affected.gt(Rational.zero)) {\r\n            recipe.out[outId] = catalyst.add(affected.mul(prod));\r\n          }\r\n        } else {\r\n          recipe.out[outId] = recipe.out[outId].mul(prod);\r\n        }\r\n      }\r\n\r\n      recipe.productivity = prod;\r\n      // Log to adjust prod for research products\r\n      if (factory.research) {\r\n        recipe.adjustProd = true;\r\n      }\r\n\r\n      // Power\r\n      recipe.drain = factory.drain;\r\n      let usage =\r\n        (recipe.usage ? recipe.usage : factory.usage) || Rational.zero;\r\n      if (oc) {\r\n        const factor = Math.pow(oc.toNumber(), 1.6);\r\n        usage = usage.mul(Rational.fromNumber(factor));\r\n      }\r\n      recipe.consumption =\r\n        factory.type === EnergyType.Electric\r\n          ? usage.mul(consumption)\r\n          : Rational.zero;\r\n\r\n      // Pollution\r\n      recipe.pollution =\r\n        factory.pollution && settings.factoryId !== ItemId.Pumpjack\r\n          ? factory.pollution\r\n              .div(this.POLLUTION_FACTOR)\r\n              .mul(pollution)\r\n              .mul(consumption)\r\n          : Rational.zero;\r\n\r\n      // Add factory consumption\r\n      if (factory.consumption) {\r\n        const consumption = factory.consumption;\r\n        for (const id of Object.keys(consumption)) {\r\n          const amount = recipe.time.div(Rational.sixty).mul(consumption[id]);\r\n          recipe.in[id] = (recipe.in[id] || Rational.zero).add(amount);\r\n        }\r\n      }\r\n\r\n      // Calculate burner fuel inputs\r\n      if (factory.type === EnergyType.Burner && usage.nonzero()) {\r\n        let rFuelId = fuelId;\r\n        if (\r\n          factory.category != null &&\r\n          factory.category !== FuelType.Chemical\r\n        ) {\r\n          // Try to find matching input for burning recipes\r\n          const ins = Object.keys(recipe.in);\r\n          const fuels = data.fuelIds[factory.category];\r\n          rFuelId = ins.find((i) => fuels.indexOf(i) !== -1) || fuels[0];\r\n        }\r\n        if (rFuelId) {\r\n          const fuel = data.fuelEntities[rFuelId];\r\n\r\n          if (fuel) {\r\n            const fuelIn = recipe.time\r\n              .mul(usage)\r\n              .div(fuel.value)\r\n              .div(Rational.thousand);\r\n\r\n            recipe.in[rFuelId] = (recipe.in[rFuelId] || Rational.zero).add(\r\n              fuelIn\r\n            );\r\n\r\n            if (fuel.result) {\r\n              recipe.out[fuel.result] = (\r\n                recipe.out[fuel.result] || Rational.zero\r\n              ).add(fuelIn);\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      // Calculate proliferator usage\r\n      if (Object.keys(proliferatorSprays).length > 0) {\r\n        const proliferatorUses: Entities<Rational> = {};\r\n\r\n        for (const pId of Object.keys(proliferatorSprays)) {\r\n          proliferatorUses[pId] = Rational.zero;\r\n\r\n          for (const id of Object.keys(recipe.in)) {\r\n            const sprays = proliferatorSprays[pId];\r\n            const amount = recipe.in[id].div(sprays);\r\n            proliferatorUses[pId] = proliferatorUses[pId].add(amount);\r\n          }\r\n        }\r\n\r\n        // If proliferator spray is applied to proliferator, add its usage to inputs\r\n        const pModule = data.moduleEntities[proliferatorSprayId];\r\n        if (pModule && pModule.sprays) {\r\n          const sprays = pModule.sprays\r\n            .mul(Rational.one.add(pModule.productivity ?? Rational.zero))\r\n            .floor() // DSP rounds down # of sprays\r\n            .sub(Rational.one); // Subtract one spray of self\r\n          let usage = Rational.zero;\r\n          for (const id of Object.keys(proliferatorUses)) {\r\n            const amount = proliferatorUses[id].div(sprays);\r\n            usage = usage.add(amount);\r\n          }\r\n          const pId = pModule.proliferator;\r\n          if (pId) {\r\n            if (!proliferatorUses[pId]) {\r\n              proliferatorUses[pId] = Rational.zero;\r\n            }\r\n            proliferatorUses[pId] = proliferatorUses[pId].add(usage);\r\n          }\r\n        }\r\n\r\n        // Add proliferator consumption to recipe inputs\r\n        // Assume recipe already has listed inputs, otherwise it could not be proliferated\r\n        for (const pId of Object.keys(proliferatorUses)) {\r\n          if (!recipe.in[pId]) {\r\n            recipe.in[pId] = proliferatorUses[pId];\r\n          } else {\r\n            recipe.in[pId] = recipe.in[pId].add(proliferatorUses[pId]);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return recipe;\r\n  }\r\n\r\n  /** Adjust rocket launch and rocket part recipes */\r\n  static adjustSiloRecipes(\r\n    recipeR: Entities<RationalRecipe>,\r\n    settings: Entities<RationalRecipeSettings>,\r\n    data: Dataset\r\n  ): Entities<RationalRecipe> {\r\n    for (const partId of Object.keys(recipeR)) {\r\n      const partFactoryId = settings[partId].factoryId;\r\n      if (partFactoryId) {\r\n        const rocketFactory = data.factoryEntities[partFactoryId];\r\n        const rocketRecipe = recipeR[partId];\r\n        if (rocketFactory?.silo && !rocketRecipe.part) {\r\n          const itemId = Object.keys(rocketRecipe.out)[0];\r\n          const factor = rocketFactory.silo.parts.div(rocketRecipe.out[itemId]);\r\n          for (const launchId of Object.keys(recipeR).filter(\r\n            (i) => recipeR[i].part === partId\r\n          )) {\r\n            if (partFactoryId === settings[launchId].factoryId) {\r\n              recipeR[launchId].time = rocketRecipe.time\r\n                .mul(factor)\r\n                .add(rocketFactory.silo.launch);\r\n            }\r\n          }\r\n          rocketRecipe.time = rocketRecipe.time\r\n            .mul(factor)\r\n            .add(rocketFactory.silo.launch)\r\n            .div(factor);\r\n        }\r\n      }\r\n    }\r\n\r\n    return recipeR;\r\n  }\r\n\r\n  static getProductStepData(\r\n    productSteps: Entities<[string, Rational][]>,\r\n    product: Product | RationalProduct\r\n  ): [string, Rational] | null {\r\n    const steps = productSteps[product.id];\r\n    if (steps.length === 0) {\r\n      return null;\r\n    } else if (product.viaId) {\r\n      return steps.find((r) => r[0] === product.viaId) ?? null;\r\n    } else {\r\n      return steps[0];\r\n    }\r\n  }\r\n\r\n  static allowsModules(\r\n    recipe: Recipe | RationalRecipe,\r\n    factory: RationalFactory\r\n  ): boolean {\r\n    return (\r\n      (!factory.silo || !recipe.part) &&\r\n      factory.modules != null &&\r\n      factory.modules > 0\r\n    );\r\n  }\r\n\r\n  static adjustDataset(\r\n    recipeSettings: Entities<RationalRecipeSettings>,\r\n    itemSettings: Entities<ItemSettings>,\r\n    disabledRecipeIds: string[],\r\n    fuelId: string | undefined,\r\n    proliferatorSprayId: string,\r\n    miningBonus: Rational,\r\n    researchSpeed: Rational,\r\n    costFactor: Rational,\r\n    costFactory: Rational,\r\n    data: Dataset\r\n  ): Dataset {\r\n    const recipeR = this.adjustRecipes(\r\n      recipeSettings,\r\n      itemSettings,\r\n      fuelId,\r\n      proliferatorSprayId,\r\n      miningBonus,\r\n      researchSpeed,\r\n      data\r\n    );\r\n    this.adjustCost(recipeR, recipeSettings, costFactor, costFactory);\r\n    const itemRecipeId = { ...data.itemRecipeId };\r\n\r\n    // Check for calculated default recipe ids\r\n    for (const id of data.itemIds.filter((i) => !data.itemRecipeId[i])) {\r\n      const rec = itemSettings[id].recipeId;\r\n      if (rec && disabledRecipeIds.indexOf(rec) === -1) {\r\n        itemRecipeId[id] = rec;\r\n      } else {\r\n        const recipes = data.recipeIds\r\n          .map((r) => recipeR[r])\r\n          .filter(\r\n            (r) => r.produces(id) && disabledRecipeIds.indexOf(r.id) === -1\r\n          );\r\n        if (recipes.length === 1) {\r\n          itemRecipeId[id] = recipes[0].id;\r\n        }\r\n      }\r\n    }\r\n\r\n    // Check for loops in default recipes\r\n    for (const id of Object.keys(data.itemRecipeId)) {\r\n      this.cleanCircularRecipes(id, recipeR, itemRecipeId);\r\n    }\r\n\r\n    return { ...data, ...{ recipeR, itemRecipeId } };\r\n  }\r\n\r\n  static defaultRecipe(\r\n    itemId: string,\r\n    disabledRecipeIds: string[],\r\n    data: Dataset\r\n  ): string | undefined {\r\n    let recipeId: string | undefined;\r\n    const recipes = data.recipeIds\r\n      .map((r) => data.recipeR[r])\r\n      .filter(\r\n        (r) => r.produces(itemId) && disabledRecipeIds.indexOf(r.id) === -1\r\n      );\r\n    if (recipes.length === 1 && Object.keys(recipes[0].out).length === 1) {\r\n      recipeId = recipes[0].id;\r\n    }\r\n    return recipeId;\r\n  }\r\n\r\n  static adjustRecipes(\r\n    recipeSettings: Entities<RationalRecipeSettings>,\r\n    itemSettings: Entities<ItemSettings>,\r\n    fuelId: string | undefined,\r\n    proliferatorSprayId: string,\r\n    miningBonus: Rational,\r\n    researchSpeed: Rational,\r\n    data: Dataset\r\n  ): Entities<RationalRecipe> {\r\n    return this.adjustSiloRecipes(\r\n      data.recipeIds.reduce((e: Entities<RationalRecipe>, i) => {\r\n        e[i] = this.adjustRecipe(\r\n          i,\r\n          fuelId,\r\n          proliferatorSprayId,\r\n          miningBonus,\r\n          researchSpeed,\r\n          recipeSettings[i],\r\n          itemSettings,\r\n          data\r\n        );\r\n        return e;\r\n      }, {}),\r\n      recipeSettings,\r\n      data\r\n    );\r\n  }\r\n\r\n  static adjustCost(\r\n    recipeR: Entities<RationalRecipe>,\r\n    recipeSettings: Entities<RationalRecipeSettings>,\r\n    costFactor: Rational,\r\n    costFactory: Rational\r\n  ): void {\r\n    for (const id of Object.keys(recipeR)) {\r\n      const recipe = recipeR[id];\r\n      if (recipeSettings[id].cost) {\r\n        recipe.cost = recipeSettings[id].cost;\r\n      } else if (recipe.cost) {\r\n        // Recipe has a declared cost, base this on output items not factories\r\n        // Calculate total output, sum, and multiply cost by output\r\n        const output = Object.keys(recipe.out)\r\n          .reduce((v, o) => v.add(recipe.out[o]), Rational.zero)\r\n          .div(recipe.time);\r\n        recipe.cost = output.mul(recipe.cost).mul(costFactor);\r\n      } else {\r\n        // Adjust based on recipe time so that this is based on # factories\r\n        recipe.cost = costFactory;\r\n      }\r\n    }\r\n  }\r\n\r\n  static adjustProduct(\r\n    product: Product,\r\n    productSteps: Entities<[string, Rational][]>,\r\n    data: Dataset\r\n  ): Product {\r\n    if (product.rateType === RateType.Factories) {\r\n      product = { ...product };\r\n\r\n      if (!product.viaId) {\r\n        const simpleRecipeId = data.itemRecipeId[product.itemId];\r\n        if (simpleRecipeId) {\r\n          product.viaId = simpleRecipeId;\r\n        } else {\r\n          const via = this.getProductStepData(productSteps, product);\r\n          if (via) {\r\n            product.viaId = via[0];\r\n          }\r\n        }\r\n      }\r\n    } else if (!product.viaId) {\r\n      product = { ...product, ...{ viaId: product.itemId } };\r\n    }\r\n\r\n    return product;\r\n  }\r\n\r\n  static cleanCircularRecipes(\r\n    itemId: string,\r\n    recipeR: Entities<RationalRecipe>,\r\n    itemRecipeId: Entities,\r\n    itemIds: string[] = []\r\n  ): void {\r\n    const recipeId = itemRecipeId[itemId];\r\n    if (recipeId) {\r\n      if (itemIds.indexOf(itemId) !== -1) {\r\n        // Found a circular loop\r\n        delete itemRecipeId[itemId];\r\n      } else {\r\n        const recipe = recipeR[recipeId];\r\n        if (recipe.produces(itemId) && recipe.in) {\r\n          // Need to check recipe inputs for circular loops\r\n          itemIds = [...itemIds, itemId];\r\n          for (const ingredient of Object.keys(recipe.in).filter(\r\n            (i) => i !== itemId\r\n          )) {\r\n            this.cleanCircularRecipes(\r\n              ingredient,\r\n              recipeR,\r\n              itemRecipeId,\r\n              itemIds\r\n            );\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Constraint, Model, Simplex, Status, Variable } from 'glpk-ts';\r\n\r\nimport { environment } from 'src/environments';\r\nimport {\r\n  Dataset,\r\n  Entities,\r\n  MatrixResult,\r\n  MatrixResultType,\r\n  Rational,\r\n  RationalRecipe,\r\n  SimplexType,\r\n  Step,\r\n  WARNING_HANG,\r\n} from '~/models';\r\nimport { Items } from '~/store';\r\nimport { RateUtility } from './rate.utility';\r\n\r\nconst FLOAT_TOLERANCE = 1e-10;\r\n\r\nconst simplexConfig: Simplex.Options = environment.debug\r\n  ? // Don't test debug environment level\r\n    // istanbul ignore next\r\n    {}\r\n  : { msgLevel: 'off' };\r\n\r\nexport interface MatrixState {\r\n  /** Recipes used in the matrix */\r\n  recipes: Entities<RationalRecipe>;\r\n  /** Items used in the matrix */\r\n  items: Entities<Rational>;\r\n  /** Items that have no enabled recipe */\r\n  inputIds: string[];\r\n  /** All recipes that are not disabled */\r\n  recipeIds: string[];\r\n  /** All items that are not disabled */\r\n  itemIds: string[];\r\n  data: Dataset;\r\n  costInput: Rational;\r\n  costIgnored: Rational;\r\n  simplexType: SimplexType;\r\n}\r\n\r\nexport interface MatrixSolution {\r\n  resultType: MatrixResultType;\r\n  // glpkResult: Simplex.ReturnCode;\r\n  /** Final number of simplex pivots */\r\n  pivots: number;\r\n  /** Runtime in ms */\r\n  time: number;\r\n  /** Simplex canonical matrix */\r\n  A: Rational[][];\r\n  /** Simplex objective solution */\r\n  O: Rational[];\r\n  /** Items in tableau */\r\n  itemIds: string[];\r\n  /** Recipes in tableau */\r\n  recipeIds: string[];\r\n  /** Items identified as inputs in tableau */\r\n  inputIds: string[];\r\n\r\n  /** Surplus items, may be empty */\r\n  surplus: Entities<Rational>;\r\n  /** Input items (no recipe), may be empty */\r\n  inputs: Entities<Rational>;\r\n  /** Recipe values of the solution */\r\n  recipes: Entities<Rational>;\r\n}\r\n\r\nexport interface SimplexResult {\r\n  type: MatrixResultType;\r\n  pivots: number;\r\n  time: number;\r\n  O: Rational[];\r\n}\r\n\r\nexport interface GlpkResult {\r\n  O: Rational[];\r\n  returnCode: Simplex.ReturnCode;\r\n  status: Status;\r\n  error: boolean;\r\n  time: number;\r\n}\r\n\r\nexport interface MatrixCache {\r\n  O: Rational[];\r\n  R: Rational[];\r\n  pivots: number;\r\n  time: number;\r\n}\r\n\r\nexport class SimplexUtility {\r\n  static cache: Entities<MatrixCache[]> = {};\r\n\r\n  /** Solve all remaining steps using simplex method, if necessary */\r\n  static solve(\r\n    steps: Step[],\r\n    itemSettings: Items.ItemsState,\r\n    disabledRecipeIds: string[],\r\n    costInput: Rational,\r\n    costIgnored: Rational,\r\n    simplexType: SimplexType,\r\n    data: Dataset,\r\n    error = true\r\n  ): MatrixResult {\r\n    if (simplexType === SimplexType.Disabled || !steps.length) {\r\n      return { steps, resultType: MatrixResultType.Skipped };\r\n    }\r\n\r\n    // Get matrix state\r\n    const state = this.getState(\r\n      steps,\r\n      itemSettings,\r\n      disabledRecipeIds,\r\n      costInput,\r\n      costIgnored,\r\n      simplexType,\r\n      data\r\n    );\r\n\r\n    if (state == null) {\r\n      // Matrix solution is not required\r\n      return { steps, resultType: MatrixResultType.Skipped };\r\n    }\r\n\r\n    // Get solution for matrix state\r\n    const solution = this.getSolution(state, error);\r\n\r\n    if (\r\n      solution.resultType === MatrixResultType.Solved ||\r\n      solution.resultType === MatrixResultType.Cached\r\n    ) {\r\n      // Update steps with solution\r\n      this.updateSteps(steps, solution, state);\r\n    }\r\n\r\n    return {\r\n      steps,\r\n      resultType: solution.resultType,\r\n      pivots: solution.pivots,\r\n      time: solution.time,\r\n      A: solution.A,\r\n      O: solution.O,\r\n      itemIds: solution.itemIds,\r\n      recipeIds: solution.recipeIds,\r\n      inputIds: solution.inputIds,\r\n    };\r\n  }\r\n\r\n  /** Solve simplex for a given item id and return recipes or items in steps */\r\n  static getSteps(\r\n    itemId: string,\r\n    itemSettings: Items.ItemsState,\r\n    disabledRecipeIds: string[],\r\n    costInput: Rational,\r\n    costIgnored: Rational,\r\n    simplexType: SimplexType,\r\n    data: Dataset,\r\n    recipes: boolean\r\n  ): [string, Rational][] {\r\n    let steps: Step[] = [];\r\n    RateUtility.addStepsFor(itemId, Rational.one, steps, itemSettings, data);\r\n\r\n    steps = this.solve(\r\n      steps,\r\n      itemSettings,\r\n      disabledRecipeIds,\r\n      costInput,\r\n      costIgnored,\r\n      simplexType,\r\n      data,\r\n      false\r\n    ).steps;\r\n\r\n    if (recipes) {\r\n      return steps\r\n        .filter((s) => s.recipeId != null)\r\n        .sort((a, b) =>\r\n          data.recipeR[b.recipeId!]\r\n            .output(itemId)\r\n            .sub(data.recipeR[a.recipeId!].output(itemId))\r\n            .toNumber()\r\n        )\r\n        .map((s) => [s.recipeId!, s.factories!]);\r\n    } else {\r\n      return steps\r\n        .filter((s) => s.itemId != null && s.items != null)\r\n        .map((s) => [s.itemId!, s.items!]);\r\n    }\r\n  }\r\n\r\n  //#region Setup\r\n  static getState(\r\n    steps: Step[],\r\n    itemSettings: Items.ItemsState,\r\n    disabledRecipeIds: string[],\r\n    costInput: Rational,\r\n    costIgnored: Rational,\r\n    simplexType: SimplexType,\r\n    data: Dataset\r\n  ): MatrixState | null {\r\n    // Set up state object\r\n    const state: MatrixState = {\r\n      recipes: {},\r\n      items: {},\r\n      inputIds: [],\r\n      recipeIds: data.recipeIds.filter(\r\n        (r) => disabledRecipeIds.indexOf(r) === -1\r\n      ),\r\n      itemIds: data.itemIds.filter((i) => !itemSettings[i].ignore),\r\n      costInput,\r\n      costIgnored,\r\n      simplexType,\r\n      data,\r\n    };\r\n\r\n    // Check for unsolved steps where matrix is required\r\n    const unsolved = this.unsolvedSteps(steps, state);\r\n    if (unsolved.length === 0) {\r\n      return null; // Matrix solution is not required\r\n    }\r\n\r\n    // Add unsolved steps to matrix state\r\n    for (const step of unsolved) {\r\n      if (step.itemId != null && step.items != null) {\r\n        state.items[step.itemId] = step.items;\r\n      }\r\n    }\r\n\r\n    // Parse unsolved items for recipes\r\n    for (const step of unsolved) {\r\n      if (step.itemId) {\r\n        this.parseItemRecursively(step.itemId, state);\r\n      }\r\n    }\r\n\r\n    // Include any output-only items to calculate surplus\r\n    this.addSurplusVariables(state);\r\n\r\n    // Parse items that are input-only (no recipe available)\r\n    this.parseInputs(state);\r\n\r\n    return state;\r\n  }\r\n\r\n  /** Determine which steps can be solved by the matrix */\r\n  static unsolvedSteps(steps: Step[], state: MatrixState): Step[] {\r\n    return steps.filter(\r\n      (s) =>\r\n        s.recipeId == null &&\r\n        s.itemId != null &&\r\n        state.itemIds.indexOf(s.itemId) !== -1 &&\r\n        state.recipeIds.some(\r\n          (r) => s.itemId && state.data.recipeR[r].produces(s.itemId)\r\n        )\r\n    );\r\n  }\r\n\r\n  /** Find matching recipes for an item that have not yet been parsed */\r\n  static recipeMatches(itemId: string, state: MatrixState): RationalRecipe[] {\r\n    const recipes = state.recipeIds\r\n      .filter((r) => !state.recipes[r])\r\n      .map((r) => state.data.recipeR[r])\r\n      .filter((r) => r.out && r.out[itemId]);\r\n    for (const recipe of recipes) {\r\n      state.recipes[recipe.id] = recipe;\r\n    }\r\n    return recipes;\r\n  }\r\n\r\n  /** Find matching item inputs for a recipe that have not yet been parsed */\r\n  static itemMatches(recipe: RationalRecipe, state: MatrixState): string[] {\r\n    const itemIds = Object.keys(recipe.in).filter((i) => !state.items[i]);\r\n    for (const itemId of itemIds) {\r\n      state.items[itemId] = Rational.zero;\r\n    }\r\n    return itemIds;\r\n  }\r\n\r\n  /** Look for item inputs for a recipe, recursively */\r\n  static parseRecipeRecursively(\r\n    recipe: RationalRecipe,\r\n    state: MatrixState\r\n  ): void {\r\n    if (recipe.in) {\r\n      const matches = this.itemMatches(recipe, state);\r\n      for (const itemId of matches.filter(\r\n        (m) => state.itemIds.indexOf(m) !== -1\r\n      )) {\r\n        this.parseItemRecursively(itemId, state);\r\n      }\r\n    }\r\n  }\r\n\r\n  /** Look for recipes that output a passed item, recursively */\r\n  static parseItemRecursively(itemId: string, state: MatrixState): void {\r\n    const simpleRecipeId = state.data.itemRecipeId[itemId];\r\n    if (simpleRecipeId) {\r\n      if (!state.recipes[simpleRecipeId]) {\r\n        const recipe = state.data.recipeR[simpleRecipeId];\r\n        state.recipes[simpleRecipeId] = recipe;\r\n        this.parseRecipeRecursively(recipe, state);\r\n      }\r\n    } else {\r\n      const matches = this.recipeMatches(itemId, state);\r\n      for (const recipe of matches) {\r\n        this.parseRecipeRecursively(recipe, state);\r\n      }\r\n    }\r\n  }\r\n\r\n  /** Include items that only function as outputs to calculate surplus values */\r\n  static addSurplusVariables(state: MatrixState): void {\r\n    const recipes = Object.keys(state.recipes).map((r) => state.recipes[r]);\r\n    for (const recipe of recipes) {\r\n      for (const id of Object.keys(recipe.out).filter((o) => !state.items[o])) {\r\n        state.items[id] = Rational.zero;\r\n      }\r\n    }\r\n  }\r\n\r\n  /** Determines which items in the matrix are input-only (not produced by any recipe, or ignored) */\r\n  static parseInputs(state: MatrixState): void {\r\n    const itemIds = Object.keys(state.items);\r\n    const recipeIds = Object.keys(state.recipes);\r\n    state.inputIds = itemIds.filter(\r\n      (i) =>\r\n        !recipeIds.some((r) => state.data.recipeR[r].produces(i)) ||\r\n        state.itemIds.indexOf(i) === -1\r\n    );\r\n  }\r\n  //#endregion\r\n\r\n  //#region Simplex\r\n  /** Convert state to canonical tableau, solve using simplex, and parse solution */\r\n  static getSolution(state: MatrixState, error = true): MatrixSolution {\r\n    // Get glpk-wasm presolve solution\r\n    const glpkResult = this.glpk(state);\r\n\r\n    if (glpkResult.error) {\r\n      // No solution found\r\n      return {\r\n        resultType: MatrixResultType.Failed,\r\n        surplus: {},\r\n        recipes: {},\r\n        inputs: {},\r\n        pivots: 0,\r\n        time: 0,\r\n        A: [[]],\r\n        O: [],\r\n        itemIds: [],\r\n        recipeIds: [],\r\n        inputIds: [],\r\n      };\r\n    }\r\n\r\n    // Convert state to canonical tableau\r\n    const A = this.canonical(state);\r\n\r\n    const [O, H] = this.hash(A);\r\n\r\n    const itemIds = Object.keys(state.items);\r\n    const recipeIds = Object.keys(state.recipes);\r\n    const inputIds = state.inputIds;\r\n\r\n    // Check cache\r\n    const cache = this.checkCache(O, H);\r\n    if (cache) {\r\n      const [surplus, recipes, inputs] = this.parseSolution(cache.R, state);\r\n      // Found cached result\r\n      return {\r\n        resultType: MatrixResultType.Cached,\r\n        surplus,\r\n        recipes,\r\n        inputs,\r\n        pivots: cache.pivots,\r\n        time: cache.time,\r\n        A,\r\n        O: cache.R,\r\n        itemIds,\r\n        recipeIds,\r\n        inputIds,\r\n      };\r\n    } else {\r\n      // Cache original tableau\r\n      const A0 = A.map((R) => [...R]);\r\n\r\n      const result = this.simplexType(A, state.simplexType, glpkResult, error);\r\n\r\n      if (result.type === MatrixResultType.Solved) {\r\n        // Parse solution into usable state\r\n        this.cacheResult(O, H, result);\r\n        const [surplus, recipes, inputs] = this.parseSolution(result.O, state);\r\n        return {\r\n          resultType: result.type,\r\n          surplus,\r\n          recipes,\r\n          inputs,\r\n          pivots: result.pivots,\r\n          time: result.time,\r\n          A: A0,\r\n          O: result.O,\r\n          itemIds,\r\n          recipeIds,\r\n          inputIds,\r\n        };\r\n      } else {\r\n        // No solution found\r\n        return {\r\n          resultType: result.type,\r\n          surplus: {},\r\n          recipes: {},\r\n          inputs: {},\r\n          pivots: result.pivots,\r\n          time: result.time,\r\n          A: A0,\r\n          O: result.O,\r\n          itemIds,\r\n          recipeIds,\r\n          inputIds,\r\n        };\r\n      }\r\n    }\r\n  }\r\n\r\n  static glpk(state: MatrixState): GlpkResult {\r\n    const itemIds = Object.keys(state.items);\r\n    const recipeIds = Object.keys(state.recipes);\r\n\r\n    const m = new Model({ sense: 'min' });\r\n    const recipeVarEntities: Entities<Variable> = {};\r\n    const inputVarEntities: Entities<Variable> = {};\r\n    const itemConstrEntities: Entities<Constraint> = {};\r\n\r\n    // Add recipe vars to model\r\n    for (const recipeId of recipeIds) {\r\n      const config = {\r\n        obj: (state.recipes[recipeId].cost ?? Rational.zero).toNumber(),\r\n        lb: 0,\r\n        name: recipeId,\r\n      };\r\n      recipeVarEntities[recipeId] = m.addVar(config);\r\n    }\r\n\r\n    // Add input vars to model\r\n    for (const inputId of state.inputIds) {\r\n      const cost =\r\n        state.itemIds.indexOf(inputId) === -1\r\n          ? state.costIgnored\r\n          : state.costInput;\r\n      const config = {\r\n        obj: cost.toNumber(),\r\n        lb: 0,\r\n        name: inputId,\r\n      };\r\n      inputVarEntities[inputId] = m.addVar(config);\r\n    }\r\n\r\n    // Add item constraints to model\r\n    for (const itemId of itemIds) {\r\n      const coeffs: [Variable, number][] = [];\r\n      for (const recipeId of recipeIds) {\r\n        let val = Rational.zero;\r\n        const recipe = state.recipes[recipeId];\r\n        if (recipe.in[itemId]) {\r\n          val = val.sub(recipe.in[itemId]);\r\n        }\r\n        if (recipe.out[itemId]) {\r\n          val = val.add(recipe.out[itemId]);\r\n        }\r\n        if (val.nonzero()) {\r\n          coeffs.push([\r\n            recipeVarEntities[recipeId],\r\n            val.div(recipe.time).toNumber(),\r\n          ]);\r\n        }\r\n      }\r\n\r\n      // Add input coeff\r\n      if (state.inputIds.indexOf(itemId) !== -1) {\r\n        coeffs.push([inputVarEntities[itemId], 1]);\r\n      }\r\n\r\n      const config = { coeffs, lb: state.items[itemId].toNumber() };\r\n      itemConstrEntities[itemId] = m.addConstr(config);\r\n    }\r\n\r\n    // Run GLPK simplex\r\n    const start = Date.now();\r\n    const [returnCode, status] = this.glpkSimplex(m);\r\n    const time = Date.now() - start;\r\n\r\n    if (returnCode !== 'ok' || status !== 'optimal') {\r\n      return { returnCode, status, time, O: [], error: true };\r\n    }\r\n\r\n    // Set up IBFS\r\n    const O = [Rational.zero];\r\n    for (const itemId of itemIds) {\r\n      if (\r\n        // Include item if it is an input\r\n        (inputVarEntities[itemId] &&\r\n          !this.isFloatZero(inputVarEntities[itemId].value)) ||\r\n        // Include item if it is part of solution recipes\r\n        recipeIds.some(\r\n          (r) =>\r\n            !this.isFloatZero(recipeVarEntities[r].value) &&\r\n            (state.recipes[r].in[itemId] || state.recipes[r].out[itemId])\r\n        )\r\n      ) {\r\n        // Recipes for this item are part of the solution, include result\r\n        O.push(\r\n          Rational.fromNumber(itemConstrEntities[itemId].value).sub(\r\n            state.items[itemId]\r\n          )\r\n        );\r\n      } else {\r\n        // Item is not part of the solution, remove it\r\n        delete state.items[itemId];\r\n      }\r\n    }\r\n\r\n    // Clean up inputs\r\n    state.inputIds = state.inputIds.filter((i) => state.items[i] != null);\r\n\r\n    for (const recipeId of recipeIds) {\r\n      if (this.isFloatZero(recipeVarEntities[recipeId].value)) {\r\n        // Recipe is not part of the solution, remove it\r\n        delete state.recipes[recipeId];\r\n      } else {\r\n        // Recipe is part of the solution, include result\r\n        O.push(Rational.fromNumber(recipeVarEntities[recipeId].value));\r\n      }\r\n    }\r\n\r\n    for (const inputId of state.inputIds) {\r\n      O.push(Rational.fromNumber(inputVarEntities[inputId].value));\r\n    }\r\n\r\n    O.push(Rational.fromNumber(m.value));\r\n\r\n    return { returnCode, status, time, O, error: false };\r\n  }\r\n\r\n  static isFloatZero(val: number): boolean {\r\n    return Math.abs(val) < FLOAT_TOLERANCE;\r\n  }\r\n\r\n  /** Simplex method wrapper mainly for test mocking */\r\n  static glpkSimplex(model: Model): [Simplex.ReturnCode, Status] {\r\n    const returnCode = model.simplex(simplexConfig);\r\n    return [returnCode, model.status];\r\n  }\r\n\r\n  /** Convert state into canonical tableau */\r\n  static canonical(state: MatrixState): Rational[][] {\r\n    const itemIds = Object.keys(state.items);\r\n    const recipes = Object.keys(state.recipes).map((r) => state.recipes[r]);\r\n    const A: Rational[][] = [];\r\n\r\n    // Build objective row\r\n    const O: Rational[] = [Rational.one]; // C\r\n    for (const itemId of itemIds) {\r\n      // Add item columns\r\n      O.push(state.items[itemId].inverse());\r\n    }\r\n    // Add recipe columns, input columns, and cost\r\n    O.push(\r\n      ...new Array(recipes.length + state.inputIds.length + 1).fill(\r\n        Rational.zero\r\n      )\r\n    );\r\n    A.push(O);\r\n\r\n    // Build recipe rows\r\n    for (const recipe of recipes) {\r\n      const R: Rational[] = [Rational.zero]; // C\r\n\r\n      // Add item columns\r\n      for (const itemId of itemIds) {\r\n        let val = Rational.zero;\r\n        if (recipe.in[itemId]) {\r\n          val = val.sub(recipe.in[itemId]);\r\n        }\r\n        if (recipe.out[itemId]) {\r\n          val = val.add(recipe.out[itemId]);\r\n        }\r\n        R.push(val.div(recipe.time));\r\n      }\r\n\r\n      // Add recipe columns\r\n      for (const other of recipes) {\r\n        R.push(recipe.id === other.id ? Rational.one : Rational.zero);\r\n      }\r\n\r\n      // Add input columns\r\n      R.push(...new Array(state.inputIds.length).fill(Rational.zero));\r\n\r\n      // Add cost column\r\n      R.push(recipe.cost ?? Rational.zero);\r\n\r\n      A.push(R);\r\n    }\r\n\r\n    // Build input rows\r\n    for (const itemId of state.inputIds) {\r\n      const R: Rational[] = [Rational.zero]; // C\r\n\r\n      // Add item columns\r\n      for (const other of itemIds) {\r\n        R.push(itemId === other ? Rational.one : Rational.zero);\r\n      }\r\n\r\n      // Add recipe columns\r\n      R.push(...new Array(recipes.length).fill(Rational.zero));\r\n\r\n      // Add input columns\r\n      for (const other of state.inputIds) {\r\n        R.push(itemId === other ? Rational.one : Rational.zero);\r\n      }\r\n\r\n      // Add cost column\r\n      if (state.itemIds.indexOf(itemId) === -1) {\r\n        // Item is ignored, assume unlimited free input\r\n        R.push(state.costIgnored);\r\n      } else {\r\n        // Avoid using items that cannot currently be produced\r\n        R.push(state.costInput);\r\n      }\r\n      A.push(R);\r\n    }\r\n\r\n    return A;\r\n  }\r\n\r\n  /** Solve the canonical tableau using the selected simplex type */\r\n  static simplexType(\r\n    A: Rational[][],\r\n    simplexType: SimplexType,\r\n    glpkResult: GlpkResult,\r\n    error = true\r\n  ): SimplexResult {\r\n    if (simplexType === SimplexType.JsBigIntRational) {\r\n      const result = this.simplex(A, error);\r\n      result.time += glpkResult.time;\r\n      return result;\r\n    } else {\r\n      return {\r\n        type: MatrixResultType.Solved,\r\n        pivots: 0,\r\n        time: glpkResult.time,\r\n        O: glpkResult.O,\r\n      };\r\n    }\r\n  }\r\n\r\n  /** Solve the canonical tableau using the simplex method */\r\n  static simplex(A: Rational[][], error = true): SimplexResult {\r\n    const timeout = error ? 5000 : 1000;\r\n    let time = 0;\r\n    let check = true;\r\n    let start = Date.now();\r\n\r\n    let p = 0;\r\n\r\n    while (true) {\r\n      p++;\r\n      let c = 0;\r\n      const O = A[0];\r\n      for (let i = 1; i < O.length - 1; i++) {\r\n        if (O[i].lt(O[c])) {\r\n          c = i;\r\n        }\r\n      }\r\n\r\n      if (!O[c].lt(Rational.zero)) {\r\n        return {\r\n          type: MatrixResultType.Solved,\r\n          pivots: p,\r\n          time: time + Date.now() - start,\r\n          O: A[0],\r\n        };\r\n      }\r\n\r\n      if (!this.pivotCol(A, c)) {\r\n        return {\r\n          type: MatrixResultType.Failed,\r\n          pivots: p,\r\n          time: time + Date.now() - start,\r\n          O: A[0],\r\n        };\r\n      }\r\n\r\n      if (check) {\r\n        const time_check = Date.now() - start;\r\n        if (time_check > timeout) {\r\n          const warn =\r\n            WARNING_HANG +\r\n            `\\n\\nmatrix size: ${A.length} x ${A[0].length}, pivots: ${p}, time: ${time_check}ms`;\r\n          if (error && confirm(warn)) {\r\n            start = Date.now();\r\n            time = time_check;\r\n            check = false;\r\n          } else {\r\n            return {\r\n              type: MatrixResultType.Cancelled,\r\n              pivots: p,\r\n              time: time_check,\r\n              O: A[0],\r\n            };\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /** Pivot a column of the tableau */\r\n  static pivotCol(A: Rational[][], c: number): boolean {\r\n    const x = A[0].length - 1;\r\n    let r: number | null = null;\r\n    let rN: Rational | null = null;\r\n    for (let i = 1; i < A.length; i++) {\r\n      const R = A[i];\r\n      if (R[c].gt(Rational.zero)) {\r\n        const ratio = R[x].div(R[c]);\r\n        if (rN === null || ratio.lt(rN)) {\r\n          r = i;\r\n          rN = ratio;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (r === null) {\r\n      return false;\r\n    }\r\n\r\n    return this.pivot(A, c, r);\r\n  }\r\n\r\n  /** Performs a simplex pivot operation */\r\n  static pivot(A: Rational[][], c: number, r: number): boolean {\r\n    // Multiply pivot row by reciprocal of pivot element\r\n    const P = A[r];\r\n    const reciprocal = P[c].reciprocal();\r\n    for (let i = 0; i < P.length; i++) {\r\n      P[i] = P[i].mul(reciprocal);\r\n    }\r\n\r\n    // Add multiples of pivot row to other rows to change pivot column to 0\r\n    for (let i = 0; i < A.length; i++) {\r\n      if (i !== r && A[i][c].nonzero()) {\r\n        const R = A[i];\r\n        const factor = R[c];\r\n        for (let j = 0; j < R.length; j++) {\r\n          R[j] = R[j].sub(P[j].mul(factor));\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /** Parse solution from solved tableau */\r\n  static parseSolution(\r\n    O: Rational[],\r\n    state: MatrixState\r\n  ): [Entities<Rational>, Entities<Rational>, Entities<Rational>] {\r\n    const itemIds = Object.keys(state.items);\r\n    const recipeIds = Object.keys(state.recipes);\r\n\r\n    // Parse items\r\n    const surplus: Entities<Rational> = {};\r\n    for (let i = 0; i < itemIds.length; i++) {\r\n      const c = i + 1;\r\n      if (O[c].gt(Rational.zero)) {\r\n        surplus[itemIds[i]] = O[c];\r\n      }\r\n    }\r\n\r\n    // Parse recipes\r\n    const recipes: Entities<Rational> = {};\r\n    const inputs: Entities<Rational> = {};\r\n    for (let i = 0; i < recipeIds.length; i++) {\r\n      const c = 1 + itemIds.length + i;\r\n      if (O[c].gt(Rational.zero)) {\r\n        recipes[recipeIds[i]] = O[c];\r\n      }\r\n    }\r\n\r\n    // Parse inputs\r\n    for (let i = 0; i < state.inputIds.length; i++) {\r\n      const c = i + itemIds.length + recipeIds.length + 1;\r\n      if (O[c].gt(Rational.zero)) {\r\n        inputs[state.inputIds[i]] = O[c];\r\n      }\r\n    }\r\n\r\n    return [surplus, recipes, inputs];\r\n  }\r\n  //#endregion\r\n\r\n  //#region Solution\r\n  /** Update steps with matrix solution */\r\n  static updateSteps(\r\n    steps: Step[],\r\n    solution: MatrixSolution,\r\n    state: MatrixState\r\n  ): void {\r\n    for (const itemId of Object.keys(state.items)) {\r\n      this.addItemStep(itemId, steps, solution, state);\r\n    }\r\n    this.assignRecipes(steps, solution, state);\r\n    for (const recipe of Object.keys(solution.recipes).map(\r\n      (r) => state.recipes[r]\r\n    )) {\r\n      this.addRecipeStep(recipe, steps, solution);\r\n    }\r\n    this.updateParents(steps, solution, state);\r\n  }\r\n\r\n  /** Update steps with item from matrix solution */\r\n  static addItemStep(\r\n    itemId: string,\r\n    steps: Step[],\r\n    solution: MatrixSolution,\r\n    state: MatrixState\r\n  ): void {\r\n    let output = Rational.zero;\r\n    for (const recipe of Object.keys(solution.recipes)\r\n      .map((r) => state.recipes[r])\r\n      .filter((r) => r.out[itemId])) {\r\n      output = output.add(\r\n        recipe.out[itemId].mul(solution.recipes[recipe.id]).div(recipe.time)\r\n      );\r\n    }\r\n    if (solution.inputs[itemId]) {\r\n      output = output.add(solution.inputs[itemId]);\r\n    }\r\n    if (output.nonzero()) {\r\n      let step = steps.find((i) => i.itemId === itemId);\r\n      if (step != null) {\r\n        if (state.items[itemId].nonzero()) {\r\n          step.items = output;\r\n        } else {\r\n          step.items = (step.items ?? Rational.zero).add(output);\r\n        }\r\n      } else {\r\n        const recipes = state.data.recipeIds\r\n          .map((r) => state.recipes[r])\r\n          .filter((r) => r);\r\n        const index = steps.findIndex((i) =>\r\n          recipes.some(\r\n            (r) => i.itemId && r.produces(i.itemId) && r.produces(itemId)\r\n          )\r\n        );\r\n        step = {\r\n          id: steps.length.toString(),\r\n          itemId,\r\n          items: output,\r\n        };\r\n        if (index !== -1 && index < steps.length - 1) {\r\n          steps.splice(index + 1, 0, step);\r\n        } else {\r\n          steps.push(step);\r\n        }\r\n      }\r\n\r\n      if (solution.surplus[itemId]?.nonzero()) {\r\n        if (step.items == null || state.itemIds.indexOf(itemId) !== -1) {\r\n          // If step has no items or item is enabled, just assign surplus\r\n          step.surplus = solution.surplus[itemId];\r\n        } else {\r\n          // Don't add surplus to disabled items, instead reduce items\r\n          step.items = step.items.sub(solution.surplus[itemId]);\r\n          if (step.items.lt(Rational.zero)) {\r\n            // If this lowers items below zero, allow displaying as surplus\r\n            step.surplus = step.items.inverse();\r\n            step.items = Rational.zero;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /** Attempt to intelligently assign recipes to steps with no recipe */\r\n  static assignRecipes(\r\n    steps: Step[],\r\n    solution: MatrixSolution,\r\n    state: MatrixState\r\n  ): void {\r\n    const recipes = Object.keys(solution.recipes).map((r) => state.recipes[r]);\r\n\r\n    // Check for exact id matches\r\n    for (const step of steps.filter((s) => s.recipeId == null)) {\r\n      const i = recipes.findIndex(\r\n        (r) => r.id === step.itemId && r.produces(step.itemId)\r\n      );\r\n      if (i !== -1) {\r\n        step.recipeId = recipes[i].id;\r\n        recipes.splice(i, 1);\r\n      }\r\n    }\r\n\r\n    // Find best recipe match for remaining steps\r\n    const potentials: Entities<string[]> = {};\r\n    for (const step of steps.filter((s) => s.recipeId == null)) {\r\n      if (step.itemId) {\r\n        potentials[step.itemId] = recipes\r\n          .filter((r) => step.itemId && r.produces(step.itemId))\r\n          .sort((a, b) => Object.keys(a.out).length - Object.keys(b.out).length)\r\n          .map((r) => r.id);\r\n      }\r\n    }\r\n\r\n    const order = Object.keys(potentials).sort(\r\n      (a, b) => potentials[a].length - potentials[b].length\r\n    );\r\n    for (const itemId of order) {\r\n      for (const option of potentials[itemId]) {\r\n        if (!steps.some((s) => s.recipeId === option)) {\r\n          const step = steps.find((s) => s.itemId === itemId);\r\n          if (step) {\r\n            step.recipeId = option;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /** Update steps with recipe from matrix solution */\r\n  static addRecipeStep(\r\n    recipe: RationalRecipe,\r\n    steps: Step[],\r\n    solution: MatrixSolution\r\n  ): void {\r\n    let step = steps.find((s) => s.recipeId === recipe.id);\r\n    if (!step) {\r\n      step = steps.find(\r\n        (s) =>\r\n          s.recipeId == null && s.itemId != null && recipe.produces(s.itemId)\r\n      );\r\n    }\r\n    if (!step) {\r\n      const index = steps.findIndex(\r\n        (s) => s.itemId && recipe.produces(s.itemId)\r\n      );\r\n      step = {\r\n        id: steps.length.toString(),\r\n      };\r\n      if (index !== -1 && index < steps.length - 1) {\r\n        steps.splice(index + 1, 0, step);\r\n      } else {\r\n        steps.push(step);\r\n      }\r\n    }\r\n    step.recipeId = recipe.id;\r\n    step.factories = solution.recipes[recipe.id].add(\r\n      step.factories || Rational.zero\r\n    );\r\n    RateUtility.adjustPowerPollution(step, recipe);\r\n  }\r\n\r\n  /** Update parents of steps in matrix solution */\r\n  static updateParents(\r\n    steps: Step[],\r\n    solution: MatrixSolution,\r\n    state: MatrixState\r\n  ): void {\r\n    for (const recipe of Object.keys(solution.recipes)\r\n      .map((r) => state.recipes[r])\r\n      .filter((r) => r.in)) {\r\n      const quantity = solution.recipes[recipe.id].div(recipe.time);\r\n      for (const itemId of Object.keys(recipe.in).filter((i) =>\r\n        recipe.in[i].nonzero()\r\n      )) {\r\n        const step = steps.find((s) => s.itemId === itemId);\r\n        if (step) {\r\n          const rate = recipe.in[itemId].mul(quantity);\r\n          RateUtility.addParentValue(step, recipe.id, rate);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  //#endregion\r\n\r\n  //#region Cache\r\n  static hash(A: Rational[][]): [Rational[], string] {\r\n    const O = [...A[0]];\r\n    const B = A.filter((R, i) => i !== 0);\r\n    const H = B.map((R) => R.map((c) => c.toString()).join(',')).join('\\n');\r\n    return [O, H];\r\n  }\r\n\r\n  static cacheResult(O: Rational[], H: string, result: SimplexResult): void {\r\n    if (!this.cache[H]) {\r\n      this.cache[H] = [];\r\n    }\r\n    this.cache[H].push({\r\n      O,\r\n      R: result.O,\r\n      pivots: result.pivots,\r\n      time: result.time,\r\n    });\r\n  }\r\n\r\n  static checkCache(O: Rational[], H: string): MatrixCache | null {\r\n    if (this.cache[H]) {\r\n      // Check objective matches\r\n      for (const c of this.cache[H]) {\r\n        const ratio = this.objectiveRatio(O, c.O);\r\n        if (ratio) {\r\n          if (ratio.isOne()) {\r\n            return c;\r\n          } else {\r\n            return { ...c, ...{ R: c.R.map((r) => r.mul(ratio)) } };\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  static objectiveRatio(O: Rational[], C: Rational[]): Rational | null {\r\n    // Check length first\r\n    if (O.length !== C.length) {\r\n      return null;\r\n    }\r\n\r\n    // Check ratio\r\n    let ratio: Rational | null = null;\r\n    for (let i = 1; i < O.length; i++) {\r\n      if (C[i].isZero()) {\r\n        if (!O[i].isZero()) {\r\n          // No match\r\n          return null;\r\n        }\r\n        // Keep looking, both 0\r\n      } else {\r\n        if (O[i].isZero()) {\r\n          // No match\r\n          return null;\r\n        } else if (ratio) {\r\n          // Ratio must match\r\n          if (!ratio.eq(O[i].div(C[i]))) {\r\n            // No match\r\n            return null;\r\n          }\r\n          // Keep going\r\n        } else {\r\n          // Log the ratio\r\n          ratio = O[i].div(C[i]);\r\n        }\r\n      }\r\n    }\r\n\r\n    return ratio;\r\n  }\r\n  //#endregion\r\n}\r\n","import {\r\n  DefaultIdPayload,\r\n  DefaultPayload,\r\n  Entities,\r\n  IdPayload,\r\n} from '~/models';\r\n\r\nexport class StoreUtility {\r\n  static rankEquals<T extends number | string>(\r\n    a: T[],\r\n    b: T[] | undefined\r\n  ): boolean {\r\n    if (b == null) {\r\n      return false;\r\n    }\r\n    return a.length === b.length && a.every((v, i) => v === b[i]);\r\n  }\r\n\r\n  static arrayEquals<T extends number | string>(\r\n    a: T[],\r\n    b: T[] | undefined\r\n  ): boolean {\r\n    if (b == null) {\r\n      return false;\r\n    }\r\n    return this.rankEquals([...a].sort(), [...b].sort());\r\n  }\r\n\r\n  static payloadEquals<T>(payload: DefaultIdPayload<T>, rank = false): boolean {\r\n    return Array.isArray(payload.value) && Array.isArray(payload.def)\r\n      ? rank\r\n        ? this.rankEquals(\r\n            payload.value as (number | string)[],\r\n            payload.def as (number | string)[]\r\n          )\r\n        : this.arrayEquals(\r\n            payload.value as (number | string)[],\r\n            payload.def as (number | string)[]\r\n          )\r\n      : payload.value === payload.def;\r\n  }\r\n\r\n  /** Resets a passed fields of the state */\r\n  static resetFields<T>(\r\n    state: Entities<T>,\r\n    fields: (keyof T)[],\r\n    id?: string\r\n  ): Entities<T> {\r\n    // Spread into new state\r\n    let newState = { ...state };\r\n    for (const field of fields) {\r\n      newState = this.resetField(newState, field, id);\r\n    }\r\n    return newState;\r\n  }\r\n\r\n  /** Resets a passed field of the state */\r\n  static resetField<T>(\r\n    state: Entities<T>,\r\n    field: keyof T,\r\n    id?: string\r\n  ): Entities<T> {\r\n    // Spread into new state\r\n    const newState = { ...state };\r\n    for (const i of Object.keys(newState).filter(\r\n      (j) => (!id || id === j) && newState[j][field] !== undefined\r\n    )) {\r\n      if (Object.keys(newState[i]).length === 1) {\r\n        delete newState[i];\r\n      } else {\r\n        // Spread into new state\r\n        newState[i] = { ...newState[i] };\r\n        delete newState[i][field];\r\n      }\r\n    }\r\n    return newState;\r\n  }\r\n\r\n  static compareReset<T, P>(\r\n    state: Entities<T>,\r\n    field: keyof T,\r\n    payload: DefaultIdPayload<P>,\r\n    rank = false\r\n  ): Entities<T> {\r\n    // Spread into new state\r\n    if (this.payloadEquals(payload, rank)) {\r\n      // Resetting to null\r\n      const newState = { ...state };\r\n      if (newState[payload.id] !== undefined) {\r\n        newState[payload.id] = { ...newState[payload.id] };\r\n        if (newState[payload.id][field] !== undefined) {\r\n          delete newState[payload.id][field];\r\n        }\r\n        if (Object.keys(newState[payload.id]).length === 0) {\r\n          delete newState[payload.id];\r\n        }\r\n      }\r\n      return newState;\r\n    } else {\r\n      // Setting field\r\n      return this.assignValue(state, field, payload);\r\n    }\r\n  }\r\n\r\n  static assignValue<T, P>(\r\n    state: Entities<T>,\r\n    field: keyof T,\r\n    payload: IdPayload<P>\r\n  ): Entities<T> {\r\n    return {\r\n      ...state,\r\n      ...{\r\n        [payload.id]: { ...state[payload.id], ...{ [field]: payload.value } },\r\n      },\r\n    };\r\n  }\r\n\r\n  static compareValue<T>(payload: DefaultPayload<T>): T | undefined {\r\n    return payload.value === payload.def ? undefined : payload.value;\r\n  }\r\n\r\n  static compareValues(\r\n    payload: DefaultPayload<string[]>\r\n  ): string[] | undefined {\r\n    return this.arrayEquals(payload.value, payload.def)\r\n      ? undefined\r\n      : payload.value;\r\n  }\r\n\r\n  static compareRank(\r\n    value: string[],\r\n    def: string[] | undefined\r\n  ): string[] | undefined {\r\n    return this.rankEquals(value, def) ? undefined : value;\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { AutoFocusModule } from 'primeng/autofocus';\r\nimport { ButtonModule } from 'primeng/button';\r\nimport { CardModule } from 'primeng/card';\r\nimport { CheckboxModule } from 'primeng/checkbox';\r\nimport { ConfirmDialogModule } from 'primeng/confirmdialog';\r\nimport { DialogModule } from 'primeng/dialog';\r\nimport { DropdownModule } from 'primeng/dropdown';\r\nimport { InputNumberModule } from 'primeng/inputnumber';\r\nimport { InputTextModule } from 'primeng/inputtext';\r\nimport { MenuModule } from 'primeng/menu';\r\nimport { MultiSelectModule } from 'primeng/multiselect';\r\nimport { ProgressSpinnerModule } from 'primeng/progressspinner';\r\nimport { RippleModule } from 'primeng/ripple';\r\nimport { ScrollPanelModule } from 'primeng/scrollpanel';\r\nimport { SplitButtonModule } from 'primeng/splitbutton';\r\nimport { TableModule } from 'primeng/table';\r\nimport { TabMenuModule } from 'primeng/tabmenu';\r\nimport { TabViewModule } from 'primeng/tabview';\r\nimport { TooltipModule } from 'primeng/tooltip';\r\n\r\nconst modules = [\r\n  // primeng\r\n  AutoFocusModule,\r\n  ButtonModule,\r\n  CardModule,\r\n  CheckboxModule,\r\n  ConfirmDialogModule,\r\n  DialogModule,\r\n  DropdownModule,\r\n  InputNumberModule,\r\n  InputTextModule,\r\n  MenuModule,\r\n  MultiSelectModule,\r\n  ProgressSpinnerModule,\r\n  RippleModule,\r\n  ScrollPanelModule,\r\n  SplitButtonModule,\r\n  TableModule,\r\n  TabMenuModule,\r\n  TabViewModule,\r\n  TooltipModule,\r\n\r\n  // ngx-translate\r\n  TranslateModule,\r\n];\r\n\r\n@NgModule({\r\n  imports: [CommonModule, ...modules],\r\n  exports: [...modules],\r\n})\r\nexport class VendorModule {}\r\n","import { AppData, Game, Mod } from '~/models';\r\nimport appJson from './app/data.json';\r\n\r\nconst app = appJson as Mod;\r\nexport { app };\r\nexport const data: AppData = {\r\n  app,\r\n  mods: [\r\n    { id: '1.1', name: '1.1.x', game: Game.Factorio },\r\n    { id: '1.1e', name: '1.1.x Expensive', game: Game.Factorio },\r\n    { id: '1.0', name: '1.0.0', game: Game.Factorio },\r\n    { id: '017', name: '0.17.79', game: Game.Factorio },\r\n    { id: '016', name: '0.16.51', game: Game.Factorio },\r\n    { id: '248', name: '248k Standalone', game: Game.Factorio },\r\n    { id: '248o', name: '248k Overhaul', game: Game.Factorio },\r\n    { id: '248kr2sxp', name: '248k + Krastorio 2 + SE', game: Game.Factorio },\r\n    { id: 'aai', name: 'AAI Industry', game: Game.Factorio },\r\n    { id: 'ang', name: `Angel's Industries`, game: Game.Factorio },\r\n    { id: 'bio', name: 'Bio Industries', game: Game.Factorio },\r\n    { id: 'bob', name: `Bob's Mods`, game: Game.Factorio },\r\n    { id: 'bobang', name: `Bob's & Angel's`, game: Game.Factorio },\r\n    { id: 'fpp', name: 'Factorio Plus Plus', game: Game.Factorio },\r\n    { id: 'fep', name: 'FactorioExtended Plus', game: Game.Factorio },\r\n    { id: 'ir2', name: 'Industrial Revolution 2', game: Game.Factorio },\r\n    { id: 'kr2', name: 'Krastorio 2', game: Game.Factorio },\r\n    { id: 'kr2sxp', name: 'Krastorio 2 + SE', game: Game.Factorio },\r\n    { id: 'msc', name: 'More Science', game: Game.Factorio },\r\n    { id: 'nls', name: 'Nullius', game: Game.Factorio },\r\n    { id: 'pys', name: 'Pyanodons', game: Game.Factorio },\r\n    { id: 'pysalf', name: 'Pyanodons + AL', game: Game.Factorio },\r\n    { id: 'qat', name: `Qatavin's More Stuff`, game: Game.Factorio },\r\n    { id: 'sea', name: 'Sea Block', game: Game.Factorio },\r\n    { id: 'sxp', name: 'Space Exploration', game: Game.Factorio },\r\n    { id: 'xan', name: 'Xander Mod', game: Game.Factorio },\r\n    { id: 'dsp', name: 'Dyson Sphere Program', game: Game.DysonSphereProgram },\r\n    { id: 'sfy', name: 'Satisfactory', game: Game.Satisfactory },\r\n\t{ id: 'fox', name: 'Foxhole', game: Game.Foxhole },\r\n    { id: 'coi', name: 'Captain of Industry', game: Game.CaptainOfIndustry },\r\n  ],\r\n  v0: [\r\n    '1.1',\r\n    '1.0',\r\n    '0.17',\r\n    '0.16',\r\n    'bio-industries',\r\n    'bobs',\r\n    'bobs-angels',\r\n    'dsp',\r\n    'factorio-extended-plus',\r\n    'industrial-revolution',\r\n    'krastorio2',\r\n    'krastorio2+se',\r\n    'pyanodons',\r\n    'pyanodons+al',\r\n    'seablock',\r\n    'space-exploration',\r\n    'xander',\r\n  ],\r\n  hash: [\r\n    '1.1',\r\n    '1.0',\r\n    '017',\r\n    '016',\r\n    'bio',\r\n    'bob',\r\n    'bobang',\r\n    'dsp',\r\n    'fep',\r\n    'ir2',\r\n    'kr2',\r\n    'kr2sxp',\r\n    'pys',\r\n    'pysalf',\r\n    'sea',\r\n    'sxp',\r\n    'xan',\r\n    'nls',\r\n    'fpp',\r\n    'ang',\r\n    'msc',\r\n    'sfy',\r\n    'coi',\r\n    'qat',\r\n    '1.1e',\r\n    '248',\r\n    '248o',\r\n    '248kr2sxp',\r\n    'aai',\r\n  ],\r\n};\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nimport pkg from 'package.json';\r\n\r\nimport { Environment } from './';\r\n\r\nexport const environment: Environment = {\r\n  production: false,\r\n  testing: false,\r\n  debug: true,\r\n  baseHref: '/',\r\n  version: `${pkg.version} (dev)`,\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\r\n","export interface Environment {\r\n  production: boolean;\r\n  testing: boolean;\r\n  debug: boolean;\r\n  baseHref: string;\r\n  version: string;\r\n}\r\n\r\nexport * from './environment';\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { APP } from '~/models';\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nconsole.info(`${APP} ${environment.version}`);\r\n\r\nplatformBrowserDynamic()\r\n  .bootstrapModule(AppModule)\r\n  .catch((err) => console.error(err));\r\n","/* (ignored) */","/* (ignored) */","/* (ignored) */"],"names":["ChangeDetectorRef","NgZone","combineLatest","first","map","environment","APP","Game","gameInfo","ItemId","MatrixResultType","SimplexType","App","Preferences","Products","Settings","i0","_r13","ctx_r23","vm_r1","_r6","ctx_r2","ctx_r4","_r3","AppComponent","constructor","contentSvc","ngZone","ref","router","store","errorSvc","routerSvc","stateSvc","themeSvc","select","getGame","getMod","getMatrixResult","settingsActive$","settingsXlHidden$","scrollTop$","message$","pipe","game","mod","result","settingsActive","settingsXlHidden","scrollTop","errorMsg","version","subscribe","showSimplexErr","resultType","Failed","label","icon","routerLink","queryParamsHandling","ngOnInit","initialize","ngAfterViewInit","detectChanges","tryFixSimplex","isFixingSimplex","setTimeout","getDefaults","def","dispatch","SetSimplexTypeAction","WasmFloat64","SetDisabledRecipesAction","value","disabledRecipeIds","reset","isResetting","run","next","navigateByUrl","route","ResetAction","selectors","decls","vars","consts","template","UntilDestroy","untilDestroyed","tap","precisionColumns","ctx_r6","column_r5","_r7","ColumnsDialogComponent","getColumnsState","columns","initEdit","getColumnOptions","columnOptions","showColumns$","visible","markForCheck","editValue","Object","keys","reduce","e","c","changeFraction","column","precision","save","SetColumnsAction","games","link_r6","HeaderComponent","title","translateSvc","gameOptions","buildGameOptions","href","getBaseProducts","getDataset","lang$","products","data","instant","length","itemEntities","itemId","setTitle","name","filter","g","command","selectGame","hostVars","hostBindings","ElementRef","EventEmitter","FormControl","Recipes","i_r6","ctx_r0","PickerComponent","filterService","getAdjustedDataset","searchCtrl","valueChanges","search","inputSearch","clickOpen","selectedId","setValue","inputFilter","nativeElement","focus","categoryEntities","categoryIds","categoryItemRows","index","indexOf","category","activeIndex","clickItem","selectId","emit","selectItems","itemIds","i","filteredItems","some","r","push","viewQuery","displayRateOptions","RateType","Factories","Items","_r25","product_r4","_r8","ProductsComponent","trackSvc","getProducts","getViaOptions","getItemSettings","getFactories","getRecipeSettings","getDisplayRate","getRateTypeOptions","getOptions","viaOptions","itemSettings","factories","recipeSettings","displayRate","rateTypeOptions","options","removeProduct","id","RemoveAction","setItem","SetItemAction","setRate","SetRateAction","setRateType","SetRateTypeAction","setVia","SetViaAction","addProduct","AddAction","setDisplayRate","prev","SetDisplayRateAction","Validators","Column","FuelType","inserterCapacityOptions","inserterTargetOptions","languageOptions","powerUnitOptions","researchSpeedOptions","simplexTypeOptions","themeOptions","BrowserUtility","factoryId_r52","_r96","settings_r55","overclock","_r59","_r62","ctx_r20","ctx_r207","ctx_r22","ctx_r224","SettingsComponent","displaySvc","getFactoryRows","getFactoryOptions","getSettings","getModOptions","getPresetOptions","getBeltSpeedTxt","preferencesState","getSavedStates","factoryRows","factoryOptions","settings","modOptions","presetOptions","beltSpeedTxt","preferences","savedStates","factoryMenuItems","buildFactoryMenus","required","getStates","states","state","find","s","factoryId","items","raiseFactory","defaults","factoryRankIds","lowerFactory","clickResetSettings","confirm","header","message","acceptLabel","rejectLabel","accept","localStorage","clear","resetSettings","setState","query","queryParams","getParams","navigate","clickSaveState","stateCtrl","saveState","editState","clickDeleteState","removeState","openEditState","markAsPristine","setGame","setMod","modId","toggleBeaconReceivers","setBeaconReceivers","SaveStateAction","RemoveStateAction","SetModAction","setDisabledRecipes","setPreset","SetPresetAction","addFactory","removeFactory","RaiseAction","LowerAction","setFactory","SetFactoryAction","setModuleRank","SetModuleRankAction","setOverclock","SetOverclockAction","setBeaconCount","SetBeaconCountAction","setBeacon","SetBeaconAction","setBeaconModule","SetBeaconModuleAction","SetBeaconReceiversAction","setProliferatorSpray","SetProliferatorSprayAction","setBelt","SetBeltAction","setPipe","SetPipeAction","setCargoWagon","SetCargoWagonAction","setFluidWagon","SetFluidWagonAction","setFuel","SetFuelAction","setFlowRate","SetFlowRateAction","setInserterTarget","SetInserterTargetAction","setMiningBonus","SetMiningBonusAction","setResearchSpeed","SetResearchSpeedAction","setInserterCapacity","SetInserterCapacityAction","setPowerUnit","SetPowerUnitAction","setLanguage","use","SetLanguageAction","setTheme","SetThemeAction","setSimplexType","ctx"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}